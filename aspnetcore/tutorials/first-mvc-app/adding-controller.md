---
title: Ajouter un contrôleur à une application ASP.NET Core MVC
author: rick-anderson
description: Découvrez comment ajouter un contrôleur à une application ASP.NET Core MVC simple.
ms.author: riande
ms.date: 08/05/2017
uid: tutorials/first-mvc-app/adding-controller
ms.openlocfilehash: 1c54959130f3a9959d4d4fdb8dcaa0d37ee2f046
ms.sourcegitcommit: 2eb605f4f20ac4dd9de6c3b3e3453e108a357a21
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/06/2019
ms.locfileid: "68820055"
---
# <a name="add-a-controller-to-an-aspnet-core-mvc-app"></a><span data-ttu-id="71a69-103">Ajouter un contrôleur à une application ASP.NET Core MVC</span><span class="sxs-lookup"><span data-stu-id="71a69-103">Add a controller to an ASP.NET Core MVC app</span></span>

<span data-ttu-id="71a69-104">Par [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="71a69-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="71a69-105">Le modèle d’architecture MVC (Model-View-Controller) sépare une application en trois composants principaux : **M**odèle, **V**ue et **C**ontrôleur.</span><span class="sxs-lookup"><span data-stu-id="71a69-105">The Model-View-Controller (MVC) architectural pattern separates an app into three main components: **M**odel, **V**iew, and **C**ontroller.</span></span> <span data-ttu-id="71a69-106">Le modèle MVC vous permet de créer des applications qui sont plus faciles à tester et à mettre à jour que les applications monolithiques traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="71a69-106">The MVC pattern helps you create apps that are more testable and easier to update than traditional monolithic apps.</span></span> <span data-ttu-id="71a69-107">Les applications basées sur MVC contiennent :</span><span class="sxs-lookup"><span data-stu-id="71a69-107">MVC-based apps contain:</span></span>

* <span data-ttu-id="71a69-108">**M**odèles : des classes qui représentent les données de l’application.</span><span class="sxs-lookup"><span data-stu-id="71a69-108">**M**odels: Classes that represent the data of the app.</span></span> <span data-ttu-id="71a69-109">Les classes du modèle utilisent une logique de validation pour appliquer des règles d’entreprise à ces données.</span><span class="sxs-lookup"><span data-stu-id="71a69-109">The model classes use validation logic to enforce business rules for that data.</span></span> <span data-ttu-id="71a69-110">En règle générale, les objets du modèle récupèrent et stockent l’état du modèle dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="71a69-110">Typically, model objects retrieve and store model state in a database.</span></span> <span data-ttu-id="71a69-111">Dans ce didacticiel, un modèle `Movie` récupère les données des films dans une base de données, les fournit à la vue ou les met à jour.</span><span class="sxs-lookup"><span data-stu-id="71a69-111">In this tutorial, a `Movie` model retrieves movie data from a database, provides it to the view or updates it.</span></span> <span data-ttu-id="71a69-112">Les données mises à jour sont écrites dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="71a69-112">Updated data is written to a database.</span></span>

* <span data-ttu-id="71a69-113">**V**ue : Les vues sont les composants qui affichent l’interface utilisateur de l’application.</span><span class="sxs-lookup"><span data-stu-id="71a69-113">**V**iews: Views are the components that display the app's user interface (UI).</span></span> <span data-ttu-id="71a69-114">En règle générale, cette interface utilisateur affiche les données du modèle.</span><span class="sxs-lookup"><span data-stu-id="71a69-114">Generally, this UI displays the model data.</span></span>

* <span data-ttu-id="71a69-115">**C**ontrôleurs : les classes qui gèrent les demandes du navigateur.</span><span class="sxs-lookup"><span data-stu-id="71a69-115">**C**ontrollers: Classes that handle browser requests.</span></span> <span data-ttu-id="71a69-116">Ils récupèrent les données du modèle et appellent les modèles de vue qui retournent une réponse.</span><span class="sxs-lookup"><span data-stu-id="71a69-116">They retrieve model data and call view templates that return a response.</span></span> <span data-ttu-id="71a69-117">Dans une application MVC, la vue affiche seulement les informations ; le contrôleur gère et répond aux entrées et aux interactions de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="71a69-117">In an MVC app, the view only displays information; the controller handles and responds to user input and interaction.</span></span> <span data-ttu-id="71a69-118">Par exemple, le contrôleur gère les valeurs des données de routage et des chaînes de requête, et passe ces valeurs au modèle.</span><span class="sxs-lookup"><span data-stu-id="71a69-118">For example, the controller handles route data and query-string values, and passes these values to the model.</span></span> <span data-ttu-id="71a69-119">Le modèle peut utiliser ces valeurs pour interroger la base de données.</span><span class="sxs-lookup"><span data-stu-id="71a69-119">The model might use these values to query the database.</span></span> <span data-ttu-id="71a69-120">Par exemple, `https://localhost:5001/Home/Privacy` a comme données de routage `Home` (le contrôleur) et `Privacy` (la méthode d’action à appeler sur le contrôleur Home).</span><span class="sxs-lookup"><span data-stu-id="71a69-120">For example, `https://localhost:5001/Home/Privacy` has route data of `Home` (the controller) and `Privacy` (the action method to call on the home controller).</span></span> <span data-ttu-id="71a69-121">`https://localhost:5001/Movies/Edit/5` est une demande de modification du film avec l’ID 5 à l’aide du contrôleur movie.</span><span class="sxs-lookup"><span data-stu-id="71a69-121">`https://localhost:5001/Movies/Edit/5` is a request to edit the movie with ID=5 using the movie controller.</span></span> <span data-ttu-id="71a69-122">Les données d’itinéraire sont expliquées plus loin dans le didacticiel.</span><span class="sxs-lookup"><span data-stu-id="71a69-122">Route data is explained later in the tutorial.</span></span>

<span data-ttu-id="71a69-123">Le modèle MVC vous permet de créer des applications qui séparent les différents aspects de l’application (logique d’entrée, logique métier et logique de l’interface utilisateur), tout en assurant un couplage faible entre ces éléments.</span><span class="sxs-lookup"><span data-stu-id="71a69-123">The MVC pattern helps you create apps that separate the different aspects of the app (input logic, business logic, and UI logic), while providing a loose coupling between these elements.</span></span> <span data-ttu-id="71a69-124">Le modèle spécifie l’emplacement de chaque type de logique dans l’application.</span><span class="sxs-lookup"><span data-stu-id="71a69-124">The pattern specifies where each kind of logic should be located in the app.</span></span> <span data-ttu-id="71a69-125">La logique de l’interface utilisateur appartient à la vue.</span><span class="sxs-lookup"><span data-stu-id="71a69-125">The UI logic belongs in the view.</span></span> <span data-ttu-id="71a69-126">La logique d’entrée appartient au contrôleur.</span><span class="sxs-lookup"><span data-stu-id="71a69-126">Input logic belongs in the controller.</span></span> <span data-ttu-id="71a69-127">La logique métier appartient au modèle.</span><span class="sxs-lookup"><span data-stu-id="71a69-127">Business logic belongs in the model.</span></span> <span data-ttu-id="71a69-128">Cette séparation vous aide à gérer la complexité quand vous créez une application, car elle vous permet de travailler sur un aspect de l’implémentation à la fois, sans impacter le code d’un autre aspect.</span><span class="sxs-lookup"><span data-stu-id="71a69-128">This separation helps you manage complexity when you build an app, because it enables you to work on one aspect of the implementation at a time without impacting the code of another.</span></span> <span data-ttu-id="71a69-129">Par exemple, vous pouvez travailler sur le code des vues de façon indépendante du code de la logique métier.</span><span class="sxs-lookup"><span data-stu-id="71a69-129">For example, you can work on the view code without depending on the business logic code.</span></span>

<span data-ttu-id="71a69-130">Nous présentons ces concepts dans cette série de didacticiels et nous vous montrons comment les utiliser pour créer une application de gestion de films.</span><span class="sxs-lookup"><span data-stu-id="71a69-130">We cover these concepts in this tutorial series and show you how to use them to build a movie app.</span></span> <span data-ttu-id="71a69-131">Le projet MVC contient des dossiers pour les *contrôleurs* et pour les *vues*.</span><span class="sxs-lookup"><span data-stu-id="71a69-131">The MVC project contains folders for the *Controllers* and *Views*.</span></span>

## <a name="add-a-controller"></a><span data-ttu-id="71a69-132">Ajouter un contrôleur</span><span class="sxs-lookup"><span data-stu-id="71a69-132">Add a controller</span></span>

# <a name="visual-studiotabvisual-studio"></a>[<span data-ttu-id="71a69-133">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="71a69-133">Visual Studio</span></span>](#tab/visual-studio)

* <span data-ttu-id="71a69-134">Dans **l’Explorateur de solutions**, cliquez avec le bouton droit sur le ![menu contextuel](adding-controller/_static/add_controller.png) **Contrôleurs > Ajouter > Contrôleur**
  </span><span class="sxs-lookup"><span data-stu-id="71a69-134">In **Solution Explorer**, right-click **Controllers > Add > Controller**
![Contextual menu](adding-controller/_static/add_controller.png)</span></span>

* <span data-ttu-id="71a69-135">Dans la boîte de dialogue **Ajouter un modèle automatique**, sélectionnez **Contrôleur MVC - vide**</span><span class="sxs-lookup"><span data-stu-id="71a69-135">In the **Add Scaffold** dialog box, select **MVC Controller - Empty**</span></span>

  ![Ajoutez un contrôleur MVC et nommez-le](adding-controller/_static/ac.png)

* <span data-ttu-id="71a69-137">Dans la **boîte de dialogue Ajouter un contrôleur MVC vide**, entrez **HelloWorldController** et sélectionnez **AJOUTER**.</span><span class="sxs-lookup"><span data-stu-id="71a69-137">In the **Add Empty MVC Controller dialog**, enter **HelloWorldController** and select **ADD**.</span></span>

# <a name="visual-studio-codetabvisual-studio-code"></a>[<span data-ttu-id="71a69-138">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="71a69-138">Visual Studio Code</span></span>](#tab/visual-studio-code)

<span data-ttu-id="71a69-139">Sélectionnez l’icône **EXPLORATEUR** et cliquez en maintenant enfoncée la touche Ctrl (ou cliquez avec le bouton droit) sur **Contrôleurs > Nouveau fichier** et nommez le nouveau fichier *HelloWorldController.cs*.</span><span class="sxs-lookup"><span data-stu-id="71a69-139">Select the **EXPLORER** icon and then control-click (right-click) **Controllers > New File** and name the new file *HelloWorldController.cs*.</span></span>

  ![Menu contextuel](~/tutorials/first-mvc-app-xplat/adding-controller/_static/new_file.png)

# <a name="visual-studio-for-mactabvisual-studio-mac"></a>[<span data-ttu-id="71a69-141">Visual Studio pour Mac</span><span class="sxs-lookup"><span data-stu-id="71a69-141">Visual Studio for Mac</span></span>](#tab/visual-studio-mac)

<span data-ttu-id="71a69-142">Dans **l’Explorateur de solutions**, cliquez avec le bouton droit sur **Contrôleurs > Ajouter > Nouveau fichier**.</span><span class="sxs-lookup"><span data-stu-id="71a69-142">In **Solution Explorer**, right-click **Controllers > Add > New File**.</span></span>
<span data-ttu-id="71a69-143">![Menu contextuel](~/tutorials/first-mvc-app-mac/adding-controller/_static/add_controller.png)</span><span class="sxs-lookup"><span data-stu-id="71a69-143">![Contextual menu](~/tutorials/first-mvc-app-mac/adding-controller/_static/add_controller.png)</span></span>

<span data-ttu-id="71a69-144">Sélectionnez **ASP.NET Core** et **Classe de contrôleur MVC**.</span><span class="sxs-lookup"><span data-stu-id="71a69-144">Select **ASP.NET Core** and **MVC Controller Class**.</span></span>

<span data-ttu-id="71a69-145">Nommez le contrôleur **HelloWorldController**.</span><span class="sxs-lookup"><span data-stu-id="71a69-145">Name the controller **HelloWorldController**.</span></span>

![Ajoutez un contrôleur MVC et nommez-le](~/tutorials/first-mvc-app-mac/adding-controller/_static/ac.png)

---

<span data-ttu-id="71a69-147">Remplacez le contenu de *Controllers/HelloWorldController.cs* par ceci :</span><span class="sxs-lookup"><span data-stu-id="71a69-147">Replace the contents of *Controllers/HelloWorldController.cs* with the following:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]

<span data-ttu-id="71a69-148">Chaque méthode `public` d’un contrôleur peut être appelée en tant que point de terminaison HTTP.</span><span class="sxs-lookup"><span data-stu-id="71a69-148">Every `public` method in a controller is callable as an HTTP endpoint.</span></span> <span data-ttu-id="71a69-149">Dans l’exemple ci-dessus, les deux méthodes retournent une chaîne.</span><span class="sxs-lookup"><span data-stu-id="71a69-149">In the sample above, both methods return a string.</span></span> <span data-ttu-id="71a69-150">Notez les commentaires qui précèdent chaque méthode.</span><span class="sxs-lookup"><span data-stu-id="71a69-150">Note the comments preceding each method.</span></span>

<span data-ttu-id="71a69-151">Un point de terminaison HTTP est une URL qui peut être ciblée dans l’application web, comme `https://localhost:5001/HelloWorld`, et qui combine le protocole utilisé : `HTTPS`, l’emplacement réseau du serveur web (avec le port TCP) : `localhost:5001` et l’URI cible `HelloWorld`.</span><span class="sxs-lookup"><span data-stu-id="71a69-151">An HTTP endpoint is a targetable URL in the web application, such as `https://localhost:5001/HelloWorld`, and combines the protocol used: `HTTPS`, the network location of the web server (including the TCP port): `localhost:5001` and the target URI `HelloWorld`.</span></span>

<span data-ttu-id="71a69-152">Le premier commentaire indique qu’il s’agit d’une méthode [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) qui est appelée en ajoutant `/HelloWorld/` à l’URL de base.</span><span class="sxs-lookup"><span data-stu-id="71a69-152">The first comment states this is an [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) method that's invoked by appending `/HelloWorld/` to the base URL.</span></span> <span data-ttu-id="71a69-153">Le deuxième commentaire indique une méthode [HTTP GET](https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) qui est appelée en ajoutant `/HelloWorld/Welcome/` à l’URL.</span><span class="sxs-lookup"><span data-stu-id="71a69-153">The second comment specifies an [HTTP GET](https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) method that's invoked by appending `/HelloWorld/Welcome/` to the URL.</span></span> <span data-ttu-id="71a69-154">Plus loin dans ce didacticiel, le moteur de génération de modèles automatique est utilisé pour générer des méthodes `HTTP POST` qui mettent à jour des données.</span><span class="sxs-lookup"><span data-stu-id="71a69-154">Later on in the tutorial the scaffolding engine is used to generate `HTTP POST` methods which update data.</span></span>

<span data-ttu-id="71a69-155">Exécutez l’application en mode de non-débogage et ajoutez « HelloWorld » au chemin dans la barre d’adresse.</span><span class="sxs-lookup"><span data-stu-id="71a69-155">Run the app in non-debug mode and append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="71a69-156">La méthode `Index` retourne une chaîne.</span><span class="sxs-lookup"><span data-stu-id="71a69-156">The `Index` method returns a string.</span></span>

![Fenêtre de navigateur montrant une réponse de l’application à l’action This is my default](~/tutorials/first-mvc-app/adding-controller/_static/hell1.png)

<span data-ttu-id="71a69-158">MVC appelle les classes du contrôleur (et les méthodes d’action au sein de celles-ci) en fonction de l’URL entrante.</span><span class="sxs-lookup"><span data-stu-id="71a69-158">MVC invokes controller classes (and the action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="71a69-159">La [logique de routage d’URL](xref:mvc/controllers/routing) par défaut utilisée par le modèle MVC utilise un format comme celui-ci pour déterminer le code à appeler :</span><span class="sxs-lookup"><span data-stu-id="71a69-159">The default [URL routing logic](xref:mvc/controllers/routing) used by MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="71a69-160">Le format de routage est défini dans la méthode `Configure` du fichier *Startup.cs*.</span><span class="sxs-lookup"><span data-stu-id="71a69-160">The routing format is set in the `Configure` method in *Startup.cs* file.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie3/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="71a69-161">Quand vous naviguez jusqu’à l’application et que vous ne fournissez aucun segment d’URL, sa valeur par défaut est le contrôleur « Home » et la méthode « Index » spécifiée dans la ligne du modèle mise en surbrillance ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="71a69-161">When you browse to the app and don't supply any URL segments, it defaults to the "Home" controller and the "Index" method specified in the template line highlighted above.</span></span>

<span data-ttu-id="71a69-162">Le premier segment d’URL détermine la classe du contrôleur à exécuter.</span><span class="sxs-lookup"><span data-stu-id="71a69-162">The first URL segment determines the controller class to run.</span></span> <span data-ttu-id="71a69-163">`localhost:{PORT}/HelloWorld` mappe donc à la classe de contrôleur **HelloWorld**.</span><span class="sxs-lookup"><span data-stu-id="71a69-163">So `localhost:{PORT}/HelloWorld` maps to the **HelloWorld**Controller class.</span></span> <span data-ttu-id="71a69-164">La seconde partie du segment d’URL détermine la méthode d’action sur la classe.</span><span class="sxs-lookup"><span data-stu-id="71a69-164">The second part of the URL segment determines the action method on the class.</span></span> <span data-ttu-id="71a69-165">Ainsi, `localhost:{PORT}/HelloWorld/Index` provoque l’exécution de la méthode `Index` de la classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="71a69-165">So `localhost:{PORT}/HelloWorld/Index` would cause the `Index` method of the `HelloWorldController` class to run.</span></span> <span data-ttu-id="71a69-166">Notez que vous n’avez eu qu’à accéder à `localhost:{PORT}/HelloWorld` pour que la méthode `Index` soit appelée par défaut.</span><span class="sxs-lookup"><span data-stu-id="71a69-166">Notice that you only had to browse to `localhost:{PORT}/HelloWorld` and the `Index` method was called by default.</span></span> <span data-ttu-id="71a69-167">La raison en est que `Index` est la méthode par défaut qui est appelée sur un contrôleur si un nom de méthode n’est pas explicitement spécifié.</span><span class="sxs-lookup"><span data-stu-id="71a69-167">That's because `Index` is the default method that will be called on a controller if a method name isn't explicitly specified.</span></span> <span data-ttu-id="71a69-168">La troisième partie du segment d’URL (`id`) concerne les données de routage.</span><span class="sxs-lookup"><span data-stu-id="71a69-168">The third part of the URL segment ( `id`) is for route data.</span></span> <span data-ttu-id="71a69-169">Les données d’itinéraire sont expliquées plus loin dans le didacticiel.</span><span class="sxs-lookup"><span data-stu-id="71a69-169">Route data is explained later in the tutorial.</span></span>

<span data-ttu-id="71a69-170">Accédez à `https://localhost:{PORT}/HelloWorld/Welcome`.</span><span class="sxs-lookup"><span data-stu-id="71a69-170">Browse to `https://localhost:{PORT}/HelloWorld/Welcome`.</span></span> <span data-ttu-id="71a69-171">La méthode `Welcome` s’exécute et retourne la chaîne `This is the Welcome action method...`.</span><span class="sxs-lookup"><span data-stu-id="71a69-171">The `Welcome` method runs and returns the string `This is the Welcome action method...`.</span></span> <span data-ttu-id="71a69-172">Pour cette URL, le contrôleur est `HelloWorld`, et `Welcome` est la méthode d’action.</span><span class="sxs-lookup"><span data-stu-id="71a69-172">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="71a69-173">Vous n’avez pas encore utilisé la partie `[Parameters]` de l’URL.</span><span class="sxs-lookup"><span data-stu-id="71a69-173">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![Fenêtre de navigateur montrant une réponse de la méthode d’action « This is the Welcome action »](~/tutorials/first-mvc-app/adding-controller/_static/welcome.png)

<span data-ttu-id="71a69-175">Modifiez le code pour passer des informations sur les paramètres de l’URL au contrôleur.</span><span class="sxs-lookup"><span data-stu-id="71a69-175">Modify the code to pass some parameter information from the URL to the controller.</span></span> <span data-ttu-id="71a69-176">Par exemple, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span><span class="sxs-lookup"><span data-stu-id="71a69-176">For example, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span></span> <span data-ttu-id="71a69-177">Modifiez la méthode `Welcome` en y incluant les deux paramètres, comme indiqué dans le code suivant.</span><span class="sxs-lookup"><span data-stu-id="71a69-177">Change the `Welcome` method to include two parameters as shown in the following code.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]

<span data-ttu-id="71a69-178">Le code précédent :</span><span class="sxs-lookup"><span data-stu-id="71a69-178">The preceding code:</span></span>

* <span data-ttu-id="71a69-179">Utilise la fonctionnalité de paramètre facultatif de C# pour indiquer que le paramètre `numTimes` a 1 comme valeur par défaut si aucune valeur n’est passée pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="71a69-179">Uses the C# optional-parameter feature to indicate that the `numTimes` parameter defaults to 1 if no value is passed for that parameter.</span></span> <!-- remove for simplified -->
* <span data-ttu-id="71a69-180">Utilise `HtmlEncoder.Default.Encode` pour protéger l’application des entrées malveillantes (notamment en JavaScript).</span><span class="sxs-lookup"><span data-stu-id="71a69-180">Uses `HtmlEncoder.Default.Encode` to protect the app from malicious input (namely JavaScript).</span></span>
* <span data-ttu-id="71a69-181">Utilise des [chaînes interpolées](/dotnet/articles/csharp/language-reference/keywords/interpolated-strings) dans `$"Hello {name}, NumTimes is: {numTimes}"`.</span><span class="sxs-lookup"><span data-stu-id="71a69-181">Uses [Interpolated Strings](/dotnet/articles/csharp/language-reference/keywords/interpolated-strings) in `$"Hello {name}, NumTimes is: {numTimes}"`.</span></span> <!-- remove for simplified -->

<span data-ttu-id="71a69-182">Exécutez l’application et accédez à :</span><span class="sxs-lookup"><span data-stu-id="71a69-182">Run the app and browse to:</span></span>

   `https://localhost:{PORT}/HelloWorld/Welcome?name=Rick&numtimes=4`

<span data-ttu-id="71a69-183">(Remplacez `{PORT}` par votre numéro de port.) Vous pouvez essayer différentes valeurs pour `name` et `numtimes` dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="71a69-183">(Replace `{PORT}` with your port number.) You can try different values for `name` and `numtimes` in the URL.</span></span> <span data-ttu-id="71a69-184">Le système de [liaison de données](xref:mvc/models/model-binding) du modèle MVC mappe automatiquement les paramètres nommés provenant de la chaîne de requête dans la barre d’adresse aux paramètres de votre méthode.</span><span class="sxs-lookup"><span data-stu-id="71a69-184">The MVC [model binding](xref:mvc/models/model-binding) system automatically maps the named parameters from the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="71a69-185">Pour plus d’informations, consultez [Liaison de données](xref:mvc/models/model-binding).</span><span class="sxs-lookup"><span data-stu-id="71a69-185">See [Model Binding](xref:mvc/models/model-binding) for more information.</span></span>

![Fenêtre de navigateur montrant une réponse de l’application « Hello Rick, NumTimes is: 4](~/tutorials/first-mvc-app/adding-controller/_static/rick4.png)

<span data-ttu-id="71a69-187">Dans l’image ci-dessus, le segment d’URL (`Parameters`) n’est pas utilisé, les paramètres `name` et `numTimes` sont passés en tant que [chaînes de requête](https://wikipedia.org/wiki/Query_string).</span><span class="sxs-lookup"><span data-stu-id="71a69-187">In the image above, the URL segment (`Parameters`) isn't used, the `name` and `numTimes` parameters are passed as [query strings](https://wikipedia.org/wiki/Query_string).</span></span> <span data-ttu-id="71a69-188">Le `?` (point d’interrogation) dans l’URL ci-dessus est un séparateur, qui est suivi des chaînes de requête.</span><span class="sxs-lookup"><span data-stu-id="71a69-188">The `?` (question mark) in the above URL is a separator, and the query strings follow.</span></span> <span data-ttu-id="71a69-189">Le caractère `&` sépare les chaînes de requête.</span><span class="sxs-lookup"><span data-stu-id="71a69-189">The `&` character separates query strings.</span></span>

<span data-ttu-id="71a69-190">Remplacez la méthode `Welcome` par le code suivant :</span><span class="sxs-lookup"><span data-stu-id="71a69-190">Replace the `Welcome` method with the following code:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]

<span data-ttu-id="71a69-191">Exécutez l’application et entrez l’URL suivante : `https://localhost:{PORT}/HelloWorld/Welcome/3?name=Rick`</span><span class="sxs-lookup"><span data-stu-id="71a69-191">Run the app and enter the following URL: `https://localhost:{PORT}/HelloWorld/Welcome/3?name=Rick`</span></span>

<span data-ttu-id="71a69-192">Cette fois, le troisième segment de l’URL correspondait au paramètre de routage `id`.</span><span class="sxs-lookup"><span data-stu-id="71a69-192">This time the third URL segment matched the route parameter `id`.</span></span> <span data-ttu-id="71a69-193">La méthode `Welcome` contient un paramètre `id` qui correspondait au modèle d’URL de la méthode `MapControllerRoute`.</span><span class="sxs-lookup"><span data-stu-id="71a69-193">The `Welcome` method contains a parameter `id` that matched the URL template in the `MapControllerRoute` method.</span></span> <span data-ttu-id="71a69-194">Le `?` de fin (dans `id?`) indique que le paramètre `id` est facultatif.</span><span class="sxs-lookup"><span data-stu-id="71a69-194">The trailing `?` (in `id?`) indicates the `id` parameter is optional.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie3/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="71a69-195">Dans ces exemples, le contrôleur traite la partie « VC » du modèle MVC, autrement dit, la **v**ue et le **c**ontrôleur fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="71a69-195">In these examples the controller has been doing the "VC" portion of MVC - that is, the **V**iew and the **C**ontroller work.</span></span> <span data-ttu-id="71a69-196">Le contrôleur retourne directement du HTML.</span><span class="sxs-lookup"><span data-stu-id="71a69-196">The controller is returning HTML directly.</span></span> <span data-ttu-id="71a69-197">En règle générale, vous ne souhaitez pas que les contrôleurs retournent directement du HTML, car le codage et la maintenance deviennent dans ce cas très laborieux.</span><span class="sxs-lookup"><span data-stu-id="71a69-197">Generally you don't want controllers returning HTML directly, since that becomes very cumbersome to code and maintain.</span></span> <span data-ttu-id="71a69-198">Au lieu de cela, vous utilisez généralement un fichier de modèle de vue Razor distinct pour générer la réponse HTML.</span><span class="sxs-lookup"><span data-stu-id="71a69-198">Instead you typically use a separate Razor view template file to generate the HTML response.</span></span> <span data-ttu-id="71a69-199">Vous faites cela dans le didacticiel suivant.</span><span class="sxs-lookup"><span data-stu-id="71a69-199">You do that in the next tutorial.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="71a69-200">[Précédent](start-mvc.md)
> [Suivant](adding-view.md)</span><span class="sxs-lookup"><span data-stu-id="71a69-200">[Previous](start-mvc.md)
[Next](adding-view.md)</span></span>

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="71a69-201">Le modèle d’architecture MVC (Model-View-Controller) sépare une application en trois composants principaux : **M**odèle, **V**ue et **C**ontrôleur.</span><span class="sxs-lookup"><span data-stu-id="71a69-201">The Model-View-Controller (MVC) architectural pattern separates an app into three main components: **M**odel, **V**iew, and **C**ontroller.</span></span> <span data-ttu-id="71a69-202">Le modèle MVC vous permet de créer des applications qui sont plus faciles à tester et à mettre à jour que les applications monolithiques traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="71a69-202">The MVC pattern helps you create apps that are more testable and easier to update than traditional monolithic apps.</span></span> <span data-ttu-id="71a69-203">Les applications basées sur MVC contiennent :</span><span class="sxs-lookup"><span data-stu-id="71a69-203">MVC-based apps contain:</span></span>

* <span data-ttu-id="71a69-204">**M**odèles : des classes qui représentent les données de l’application.</span><span class="sxs-lookup"><span data-stu-id="71a69-204">**M**odels: Classes that represent the data of the app.</span></span> <span data-ttu-id="71a69-205">Les classes du modèle utilisent une logique de validation pour appliquer des règles d’entreprise à ces données.</span><span class="sxs-lookup"><span data-stu-id="71a69-205">The model classes use validation logic to enforce business rules for that data.</span></span> <span data-ttu-id="71a69-206">En règle générale, les objets du modèle récupèrent et stockent l’état du modèle dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="71a69-206">Typically, model objects retrieve and store model state in a database.</span></span> <span data-ttu-id="71a69-207">Dans ce didacticiel, un modèle `Movie` récupère les données des films dans une base de données, les fournit à la vue ou les met à jour.</span><span class="sxs-lookup"><span data-stu-id="71a69-207">In this tutorial, a `Movie` model retrieves movie data from a database, provides it to the view or updates it.</span></span> <span data-ttu-id="71a69-208">Les données mises à jour sont écrites dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="71a69-208">Updated data is written to a database.</span></span>

* <span data-ttu-id="71a69-209">**V**ue : Les vues sont les composants qui affichent l’interface utilisateur de l’application.</span><span class="sxs-lookup"><span data-stu-id="71a69-209">**V**iews: Views are the components that display the app's user interface (UI).</span></span> <span data-ttu-id="71a69-210">En règle générale, cette interface utilisateur affiche les données du modèle.</span><span class="sxs-lookup"><span data-stu-id="71a69-210">Generally, this UI displays the model data.</span></span>

* <span data-ttu-id="71a69-211">**C**ontrôleurs : les classes qui gèrent les demandes du navigateur.</span><span class="sxs-lookup"><span data-stu-id="71a69-211">**C**ontrollers: Classes that handle browser requests.</span></span> <span data-ttu-id="71a69-212">Ils récupèrent les données du modèle et appellent les modèles de vue qui retournent une réponse.</span><span class="sxs-lookup"><span data-stu-id="71a69-212">They retrieve model data and call view templates that return a response.</span></span> <span data-ttu-id="71a69-213">Dans une application MVC, la vue affiche seulement les informations ; le contrôleur gère et répond aux entrées et aux interactions de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="71a69-213">In an MVC app, the view only displays information; the controller handles and responds to user input and interaction.</span></span> <span data-ttu-id="71a69-214">Par exemple, le contrôleur gère les valeurs des données de routage et des chaînes de requête, et passe ces valeurs au modèle.</span><span class="sxs-lookup"><span data-stu-id="71a69-214">For example, the controller handles route data and query-string values, and passes these values to the model.</span></span> <span data-ttu-id="71a69-215">Le modèle peut utiliser ces valeurs pour interroger la base de données.</span><span class="sxs-lookup"><span data-stu-id="71a69-215">The model might use these values to query the database.</span></span> <span data-ttu-id="71a69-216">Par exemple, `https://localhost:5001/Home/About` a comme données de routage `Home` (le contrôleur) et `About` (la méthode d’action à appeler sur le contrôleur Home).</span><span class="sxs-lookup"><span data-stu-id="71a69-216">For example, `https://localhost:5001/Home/About` has route data of `Home` (the controller) and `About` (the action method to call on the home controller).</span></span> <span data-ttu-id="71a69-217">`https://localhost:5001/Movies/Edit/5` est une demande de modification du film avec l’ID 5 à l’aide du contrôleur movie.</span><span class="sxs-lookup"><span data-stu-id="71a69-217">`https://localhost:5001/Movies/Edit/5` is a request to edit the movie with ID=5 using the movie controller.</span></span> <span data-ttu-id="71a69-218">Les données d’itinéraire sont expliquées plus loin dans le didacticiel.</span><span class="sxs-lookup"><span data-stu-id="71a69-218">Route data is explained later in the tutorial.</span></span>

<span data-ttu-id="71a69-219">Le modèle MVC vous permet de créer des applications qui séparent les différents aspects de l’application (logique d’entrée, logique métier et logique de l’interface utilisateur), tout en assurant un couplage faible entre ces éléments.</span><span class="sxs-lookup"><span data-stu-id="71a69-219">The MVC pattern helps you create apps that separate the different aspects of the app (input logic, business logic, and UI logic), while providing a loose coupling between these elements.</span></span> <span data-ttu-id="71a69-220">Le modèle spécifie l’emplacement de chaque type de logique dans l’application.</span><span class="sxs-lookup"><span data-stu-id="71a69-220">The pattern specifies where each kind of logic should be located in the app.</span></span> <span data-ttu-id="71a69-221">La logique de l’interface utilisateur appartient à la vue.</span><span class="sxs-lookup"><span data-stu-id="71a69-221">The UI logic belongs in the view.</span></span> <span data-ttu-id="71a69-222">La logique d’entrée appartient au contrôleur.</span><span class="sxs-lookup"><span data-stu-id="71a69-222">Input logic belongs in the controller.</span></span> <span data-ttu-id="71a69-223">La logique métier appartient au modèle.</span><span class="sxs-lookup"><span data-stu-id="71a69-223">Business logic belongs in the model.</span></span> <span data-ttu-id="71a69-224">Cette séparation vous aide à gérer la complexité quand vous créez une application, car elle vous permet de travailler sur un aspect de l’implémentation à la fois, sans impacter le code d’un autre aspect.</span><span class="sxs-lookup"><span data-stu-id="71a69-224">This separation helps you manage complexity when you build an app, because it enables you to work on one aspect of the implementation at a time without impacting the code of another.</span></span> <span data-ttu-id="71a69-225">Par exemple, vous pouvez travailler sur le code des vues de façon indépendante du code de la logique métier.</span><span class="sxs-lookup"><span data-stu-id="71a69-225">For example, you can work on the view code without depending on the business logic code.</span></span>

<span data-ttu-id="71a69-226">Nous présentons ces concepts dans cette série de didacticiels et nous vous montrons comment les utiliser pour créer une application de gestion de films.</span><span class="sxs-lookup"><span data-stu-id="71a69-226">We cover these concepts in this tutorial series and show you how to use them to build a movie app.</span></span> <span data-ttu-id="71a69-227">Le projet MVC contient des dossiers pour les *contrôleurs* et pour les *vues*.</span><span class="sxs-lookup"><span data-stu-id="71a69-227">The MVC project contains folders for the *Controllers* and *Views*.</span></span>

## <a name="add-a-controller"></a><span data-ttu-id="71a69-228">Ajouter un contrôleur</span><span class="sxs-lookup"><span data-stu-id="71a69-228">Add a controller</span></span>

# <a name="visual-studiotabvisual-studio"></a>[<span data-ttu-id="71a69-229">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="71a69-229">Visual Studio</span></span>](#tab/visual-studio)

* <span data-ttu-id="71a69-230">Dans **l’Explorateur de solutions**, cliquez avec le bouton droit sur le ![menu contextuel](adding-controller/_static/add_controller.png) **Contrôleurs > Ajouter > Contrôleur**
  </span><span class="sxs-lookup"><span data-stu-id="71a69-230">In **Solution Explorer**, right-click **Controllers > Add > Controller**
![Contextual menu](adding-controller/_static/add_controller.png)</span></span>

* <span data-ttu-id="71a69-231">Dans la boîte de dialogue **Ajouter un modèle automatique**, sélectionnez **Contrôleur MVC - vide**</span><span class="sxs-lookup"><span data-stu-id="71a69-231">In the **Add Scaffold** dialog box, select **MVC Controller - Empty**</span></span>

  ![Ajoutez un contrôleur MVC et nommez-le](adding-controller/_static/ac.png)

* <span data-ttu-id="71a69-233">Dans la **boîte de dialogue Ajouter un contrôleur MVC vide**, entrez **HelloWorldController** et sélectionnez **AJOUTER**.</span><span class="sxs-lookup"><span data-stu-id="71a69-233">In the **Add Empty MVC Controller dialog**, enter **HelloWorldController** and select **ADD**.</span></span>

# <a name="visual-studio-codetabvisual-studio-code"></a>[<span data-ttu-id="71a69-234">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="71a69-234">Visual Studio Code</span></span>](#tab/visual-studio-code)

<span data-ttu-id="71a69-235">Sélectionnez l’icône **EXPLORATEUR** et cliquez en maintenant enfoncée la touche Ctrl (ou cliquez avec le bouton droit) sur **Contrôleurs > Nouveau fichier** et nommez le nouveau fichier *HelloWorldController.cs*.</span><span class="sxs-lookup"><span data-stu-id="71a69-235">Select the **EXPLORER** icon and then control-click (right-click) **Controllers > New File** and name the new file *HelloWorldController.cs*.</span></span>

  ![Menu contextuel](~/tutorials/first-mvc-app-xplat/adding-controller/_static/new_file.png)

# <a name="visual-studio-for-mactabvisual-studio-mac"></a>[<span data-ttu-id="71a69-237">Visual Studio pour Mac</span><span class="sxs-lookup"><span data-stu-id="71a69-237">Visual Studio for Mac</span></span>](#tab/visual-studio-mac)

<span data-ttu-id="71a69-238">Dans **l’Explorateur de solutions**, cliquez avec le bouton droit sur **Contrôleurs > Ajouter > Nouveau fichier**.</span><span class="sxs-lookup"><span data-stu-id="71a69-238">In **Solution Explorer**, right-click **Controllers > Add > New File**.</span></span>
<span data-ttu-id="71a69-239">![Menu contextuel](~/tutorials/first-mvc-app-mac/adding-controller/_static/add_controller.png)</span><span class="sxs-lookup"><span data-stu-id="71a69-239">![Contextual menu](~/tutorials/first-mvc-app-mac/adding-controller/_static/add_controller.png)</span></span>

<span data-ttu-id="71a69-240">Sélectionnez **ASP.NET Core** et **Classe de contrôleur MVC**.</span><span class="sxs-lookup"><span data-stu-id="71a69-240">Select **ASP.NET Core** and **MVC Controller Class**.</span></span>

<span data-ttu-id="71a69-241">Nommez le contrôleur **HelloWorldController**.</span><span class="sxs-lookup"><span data-stu-id="71a69-241">Name the controller **HelloWorldController**.</span></span>

![Ajoutez un contrôleur MVC et nommez-le](~/tutorials/first-mvc-app-mac/adding-controller/_static/ac.png)

---

<span data-ttu-id="71a69-243">Remplacez le contenu de *Controllers/HelloWorldController.cs* par ceci :</span><span class="sxs-lookup"><span data-stu-id="71a69-243">Replace the contents of *Controllers/HelloWorldController.cs* with the following:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]

<span data-ttu-id="71a69-244">Chaque méthode `public` d’un contrôleur peut être appelée en tant que point de terminaison HTTP.</span><span class="sxs-lookup"><span data-stu-id="71a69-244">Every `public` method in a controller is callable as an HTTP endpoint.</span></span> <span data-ttu-id="71a69-245">Dans l’exemple ci-dessus, les deux méthodes retournent une chaîne.</span><span class="sxs-lookup"><span data-stu-id="71a69-245">In the sample above, both methods return a string.</span></span> <span data-ttu-id="71a69-246">Notez les commentaires qui précèdent chaque méthode.</span><span class="sxs-lookup"><span data-stu-id="71a69-246">Note the comments preceding each method.</span></span>

<span data-ttu-id="71a69-247">Un point de terminaison HTTP est une URL qui peut être ciblée dans l’application web, comme `https://localhost:5001/HelloWorld`, et qui combine le protocole utilisé : `HTTPS`, l’emplacement réseau du serveur web (avec le port TCP) : `localhost:5001` et l’URI cible `HelloWorld`.</span><span class="sxs-lookup"><span data-stu-id="71a69-247">An HTTP endpoint is a targetable URL in the web application, such as `https://localhost:5001/HelloWorld`, and combines the protocol used: `HTTPS`, the network location of the web server (including the TCP port): `localhost:5001` and the target URI `HelloWorld`.</span></span>

<span data-ttu-id="71a69-248">Le premier commentaire indique qu’il s’agit d’une méthode [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) qui est appelée en ajoutant `/HelloWorld/` à l’URL de base.</span><span class="sxs-lookup"><span data-stu-id="71a69-248">The first comment states this is an [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) method that's invoked by appending `/HelloWorld/` to the base URL.</span></span> <span data-ttu-id="71a69-249">Le deuxième commentaire indique une méthode [HTTP GET](https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) qui est appelée en ajoutant `/HelloWorld/Welcome/` à l’URL.</span><span class="sxs-lookup"><span data-stu-id="71a69-249">The second comment specifies an [HTTP GET](https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) method that's invoked by appending `/HelloWorld/Welcome/` to the URL.</span></span> <span data-ttu-id="71a69-250">Plus loin dans ce didacticiel, le moteur de génération de modèles automatique est utilisé pour générer des méthodes `HTTP POST` qui mettent à jour des données.</span><span class="sxs-lookup"><span data-stu-id="71a69-250">Later on in the tutorial the scaffolding engine is used to generate `HTTP POST` methods which update data.</span></span>

<span data-ttu-id="71a69-251">Exécutez l’application en mode de non-débogage et ajoutez « HelloWorld » au chemin dans la barre d’adresse.</span><span class="sxs-lookup"><span data-stu-id="71a69-251">Run the app in non-debug mode and append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="71a69-252">La méthode `Index` retourne une chaîne.</span><span class="sxs-lookup"><span data-stu-id="71a69-252">The `Index` method returns a string.</span></span>

![Fenêtre de navigateur montrant une réponse de l’application à l’action This is my default](~/tutorials/first-mvc-app/adding-controller/_static/hell1.png)

<span data-ttu-id="71a69-254">MVC appelle les classes du contrôleur (et les méthodes d’action au sein de celles-ci) en fonction de l’URL entrante.</span><span class="sxs-lookup"><span data-stu-id="71a69-254">MVC invokes controller classes (and the action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="71a69-255">La [logique de routage d’URL](xref:mvc/controllers/routing) par défaut utilisée par le modèle MVC utilise un format comme celui-ci pour déterminer le code à appeler :</span><span class="sxs-lookup"><span data-stu-id="71a69-255">The default [URL routing logic](xref:mvc/controllers/routing) used by MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="71a69-256">Le format de routage est défini dans la méthode `Configure` du fichier *Startup.cs*.</span><span class="sxs-lookup"><span data-stu-id="71a69-256">The routing format is set in the `Configure` method in *Startup.cs* file.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<!-- 
Add link to explain lambda.
Remove link for simplified tutorial.
-->

<span data-ttu-id="71a69-257">Quand vous naviguez jusqu’à l’application et que vous ne fournissez aucun segment d’URL, sa valeur par défaut est le contrôleur « Home » et la méthode « Index » spécifiée dans la ligne du modèle mise en surbrillance ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="71a69-257">When you browse to the app and don't supply any URL segments, it defaults to the "Home" controller and the "Index" method specified in the template line highlighted above.</span></span>

<span data-ttu-id="71a69-258">Le premier segment d’URL détermine la classe du contrôleur à exécuter.</span><span class="sxs-lookup"><span data-stu-id="71a69-258">The first URL segment determines the controller class to run.</span></span> <span data-ttu-id="71a69-259">Ainsi, `localhost:{PORT}/HelloWorld` est mappé à la classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="71a69-259">So `localhost:{PORT}/HelloWorld` maps to the `HelloWorldController` class.</span></span> <span data-ttu-id="71a69-260">La seconde partie du segment d’URL détermine la méthode d’action sur la classe.</span><span class="sxs-lookup"><span data-stu-id="71a69-260">The second part of the URL segment determines the action method on the class.</span></span> <span data-ttu-id="71a69-261">Ainsi, `localhost:{PORT}/HelloWorld/Index` provoque l’exécution de la méthode `Index` de la classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="71a69-261">So `localhost:{PORT}/HelloWorld/Index` would cause the `Index` method of the `HelloWorldController` class to run.</span></span> <span data-ttu-id="71a69-262">Notez que vous n’avez eu qu’à accéder à `localhost:{PORT}/HelloWorld` pour que la méthode `Index` soit appelée par défaut.</span><span class="sxs-lookup"><span data-stu-id="71a69-262">Notice that you only had to browse to `localhost:{PORT}/HelloWorld` and the `Index` method was called by default.</span></span> <span data-ttu-id="71a69-263">La raison en est que `Index` est la méthode par défaut qui est appelée sur un contrôleur si un nom de méthode n’est pas explicitement spécifié.</span><span class="sxs-lookup"><span data-stu-id="71a69-263">This is because `Index` is the default method that will be called on a controller if a method name isn't explicitly specified.</span></span> <span data-ttu-id="71a69-264">La troisième partie du segment d’URL (`id`) concerne les données de routage.</span><span class="sxs-lookup"><span data-stu-id="71a69-264">The third part of the URL segment ( `id`) is for route data.</span></span> <span data-ttu-id="71a69-265">Les données d’itinéraire sont expliquées plus loin dans le didacticiel.</span><span class="sxs-lookup"><span data-stu-id="71a69-265">Route data is explained later in the tutorial.</span></span>

<span data-ttu-id="71a69-266">Accédez à `https://localhost:{PORT}/HelloWorld/Welcome`.</span><span class="sxs-lookup"><span data-stu-id="71a69-266">Browse to `https://localhost:{PORT}/HelloWorld/Welcome`.</span></span> <span data-ttu-id="71a69-267">La méthode `Welcome` s’exécute et retourne la chaîne `This is the Welcome action method...`.</span><span class="sxs-lookup"><span data-stu-id="71a69-267">The `Welcome` method runs and returns the string `This is the Welcome action method...`.</span></span> <span data-ttu-id="71a69-268">Pour cette URL, le contrôleur est `HelloWorld`, et `Welcome` est la méthode d’action.</span><span class="sxs-lookup"><span data-stu-id="71a69-268">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="71a69-269">Vous n’avez pas encore utilisé la partie `[Parameters]` de l’URL.</span><span class="sxs-lookup"><span data-stu-id="71a69-269">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![Fenêtre de navigateur montrant une réponse de la méthode d’action « This is the Welcome action »](~/tutorials/first-mvc-app/adding-controller/_static/welcome.png)

<span data-ttu-id="71a69-271">Modifiez le code pour passer des informations sur les paramètres de l’URL au contrôleur.</span><span class="sxs-lookup"><span data-stu-id="71a69-271">Modify the code to pass some parameter information from the URL to the controller.</span></span> <span data-ttu-id="71a69-272">Par exemple, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span><span class="sxs-lookup"><span data-stu-id="71a69-272">For example, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span></span> <span data-ttu-id="71a69-273">Modifiez la méthode `Welcome` en y incluant les deux paramètres, comme indiqué dans le code suivant.</span><span class="sxs-lookup"><span data-stu-id="71a69-273">Change the `Welcome` method to include two parameters as shown in the following code.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]

<span data-ttu-id="71a69-274">Le code précédent :</span><span class="sxs-lookup"><span data-stu-id="71a69-274">The preceding code:</span></span>

* <span data-ttu-id="71a69-275">Utilise la fonctionnalité de paramètre facultatif de C# pour indiquer que le paramètre `numTimes` a 1 comme valeur par défaut si aucune valeur n’est passée pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="71a69-275">Uses the C# optional-parameter feature to indicate that the `numTimes` parameter defaults to 1 if no value is passed for that parameter.</span></span> <!-- remove for simplified -->
* <span data-ttu-id="71a69-276">Utilise `HtmlEncoder.Default.Encode` pour protéger l’application des entrées malveillantes (notamment en JavaScript).</span><span class="sxs-lookup"><span data-stu-id="71a69-276">Uses `HtmlEncoder.Default.Encode` to protect the app from malicious input (namely JavaScript).</span></span>
* <span data-ttu-id="71a69-277">Utilise des [chaînes interpolées](/dotnet/articles/csharp/language-reference/keywords/interpolated-strings) dans `$"Hello {name}, NumTimes is: {numTimes}"`.</span><span class="sxs-lookup"><span data-stu-id="71a69-277">Uses [Interpolated Strings](/dotnet/articles/csharp/language-reference/keywords/interpolated-strings) in `$"Hello {name}, NumTimes is: {numTimes}"`.</span></span> <!-- remove for simplified -->

<span data-ttu-id="71a69-278">Exécutez l’application et accédez à :</span><span class="sxs-lookup"><span data-stu-id="71a69-278">Run the app and browse to:</span></span>

   `https://localhost:{PORT}/HelloWorld/Welcome?name=Rick&numtimes=4`

<span data-ttu-id="71a69-279">(Remplacez `{PORT}` par votre numéro de port.) Vous pouvez essayer différentes valeurs pour `name` et `numtimes` dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="71a69-279">(Replace `{PORT}` with your port number.) You can try different values for `name` and `numtimes` in the URL.</span></span> <span data-ttu-id="71a69-280">Le système de [liaison de données](xref:mvc/models/model-binding) du modèle MVC mappe automatiquement les paramètres nommés provenant de la chaîne de requête dans la barre d’adresse aux paramètres de votre méthode.</span><span class="sxs-lookup"><span data-stu-id="71a69-280">The MVC [model binding](xref:mvc/models/model-binding) system automatically maps the named parameters from the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="71a69-281">Pour plus d’informations, consultez [Liaison de données](xref:mvc/models/model-binding).</span><span class="sxs-lookup"><span data-stu-id="71a69-281">See [Model Binding](xref:mvc/models/model-binding) for more information.</span></span>

![Fenêtre de navigateur montrant une réponse de l’application « Hello Rick, NumTimes is: 4](~/tutorials/first-mvc-app/adding-controller/_static/rick4.png)

<span data-ttu-id="71a69-283">Dans l’image ci-dessus, le segment d’URL (`Parameters`) n’est pas utilisé, les paramètres `name` et `numTimes` sont passés en tant que [chaînes de requête](https://wikipedia.org/wiki/Query_string).</span><span class="sxs-lookup"><span data-stu-id="71a69-283">In the image above, the URL segment (`Parameters`) isn't used, the `name` and `numTimes` parameters are passed as [query strings](https://wikipedia.org/wiki/Query_string).</span></span> <span data-ttu-id="71a69-284">Le `?` (point d’interrogation) dans l’URL ci-dessus est un séparateur, qui est suivi des chaînes de requête.</span><span class="sxs-lookup"><span data-stu-id="71a69-284">The `?` (question mark) in the above URL is a separator, and the query strings follow.</span></span> <span data-ttu-id="71a69-285">Le caractère `&` sépare les chaînes de requête.</span><span class="sxs-lookup"><span data-stu-id="71a69-285">The `&` character separates query strings.</span></span>

<span data-ttu-id="71a69-286">Remplacez la méthode `Welcome` par le code suivant :</span><span class="sxs-lookup"><span data-stu-id="71a69-286">Replace the `Welcome` method with the following code:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]

<span data-ttu-id="71a69-287">Exécutez l’application et entrez l’URL suivante : `https://localhost:{PORT}/HelloWorld/Welcome/3?name=Rick`</span><span class="sxs-lookup"><span data-stu-id="71a69-287">Run the app and enter the following URL: `https://localhost:{PORT}/HelloWorld/Welcome/3?name=Rick`</span></span>

<span data-ttu-id="71a69-288">Cette fois, le troisième segment de l’URL correspondait au paramètre de routage `id`.</span><span class="sxs-lookup"><span data-stu-id="71a69-288">This time the third URL segment matched the route parameter `id`.</span></span> <span data-ttu-id="71a69-289">La méthode `Welcome` contient un paramètre `id` qui correspondait au modèle d’URL de la méthode `MapRoute`.</span><span class="sxs-lookup"><span data-stu-id="71a69-289">The `Welcome` method contains a parameter `id` that matched the URL template in the `MapRoute` method.</span></span> <span data-ttu-id="71a69-290">Le `?` de fin (dans `id?`) indique que le paramètre `id` est facultatif.</span><span class="sxs-lookup"><span data-stu-id="71a69-290">The trailing `?` (in `id?`) indicates the `id` parameter is optional.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="71a69-291">Dans ces exemples, le contrôleur a fait la partie « VC » du modèle MVC, autrement dit, la vue et le contrôleur fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="71a69-291">In these examples the controller has been doing the "VC" portion of MVC - that is, the view and controller work.</span></span> <span data-ttu-id="71a69-292">Le contrôleur retourne directement du HTML.</span><span class="sxs-lookup"><span data-stu-id="71a69-292">The controller is returning HTML directly.</span></span> <span data-ttu-id="71a69-293">En règle générale, vous ne souhaitez pas que les contrôleurs retournent directement du HTML, car le codage et la maintenance deviennent dans ce cas très laborieux.</span><span class="sxs-lookup"><span data-stu-id="71a69-293">Generally you don't want controllers returning HTML directly, since that becomes very cumbersome to code and maintain.</span></span> <span data-ttu-id="71a69-294">Au lieu de cela, vous utilisez généralement un fichier de modèle de vue Razor distinct pour faciliter la génération de la réponse HTML.</span><span class="sxs-lookup"><span data-stu-id="71a69-294">Instead you typically use a separate Razor view template file to help generate the HTML response.</span></span> <span data-ttu-id="71a69-295">Vous faites cela dans le didacticiel suivant.</span><span class="sxs-lookup"><span data-stu-id="71a69-295">You do that in the next tutorial.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="71a69-296">[Précédent](start-mvc.md)
> [Suivant](adding-view.md)</span><span class="sxs-lookup"><span data-stu-id="71a69-296">[Previous](start-mvc.md)
[Next](adding-view.md)</span></span>

::: moniker-end
