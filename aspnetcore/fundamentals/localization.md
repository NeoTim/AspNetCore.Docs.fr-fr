---
<span data-ttu-id="aa60f-101">titre : globalisation et localisation dans ASP.NET Core auteur : description de Rick-Anderson : Découvrez comment ASP.NET Core fournit des services et des intergiciels (middleware) pour la localisation de contenu dans différents langages et cultures.</span><span class="sxs-lookup"><span data-stu-id="aa60f-101">title: Globalization and localization in ASP.NET Core author: rick-anderson description: Learn how ASP.NET Core provides services and middleware for localizing content into different languages and cultures.</span></span>
<span data-ttu-id="aa60f-102">ms. Author : Riande ms. Date : 11/30/2019 No-Loc :</span><span class="sxs-lookup"><span data-stu-id="aa60f-102">ms.author: riande ms.date: 11/30/2019 no-loc:</span></span>
- <span data-ttu-id="aa60f-103">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="aa60f-103">'Blazor'</span></span>
- <span data-ttu-id="aa60f-104">'Identity'</span><span class="sxs-lookup"><span data-stu-id="aa60f-104">'Identity'</span></span>
- <span data-ttu-id="aa60f-105">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="aa60f-105">'Let's Encrypt'</span></span>
- <span data-ttu-id="aa60f-106">'Razor'</span><span class="sxs-lookup"><span data-stu-id="aa60f-106">'Razor'</span></span>
- <span data-ttu-id="aa60f-107">« SignalR UID : notions de base/localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-107">'SignalR' uid: fundamentals/localization</span></span>

---
# <a name="globalization-and-localization-in-aspnet-core"></a><span data-ttu-id="aa60f-108">Globalisation et localisation dans ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="aa60f-108">Globalization and localization in ASP.NET Core</span></span>

::: moniker range=">= aspnetcore-3.0 < aspnetcore-5.0"

<span data-ttu-id="aa60f-109">Par [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/) et [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span><span class="sxs-lookup"><span data-stu-id="aa60f-109">By [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/), and [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span></span>

<span data-ttu-id="aa60f-110">Un site Web multilingue permet au site d’atteindre un public plus vaste.</span><span class="sxs-lookup"><span data-stu-id="aa60f-110">A multilingual website allows the site to reach a wider audience.</span></span> <span data-ttu-id="aa60f-111">ASP.NET Core offre des services et des intergiciels (middleware) de traduction dans différentes langues et cultures.</span><span class="sxs-lookup"><span data-stu-id="aa60f-111">ASP.NET Core provides services and middleware for localizing into different languages and cultures.</span></span>

<span data-ttu-id="aa60f-112">L’internationalisation implique la [globalisation](/dotnet/api/system.globalization) et la [localisation](/dotnet/standard/globalization-localization/localization).</span><span class="sxs-lookup"><span data-stu-id="aa60f-112">Internationalization involves [Globalization](/dotnet/api/system.globalization) and [Localization](/dotnet/standard/globalization-localization/localization).</span></span> <span data-ttu-id="aa60f-113">La globalisation est le processus de conception d’applications qui prennent en charge des cultures différentes.</span><span class="sxs-lookup"><span data-stu-id="aa60f-113">Globalization is the process of designing apps that support different cultures.</span></span> <span data-ttu-id="aa60f-114">La globalisation ajoute la prise en charge de l’entrée, de l’affichage et de la sortie d’un ensemble défini de jeux de caractères liés à des zones géographiques spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-114">Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</span></span>

<span data-ttu-id="aa60f-115">La localisation est le processus d’adaptation d’une application globalisée, dont vous avez déjà traitée l’adaptabilité, à une culture/des paramètres régionaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-115">Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.</span></span> <span data-ttu-id="aa60f-116">Pour plus d’informations, consultez **Terminologie de la globalisation et de la localisation** à la fin du présent document.</span><span class="sxs-lookup"><span data-stu-id="aa60f-116">For more information see **Globalization and localization terms** near the end of this document.</span></span>

<span data-ttu-id="aa60f-117">La localisation d’une application implique les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-117">App localization involves the following:</span></span>

1. <span data-ttu-id="aa60f-118">Rendre le contenu de l’application localisable</span><span class="sxs-lookup"><span data-stu-id="aa60f-118">Make the app's content localizable</span></span>
1. <span data-ttu-id="aa60f-119">Fournir des ressources localisées aux langues et cultures prises en charge</span><span class="sxs-lookup"><span data-stu-id="aa60f-119">Provide localized resources for the languages and cultures you support</span></span>
1. <span data-ttu-id="aa60f-120">Implémenter une stratégie de sélection de la langue/culture pour chaque requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-120">Implement a strategy to select the language/culture for each request</span></span>

<span data-ttu-id="aa60f-121">[Afficher ou télécharger l’exemple de code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([procédure de téléchargement](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="aa60f-121">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="make-the-apps-content-localizable"></a><span data-ttu-id="aa60f-122">Rendre le contenu de l’application localisable</span><span class="sxs-lookup"><span data-stu-id="aa60f-122">Make the app's content localizable</span></span>

<span data-ttu-id="aa60f-123"><xref:Microsoft.Extensions.Localization.IStringLocalizer>et <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> ont été conçus pour améliorer la productivité lors du développement d’applications localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-123"><xref:Microsoft.Extensions.Localization.IStringLocalizer> and <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> were architected to improve productivity when developing localized apps.</span></span> <span data-ttu-id="aa60f-124">`IStringLocalizer`utilise <xref:System.Resources.ResourceManager> et <xref:System.Resources.ResourceReader> pour fournir des ressources spécifiques à la culture au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="aa60f-124">`IStringLocalizer` uses the <xref:System.Resources.ResourceManager> and <xref:System.Resources.ResourceReader> to provide culture-specific resources at run time.</span></span> <span data-ttu-id="aa60f-125">L’interface possède un indexeur et un `IEnumerable` pour retourner des chaînes localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-125">The interface has an indexer and an `IEnumerable` for returning localized strings.</span></span> <span data-ttu-id="aa60f-126">`IStringLocalizer`ne nécessite pas le stockage des chaînes de langue par défaut dans un fichier de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-126">`IStringLocalizer` doesn't require storing the default language strings in a resource file.</span></span> <span data-ttu-id="aa60f-127">Vous pouvez développer une application ciblée pour la localisation sans avoir besoin de créer des fichiers de ressources au tout début du développement.</span><span class="sxs-lookup"><span data-stu-id="aa60f-127">You can develop an app targeted for localization and not need to create resource files early in development.</span></span> <span data-ttu-id="aa60f-128">Le code ci-dessous montre comment inclure dans un wrapper la chaîne « About Title » à des fins de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-128">The code below shows how to wrap the string "About Title" for localization.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/AboutController.cs)]

<span data-ttu-id="aa60f-129">Dans le code précédent, l' `IStringLocalizer<T>` implémentation provient de l' [injection de dépendances](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="aa60f-129">In the preceding code, the `IStringLocalizer<T>` implementation comes from [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="aa60f-130">Si la valeur localisée de « About Title » est introuvable, alors la clé de l’indexeur est retournée, autrement dit, la chaîne « About Title ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-130">If the localized value of "About Title" isn't found, then the indexer key is returned, that is, the string "About Title".</span></span> <span data-ttu-id="aa60f-131">Vous pouvez laisser les chaînes littérales de la langue par défaut dans l’application et les inclure dans un wrapper dans le localisateur, afin de pouvoir vous concentrer sur le développement de l’application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-131">You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app.</span></span> <span data-ttu-id="aa60f-132">Vous développez votre application avec votre langue par défaut et vous la préparez à l’étape de localisation sans créer au préalable un fichier de ressources par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-132">You develop your app with your default language and prepare it for the localization step without first creating a default resource file.</span></span> <span data-ttu-id="aa60f-133">Vous pouvez également utiliser l’approche traditionnelle et fournir une clé pour récupérer la chaîne de la langue par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-133">Alternatively, you can use the traditional approach and provide a key to retrieve the default language string.</span></span> <span data-ttu-id="aa60f-134">Pour de nombreux développeurs, le nouveau workflow qui n’inclut pas de fichier *.resx* de langue par défaut et qui consiste à simplement inclure dans un wrapper les littéraux de chaîne permet de réduire la surcharge de la localisation d’une application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-134">For many developers the new workflow of not having a default language *.resx* file and simply wrapping the string literals can reduce the overhead of localizing an app.</span></span> <span data-ttu-id="aa60f-135">D’autres développeurs préfèrent le workflow traditionnel, car il facilite l’utilisation de longs littéraux de chaîne ainsi que la mise à jour des chaînes localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-135">Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</span></span>

<span data-ttu-id="aa60f-136">Utilisez l’implémentation de `IHtmlLocalizer<T>` pour les ressources qui contiennent du HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-136">Use the `IHtmlLocalizer<T>` implementation for resources that contain HTML.</span></span> <span data-ttu-id="aa60f-137">`IHtmlLocalizer` encode en HTML les arguments formatés dans la chaîne de ressource, mais pas la chaîne de ressource elle-même.</span><span class="sxs-lookup"><span data-stu-id="aa60f-137">`IHtmlLocalizer` HTML encodes arguments that are formatted in the resource string, but doesn't HTML encode the resource string itself.</span></span> <span data-ttu-id="aa60f-138">Dans l’exemple mis en surbrillance ci-dessous, seule la valeur du paramètre `name` est encodé en HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-138">In the sample highlighted below, only the value of `name` parameter is HTML encoded.</span></span>

[!code-csharp[](../fundamentals/localization/sample/Localization/Controllers/BookController.cs?highlight=3,5,20&start=1&end=24)]

<span data-ttu-id="aa60f-139">**Remarque :** Vous avez généralement besoin de localiser uniquement le texte et pas le code HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-139">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="aa60f-140">Au niveau le plus bas, vous pouvez sortir `IStringLocalizerFactory` de l’[injection de dépendances](dependency-injection.md) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-140">At the lowest level, you can get `IStringLocalizerFactory` out of [Dependency Injection](dependency-injection.md):</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/TestController.cs?start=9&end=26&highlight=7-13)]

<span data-ttu-id="aa60f-141">Le code ci-dessus illustre chacune des deux méthodes de création.</span><span class="sxs-lookup"><span data-stu-id="aa60f-141">The code above demonstrates each of the two factory create methods.</span></span>

<span data-ttu-id="aa60f-142">Vous pouvez partitionner vos chaînes localisées par contrôleur, par zone ou avoir un seul conteneur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-142">You can partition your localized strings by controller, area, or have just one container.</span></span> <span data-ttu-id="aa60f-143">Dans l’exemple d’application, une classe fictive nommée `SharedResource` est utilisée pour les ressources partagées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-143">In the sample app, a dummy class named `SharedResource` is used for shared resources.</span></span>

[!code-csharp[](localization/sample/Localization/Resources/SharedResource.cs)]

<span data-ttu-id="aa60f-144">Certains développeurs utilisent la classe `Startup` pour contenir des chaînes globales ou partagées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-144">Some developers use the `Startup` class to contain global or shared strings.</span></span> <span data-ttu-id="aa60f-145">Dans l’exemple ci-dessous, les localiseurs `InfoController` et `SharedResource` sont utilisés :</span><span class="sxs-lookup"><span data-stu-id="aa60f-145">In the sample below, the `InfoController` and the `SharedResource` localizers are used:</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/InfoController.cs?range=9-26)]

## <a name="view-localization"></a><span data-ttu-id="aa60f-146">Localisation de l’affichage</span><span class="sxs-lookup"><span data-stu-id="aa60f-146">View localization</span></span>

<span data-ttu-id="aa60f-147">Le service `IViewLocalizer` fournit des chaînes localisées à une [vue](xref:mvc/views/overview).</span><span class="sxs-lookup"><span data-stu-id="aa60f-147">The `IViewLocalizer` service provides localized strings for a [view](xref:mvc/views/overview).</span></span> <span data-ttu-id="aa60f-148">La classe `ViewLocalizer` implémente cette interface et recherche l’emplacement de la ressource à partir du chemin du fichier de la vue.</span><span class="sxs-lookup"><span data-stu-id="aa60f-148">The `ViewLocalizer` class implements this interface and finds the resource location from the view file path.</span></span> <span data-ttu-id="aa60f-149">Le code suivant montre comment utiliser l’implémentation par défaut de `IViewLocalizer` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-149">The following code shows how to use the default implementation of `IViewLocalizer`:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Home/About.cshtml)]

<span data-ttu-id="aa60f-150">L’implémentation par défaut de `IViewLocalizer` recherche le fichier de ressources en fonction du nom de fichier de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-150">The default implementation of `IViewLocalizer` finds the resource file based on the view's file name.</span></span> <span data-ttu-id="aa60f-151">Il n’existe aucune option pour utiliser un fichier de ressources partagées globales.</span><span class="sxs-lookup"><span data-stu-id="aa60f-151">There's no option to use a global shared resource file.</span></span> <span data-ttu-id="aa60f-152">`ViewLocalizer`implémente le localisateur à l’aide `IHtmlLocalizer` de, donc Razor n’encode pas le code HTML de la chaîne localisée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-152">`ViewLocalizer` implements the localizer using `IHtmlLocalizer`, so Razor doesn't HTML encode the localized string.</span></span> <span data-ttu-id="aa60f-153">Vous pouvez paramétrer des chaînes de ressources pour que `IViewLocalizer` encode en HTML les paramètres, mais pas les chaînes de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-153">You can parameterize resource strings and `IViewLocalizer` will HTML encode the parameters, but not the resource string.</span></span> <span data-ttu-id="aa60f-154">Examinez le Razor balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="aa60f-154">Consider the following Razor markup:</span></span>

```cshtml
@Localizer["<i>Hello</i> <b>{0}!</b>", UserManager.GetUserName(User)]
```

<span data-ttu-id="aa60f-155">Un fichier de ressources en français peut contenir ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="aa60f-155">A French resource file could contain the following:</span></span>

| <span data-ttu-id="aa60f-156">Clé</span><span class="sxs-lookup"><span data-stu-id="aa60f-156">Key</span></span> | <span data-ttu-id="aa60f-157">Valeur</span><span class="sxs-lookup"><span data-stu-id="aa60f-157">Value</span></span> |
| ----- | ------ |
| `<i>Hello</i> <b>{0}!</b>` | `<i>Bonjour</i> <b>{0} !</b>` |

<span data-ttu-id="aa60f-158">L’affichage contient le balisage HTML provenant du fichier de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-158">The rendered view would contain the HTML markup from the resource file.</span></span>

<span data-ttu-id="aa60f-159">**Remarque :** Vous avez généralement besoin de localiser uniquement le texte et pas le code HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-159">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="aa60f-160">Pour utiliser un fichier de ressources partagées dans un affichage, injectez `IHtmlLocalizer<T>` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-160">To use a shared resource file in a view, inject `IHtmlLocalizer<T>`:</span></span>

[!code-cshtml[](../fundamentals/localization/sample/Localization/Views/Test/About.cshtml?highlight=5,12)]

## <a name="dataannotations-localization"></a><span data-ttu-id="aa60f-161">Localisation de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="aa60f-161">DataAnnotations localization</span></span>

<span data-ttu-id="aa60f-162">Les messages d’erreur DataAnnotations sont localisés avec `IStringLocalizer<T>`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-162">DataAnnotations error messages are localized with `IStringLocalizer<T>`.</span></span> <span data-ttu-id="aa60f-163">En utilisant l’option `ResourcesPath = "Resources"`, les messages d’erreur inclus dans `RegisterViewModel` peuvent être stockés dans les chemins suivants :</span><span class="sxs-lookup"><span data-stu-id="aa60f-163">Using the option `ResourcesPath = "Resources"`, the error messages in `RegisterViewModel` can be stored in either of the following paths:</span></span>

* <span data-ttu-id="aa60f-164">*Ressources/ViewModels. Account. RegisterViewModel. fr. resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-164">*Resources/ViewModels.Account.RegisterViewModel.fr.resx*</span></span>
* <span data-ttu-id="aa60f-165">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-165">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span></span>

[!code-csharp[](localization/sample/Localization/ViewModels/Account/RegisterViewModel.cs?start=9&end=26)]

<span data-ttu-id="aa60f-166">Dans ASP.NET Core MVC 1.1.0 et version supérieure, les attributs de non-validation sont localisés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-166">In ASP.NET Core MVC 1.1.0 and higher, non-validation attributes are localized.</span></span> <span data-ttu-id="aa60f-167">ASP.NET Core MVC 1.0 ne recherche **pas** de chaînes localisées pour des attributs de non-validation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-167">ASP.NET Core MVC 1.0 does **not** look up localized strings for non-validation attributes.</span></span>

<a name="one-resource-string-multiple-classes"></a>

### <a name="using-one-resource-string-for-multiple-classes"></a><span data-ttu-id="aa60f-168">Utilisation d’une seule chaîne de ressource pour plusieurs classes</span><span class="sxs-lookup"><span data-stu-id="aa60f-168">Using one resource string for multiple classes</span></span>

<span data-ttu-id="aa60f-169">Le code suivant montre comment utiliser une seule chaîne de ressource pour les attributs de validation avec plusieurs classes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-169">The following code shows how to use one resource string for validation attributes with multiple classes:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddDataAnnotationsLocalization(options => {
            options.DataAnnotationLocalizerProvider = (type, factory) =>
                factory.Create(typeof(SharedResource));
        });
}
```

<span data-ttu-id="aa60f-170">Dans le code précédent, `SharedResource` est la classe correspondant au resx où sont stockés vos messages de validation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-170">In the preceding code, `SharedResource` is the class corresponding to the resx where your validation messages are stored.</span></span> <span data-ttu-id="aa60f-171">Cette approche permet à DataAnnotations d’utiliser uniquement `SharedResource`, au lieu de la ressource de chaque classe.</span><span class="sxs-lookup"><span data-stu-id="aa60f-171">With this approach, DataAnnotations will only use `SharedResource`, rather than the resource for each class.</span></span>

## <a name="provide-localized-resources-for-the-languages-and-cultures-you-support"></a><span data-ttu-id="aa60f-172">Fournir des ressources localisées aux langues et cultures prises en charge</span><span class="sxs-lookup"><span data-stu-id="aa60f-172">Provide localized resources for the languages and cultures you support</span></span>

### <a name="supportedcultures-and-supporteduicultures"></a><span data-ttu-id="aa60f-173">SupportedCultures et SupportedUICultures</span><span class="sxs-lookup"><span data-stu-id="aa60f-173">SupportedCultures and SupportedUICultures</span></span>

<span data-ttu-id="aa60f-174">ASP.NET Core vous permet de spécifier deux valeurs de culture, `SupportedCultures` et `SupportedUICultures`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-174">ASP.NET Core allows you to specify two culture values, `SupportedCultures` and `SupportedUICultures`.</span></span> <span data-ttu-id="aa60f-175">L’objet [CultureInfo](/dotnet/api/system.globalization.cultureinfo) de `SupportedCultures` détermine les résultats des fonctions qui dépendent de la culture, comme la mise en forme des dates, de l’heure, des nombres et des devises.</span><span class="sxs-lookup"><span data-stu-id="aa60f-175">The [CultureInfo](/dotnet/api/system.globalization.cultureinfo) object for `SupportedCultures` determines the results of culture-dependent functions, such as date, time, number, and currency formatting.</span></span> <span data-ttu-id="aa60f-176">`SupportedCultures` détermine également l’ordre de tri du texte, les conventions de casse et les comparaisons de chaînes.</span><span class="sxs-lookup"><span data-stu-id="aa60f-176">`SupportedCultures` also determines the sorting order of text, casing conventions, and string comparisons.</span></span> <span data-ttu-id="aa60f-177">Consultez [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) pour plus d’informations sur la façon dont le serveur obtient la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-177">See [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) for more info on how the server gets the Culture.</span></span> <span data-ttu-id="aa60f-178">Le `SupportedUICultures` détermine les chaînes traduites (à partir des fichiers *. resx* ) qui sont recherchées par le [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span><span class="sxs-lookup"><span data-stu-id="aa60f-178">The `SupportedUICultures` determines which translated strings (from *.resx* files) are looked up by the [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span></span> <span data-ttu-id="aa60f-179">`ResourceManager` recherche simplement les chaînes propres à la culture déterminée par `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-179">The `ResourceManager` simply looks up culture-specific strings that's determined by `CurrentUICulture`.</span></span> <span data-ttu-id="aa60f-180">Chaque thread dans .NET a des objets `CurrentCulture` et `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-180">Every thread in .NET has `CurrentCulture` and `CurrentUICulture` objects.</span></span> <span data-ttu-id="aa60f-181">ASP.NET Core inspecte ces valeurs lors du rendu des fonctions qui dépendent de la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-181">ASP.NET Core inspects these values when rendering culture-dependent functions.</span></span> <span data-ttu-id="aa60f-182">Par exemple, si la culture du thread actuel a la valeur « en-US » (anglais, États-Unis), `DateTime.Now.ToLongDateString()` affiche « Thursday, February 18, 2016 », mais si `CurrentCulture` a la valeur « es-ES » (espagnol, Espagne), la sortie est « jueves, 18 de febrero de 2016 ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-182">For example, if the current thread's culture is set to "en-US" (English, United States), `DateTime.Now.ToLongDateString()` displays "Thursday, February 18, 2016", but if `CurrentCulture` is set to "es-ES" (Spanish, Spain) the output will be "jueves, 18 de febrero de 2016".</span></span>

## <a name="resource-files"></a><span data-ttu-id="aa60f-183">Fichiers de ressources</span><span class="sxs-lookup"><span data-stu-id="aa60f-183">Resource files</span></span>

<span data-ttu-id="aa60f-184">Un fichier de ressources est un mécanisme utile pour séparer les chaînes localisables du code.</span><span class="sxs-lookup"><span data-stu-id="aa60f-184">A resource file is a useful mechanism for separating localizable strings from code.</span></span> <span data-ttu-id="aa60f-185">Les chaînes traduites pour la langue non définie par défaut sont isolées dans les fichiers de ressources *. resx* .</span><span class="sxs-lookup"><span data-stu-id="aa60f-185">Translated strings for the non-default language are isolated in *.resx* resource files.</span></span> <span data-ttu-id="aa60f-186">Par exemple, vous pouvez avoir besoin de créer un fichier de ressources nommé *Welcome.es.resx* qui contient des chaînes traduites.</span><span class="sxs-lookup"><span data-stu-id="aa60f-186">For example, you might want to create Spanish resource file named *Welcome.es.resx* containing translated strings.</span></span> <span data-ttu-id="aa60f-187">« es » correspond au code de langue pour l’espagnol.</span><span class="sxs-lookup"><span data-stu-id="aa60f-187">"es" is the language code for Spanish.</span></span> <span data-ttu-id="aa60f-188">Pour créer ce fichier de ressources dans Visual Studio :</span><span class="sxs-lookup"><span data-stu-id="aa60f-188">To create this resource file in Visual Studio:</span></span>

1. <span data-ttu-id="aa60f-189">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le dossier qui contient le fichier de ressources > **Ajouter** > **Nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-189">In **Solution Explorer**, right click on the folder which will contain the resource file > **Add** > **New Item**.</span></span>

    ![Menu contextuel imbriqué : dans l’Explorateur de solutions, un menu contextuel est ouvert pour les ressources.](localization/_static/newi.png)

2. <span data-ttu-id="aa60f-192">Dans la zone **Rechercher dans les modèles installés**, entrez « ressource » et nommez le fichier.</span><span class="sxs-lookup"><span data-stu-id="aa60f-192">In the **Search installed templates** box, enter "resource" and name the file.</span></span>

    ![Boîte de dialogue Ajouter un nouvel élément](localization/_static/res.png)

3. <span data-ttu-id="aa60f-194">Entrez la valeur de la clé (chaîne native) dans la colonne **Nom** et la chaîne traduite dans la colonne **Valeur**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-194">Enter the key value (native string) in the **Name** column and the translated string in the **Value** column.</span></span>

    ![Le fichier Welcome.es.resx (le fichier de ressources Welcome pour l’espagnol) avec le mot Hello dans la colonne Nom et le mot Hola (bonjour en espagnol) dans la colonne Valeur](localization/_static/hola.png)

    <span data-ttu-id="aa60f-196">Visual Studio présente le fichier *Welcome.es.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-196">Visual Studio shows the *Welcome.es.resx* file.</span></span>

    ![L’Explorateur de solutions montrant le fichier de ressources Welcome pour l’espagnol (es)](localization/_static/se.png)

## <a name="resource-file-naming"></a><span data-ttu-id="aa60f-198">Nommage du fichier de ressources</span><span class="sxs-lookup"><span data-stu-id="aa60f-198">Resource file naming</span></span>

<span data-ttu-id="aa60f-199">Les ressources sont nommées selon le nom de type complet de leur classe moins le nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-199">Resources are named for the full type name of their class minus the assembly name.</span></span> <span data-ttu-id="aa60f-200">Par exemple, une ressource en français dans un projet dont l’assembly principal est `LocalizationWebsite.Web.dll` pour la classe `LocalizationWebsite.Web.Startup` serait nommée *Startup.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-200">For example, a French resource in a project whose main assembly is `LocalizationWebsite.Web.dll` for the class `LocalizationWebsite.Web.Startup` would be named *Startup.fr.resx*.</span></span> <span data-ttu-id="aa60f-201">Une ressource pour la classe `LocalizationWebsite.Web.Controllers.HomeController` serait nommée *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-201">A resource for the class `LocalizationWebsite.Web.Controllers.HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-202">Si l’espace de noms de votre classe ciblée n’est pas identique au nom de l’assembly, vous aurez besoin du nom de type complet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-202">If your targeted class's namespace isn't the same as the assembly name you will need the full type name.</span></span> <span data-ttu-id="aa60f-203">Par exemple, dans l’exemple de projet, une ressource pour le type `ExtraNamespace.Tools` serait nommée *ExtraNamespace.Tools.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-203">For example, in the sample project a resource for the type `ExtraNamespace.Tools` would be named *ExtraNamespace.Tools.fr.resx*.</span></span>

<span data-ttu-id="aa60f-204">Dans l’exemple de projet, la méthode `ConfigureServices` affecte à `ResourcesPath` la valeur « Resources », si bien que le chemin relatif du projet pour le fichier de ressources en français du contrôleur Home est *Resources/Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-204">In the sample project, the `ConfigureServices` method sets the `ResourcesPath` to "Resources", so the project relative path for the home controller's French resource file is *Resources/Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-205">Vous pouvez également utiliser des dossiers pour organiser les fichiers de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-205">Alternatively, you can use folders to organize resource files.</span></span> <span data-ttu-id="aa60f-206">Pour le contrôleur Home, le chemin serait *Resources/Controllers/HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-206">For the home controller, the path would be *Resources/Controllers/HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-207">Si vous n’utilisez pas l’option `ResourcesPath`, le fichier *.resx* se trouve dans le répertoire de base du projet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-207">If you don't use the `ResourcesPath` option, the *.resx* file would go in the project base directory.</span></span> <span data-ttu-id="aa60f-208">Le fichier de ressources pour `HomeController` serait nommé *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-208">The resource file for `HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-209">Le choix de l’utilisation de la convention d’affectation de noms avec des points ou un chemin dépend de la façon dont vous souhaitez organiser vos fichiers de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-209">The choice of using the dot or path naming convention depends on how you want to organize your resource files.</span></span>

| <span data-ttu-id="aa60f-210">Nom de la ressource</span><span class="sxs-lookup"><span data-stu-id="aa60f-210">Resource name</span></span> | <span data-ttu-id="aa60f-211">Affectation de noms avec des points ou un chemin</span><span class="sxs-lookup"><span data-stu-id="aa60f-211">Dot or path naming</span></span> |
| ------------   | ------------- |
| <span data-ttu-id="aa60f-212">Resources/Controllers.HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-212">Resources/Controllers.HomeController.fr.resx</span></span> | <span data-ttu-id="aa60f-213">Points</span><span class="sxs-lookup"><span data-stu-id="aa60f-213">Dot</span></span>  |
| <span data-ttu-id="aa60f-214">Resources/Controllers/HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-214">Resources/Controllers/HomeController.fr.resx</span></span>  | <span data-ttu-id="aa60f-215">Chemin d’accès</span><span class="sxs-lookup"><span data-stu-id="aa60f-215">Path</span></span> |
|    |     |

<span data-ttu-id="aa60f-216">Les fichiers de ressources utilisant `@inject IViewLocalizer` dans les Razor vues suivent un modèle similaire.</span><span class="sxs-lookup"><span data-stu-id="aa60f-216">Resource files using `@inject IViewLocalizer` in Razor views follow a similar pattern.</span></span> <span data-ttu-id="aa60f-217">Le fichier de ressources d’une vue peut être nommé selon la convention avec des points ou un chemin.</span><span class="sxs-lookup"><span data-stu-id="aa60f-217">The resource file for a view can be named using either dot naming or path naming.</span></span> Razor<span data-ttu-id="aa60f-218">les fichiers de ressources d’affichage imitent le chemin d’accès de leur fichier de vue associé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-218"> view resource files mimic the path of their associated view file.</span></span> <span data-ttu-id="aa60f-219">Si nous affectons à `ResourcesPath` la valeur « Resources », le fichier de ressources en français associé à l’affichage *Views/Home/About.cshtml* peut porter l’un des noms suivants :</span><span class="sxs-lookup"><span data-stu-id="aa60f-219">Assuming we set the `ResourcesPath` to "Resources", the French resource file associated with the *Views/Home/About.cshtml* view could be either of the following:</span></span>

* <span data-ttu-id="aa60f-220">Resources/Views/Home/About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-220">Resources/Views/Home/About.fr.resx</span></span>

* <span data-ttu-id="aa60f-221">Resources/Views.Home.About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-221">Resources/Views.Home.About.fr.resx</span></span>

<span data-ttu-id="aa60f-222">Si vous n’utilisez pas l’option `ResourcesPath`, le fichier *.resx* d’un affichage se trouve dans le même dossier que l’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-222">If you don't use the `ResourcesPath` option, the *.resx* file for a view would be located in the same folder as the view.</span></span>

### <a name="rootnamespaceattribute"></a><span data-ttu-id="aa60f-223">RootNamespaceAttribute</span><span class="sxs-lookup"><span data-stu-id="aa60f-223">RootNamespaceAttribute</span></span> 

<span data-ttu-id="aa60f-224">L’attribut [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) fournit l’espace de noms racine d’un assembly quand il est différent du nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-224">The [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) attribute provides the root namespace of an assembly when the root namespace of an assembly is different than the assembly name.</span></span> 

> [!WARNING]
> <span data-ttu-id="aa60f-225">Cela peut se produire lorsque le nom d’un projet n’est pas un identificateur .NET valide.</span><span class="sxs-lookup"><span data-stu-id="aa60f-225">This can occur when a project's name is not a valid .NET identifier.</span></span> <span data-ttu-id="aa60f-226">Par exemple, `my-project-name.csproj` utilisera l’espace de noms racine `my_project_name` et le nom de l’assembly `my-project-name` menant à cette erreur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-226">For instance `my-project-name.csproj` will use the root namespace `my_project_name` and the assembly name `my-project-name` leading to this error.</span></span> 

<span data-ttu-id="aa60f-227">Si l’espace de noms racine d’un assembly est différent du nom de l’assembly :</span><span class="sxs-lookup"><span data-stu-id="aa60f-227">If the root namespace of an assembly is different than the assembly name:</span></span>

* <span data-ttu-id="aa60f-228">La localisation ne fonctionne pas par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-228">Localization does not work by default.</span></span>
* <span data-ttu-id="aa60f-229">La localisation échoue en raison du mode de recherche des ressources dans l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-229">Localization fails due to the way resources are searched for within the assembly.</span></span> <span data-ttu-id="aa60f-230">`RootNamespace` est une valeur de build qui n’est pas accessible au processus exécutant.</span><span class="sxs-lookup"><span data-stu-id="aa60f-230">`RootNamespace` is a build-time value which is not available to the executing process.</span></span> 

<span data-ttu-id="aa60f-231">Si `RootNamespace` est différent de `AssemblyName`, incluez ce qui suit dans *AssemblyInfo.cs* (en remplaçant les valeurs des paramètres par les valeurs réelles) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-231">If the `RootNamespace` is different from the `AssemblyName`, include the following in *AssemblyInfo.cs* (with parameter values replaced with the actual values):</span></span>

```csharp
using System.Reflection;
using Microsoft.Extensions.Localization;

[assembly: ResourceLocation("Resource Folder Name")]
[assembly: RootNamespace("App Root Namespace")]
```

<span data-ttu-id="aa60f-232">Le code précédent permet de résoudre correctement les fichiers resx.</span><span class="sxs-lookup"><span data-stu-id="aa60f-232">The preceding code enables the successful resolution of resx files.</span></span>

## <a name="culture-fallback-behavior"></a><span data-ttu-id="aa60f-233">Comportement de secours pour la culture</span><span class="sxs-lookup"><span data-stu-id="aa60f-233">Culture fallback behavior</span></span>

<span data-ttu-id="aa60f-234">Lors de la recherche d’une ressource, la localisation met en œuvre une « alternative de secours pour la culture ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-234">When searching for a resource, localization engages in "culture fallback".</span></span> <span data-ttu-id="aa60f-235">Elle commence par la culture demandée : si elle est introuvable, il revient à la culture parente de cette culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-235">Starting from the requested culture, if not found, it reverts to the parent culture of that culture.</span></span> <span data-ttu-id="aa60f-236">Par ailleurs, la propriété [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) représente la culture parente.</span><span class="sxs-lookup"><span data-stu-id="aa60f-236">As an aside, the [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) property represents the parent culture.</span></span> <span data-ttu-id="aa60f-237">Cela signifie généralement (mais pas toujours) supprimer l’indicateur national du code ISO.</span><span class="sxs-lookup"><span data-stu-id="aa60f-237">This usually (but not always) means removing the national signifier from the ISO.</span></span> <span data-ttu-id="aa60f-238">Par exemple, le dialecte de l’espagnol parlé au Mexique est « es-MX ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-238">For example, the dialect of Spanish spoken in Mexico is "es-MX".</span></span> <span data-ttu-id="aa60f-239">Il contient l’espagnol parent « es », qui n’est spécifique à aucun pays.</span><span class="sxs-lookup"><span data-stu-id="aa60f-239">It has the parent "es"&mdash;Spanish non-specific to any country.</span></span>

<span data-ttu-id="aa60f-240">Imaginez que votre site reçoive une demande pour une ressource « Bienvenue » avec la culture « fr-CA ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-240">Imagine your site receives a request for a "Welcome" resource using culture "fr-CA".</span></span> <span data-ttu-id="aa60f-241">Le système de localisation recherche les ressources suivantes, dans l’ordre, et sélectionne la première correspondance :</span><span class="sxs-lookup"><span data-stu-id="aa60f-241">The localization system looks for the following resources, in order, and selects the first match:</span></span>

* <span data-ttu-id="aa60f-242">*Welcome.fr-CA.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-242">*Welcome.fr-CA.resx*</span></span>
* <span data-ttu-id="aa60f-243">*Welcome.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-243">*Welcome.fr.resx*</span></span>
* <span data-ttu-id="aa60f-244">*Welcome.resx* (si `NeutralResourcesLanguage` est « fr-CA »)</span><span class="sxs-lookup"><span data-stu-id="aa60f-244">*Welcome.resx* (if the `NeutralResourcesLanguage` is "fr-CA")</span></span>

<span data-ttu-id="aa60f-245">Par exemple, si vous supprimez l’indicateur de culture « .fr » alors que la culture définie est le français, le fichier de ressources par défaut est lu et les chaînes sont localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-245">As an example, if you remove the ".fr" culture designator and you have the culture set to French, the default resource file is read and strings are localized.</span></span> <span data-ttu-id="aa60f-246">Le gestionnaire de ressources désigne une ressource par défaut ou de secours pour les cas où rien ne correspond à la culture demandée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-246">The Resource manager designates a default or fallback resource for when nothing meets your requested culture.</span></span> <span data-ttu-id="aa60f-247">Si vous voulez simplement retourner la clé quand une ressource est manquante pour la culture demandée, vous ne devez pas avoir de fichier de ressources par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-247">If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</span></span>

### <a name="generate-resource-files-with-visual-studio"></a><span data-ttu-id="aa60f-248">Générer des fichiers de ressources avec Visual Studio</span><span class="sxs-lookup"><span data-stu-id="aa60f-248">Generate resource files with Visual Studio</span></span>

<span data-ttu-id="aa60f-249">Si vous créez un fichier de ressources dans Visual Studio sans culture dans le nom de fichier (par exemple, *Welcome.resx*), Visual Studio crée une classe C# avec une propriété pour chaque chaîne.</span><span class="sxs-lookup"><span data-stu-id="aa60f-249">If you create a resource file in Visual Studio without a culture in the file name (for example, *Welcome.resx*), Visual Studio will create a C# class with a property for each string.</span></span> <span data-ttu-id="aa60f-250">Ce n’est généralement pas ce que vous souhaitez avec ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="aa60f-250">That's usually not what you want with ASP.NET Core.</span></span> <span data-ttu-id="aa60f-251">Vous n’avez habituellement pas de fichier de ressources *.resx* par défaut (un fichier *.resx* sans nom de culture).</span><span class="sxs-lookup"><span data-stu-id="aa60f-251">You typically don't have a default *.resx* resource file (a *.resx* file without the culture name).</span></span> <span data-ttu-id="aa60f-252">Nous vous suggérons donc de créer le fichier *.resx* avec un nom de culture (par exemple, *Welcome.fr.resx*).</span><span class="sxs-lookup"><span data-stu-id="aa60f-252">We suggest you create the *.resx* file with a culture name (for example *Welcome.fr.resx*).</span></span> <span data-ttu-id="aa60f-253">Lorsque vous créez un fichier *.resx* avec un nom de culture, Visual Studio ne génère pas le fichier de classe.</span><span class="sxs-lookup"><span data-stu-id="aa60f-253">When you create a *.resx* file with a culture name, Visual Studio won't generate the class file.</span></span>

### <a name="add-other-cultures"></a><span data-ttu-id="aa60f-254">Ajouter d’autres cultures</span><span class="sxs-lookup"><span data-stu-id="aa60f-254">Add other cultures</span></span>

<span data-ttu-id="aa60f-255">Chaque combinaison de langue et de culture (autres que la langue par défaut) nécessite un fichier de ressources unique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-255">Each language and culture combination (other than the default language) requires a unique resource file.</span></span> <span data-ttu-id="aa60f-256">Vous créez des fichiers de ressources pour différentes cultures et différents paramètres régionaux en créant des fichiers de ressources dans lesquels les codes de langue ISO font partie du nom de fichier (par exemple, **en-us**, **fr-ca** et \*\* en gb\*\*).</span><span class="sxs-lookup"><span data-stu-id="aa60f-256">You create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, **en-us**, **fr-ca**, and **en-gb**).</span></span> <span data-ttu-id="aa60f-257">Ces codes ISO sont placés entre le nom de fichier et l’extension de fichier *.resx*, comme dans *Welcome.es-MX.resx* (Espagnol/Mexique).</span><span class="sxs-lookup"><span data-stu-id="aa60f-257">These ISO codes are placed between the file name and the *.resx* file extension, as in *Welcome.es-MX.resx* (Spanish/Mexico).</span></span>

## <a name="implement-a-strategy-to-select-the-languageculture-for-each-request"></a><span data-ttu-id="aa60f-258">Implémenter une stratégie de sélection de la langue/culture pour chaque requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-258">Implement a strategy to select the language/culture for each request</span></span>

### <a name="configure-localization"></a><span data-ttu-id="aa60f-259">Configurer la localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-259">Configure localization</span></span>

<span data-ttu-id="aa60f-260">La localisation est configurée dans la méthode `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-260">Localization is configured in the `Startup.ConfigureServices` method:</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet1)]

* <span data-ttu-id="aa60f-261">`AddLocalization` ajoute les services de localisation au conteneur de services.</span><span class="sxs-lookup"><span data-stu-id="aa60f-261">`AddLocalization` Adds the localization services to the services container.</span></span> <span data-ttu-id="aa60f-262">Le code ci-dessus affecte également au chemin des ressources la valeur « Resources ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-262">The code above also sets the resources path to "Resources".</span></span>

* <span data-ttu-id="aa60f-263">`AddViewLocalization` ajoute la prise en charge des fichiers d’affichage localisés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-263">`AddViewLocalization` Adds support for localized view files.</span></span> <span data-ttu-id="aa60f-264">Dans cet exemple d’affichage, la localisation se base sur le suffixe du fichier d’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-264">In this sample view localization is based on the view file suffix.</span></span> <span data-ttu-id="aa60f-265">Par exemple, « fr » dans le fichier *Index.fr.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-265">For example "fr" in the *Index.fr.cshtml* file.</span></span>

* <span data-ttu-id="aa60f-266">`AddDataAnnotationsLocalization` ajoute la prise en charge des messages de validation `DataAnnotations` localisés par le biais d’abstractions `IStringLocalizer`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-266">`AddDataAnnotationsLocalization` Adds support for localized `DataAnnotations` validation messages through `IStringLocalizer` abstractions.</span></span>

### <a name="localization-middleware"></a><span data-ttu-id="aa60f-267">Intergiciel (middleware) de localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-267">Localization middleware</span></span>

<span data-ttu-id="aa60f-268">La culture actuelle sur une requête est définie dans l’[intergiciel (middleware)](xref:fundamentals/middleware/index) de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-268">The current culture on a request is set in the localization [Middleware](xref:fundamentals/middleware/index).</span></span> <span data-ttu-id="aa60f-269">L’intergiciel de localisation est activé dans la méthode `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-269">The localization middleware is enabled in the `Startup.Configure` method.</span></span> <span data-ttu-id="aa60f-270">L’intergiciel de localisation doit être configuré avant tout intergiciel susceptible de vérifier la culture de la requête (par exemple, `app.UseMvcWithDefaultRoute()`).</span><span class="sxs-lookup"><span data-stu-id="aa60f-270">The localization middleware must be configured before any middleware which might check the request culture (for example, `app.UseMvcWithDefaultRoute()`).</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet2)]
[!INCLUDE[about the series](~/includes/code-comments-loc.md)]

<span data-ttu-id="aa60f-271">`UseRequestLocalization` initialise un objet `RequestLocalizationOptions`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-271">`UseRequestLocalization` initializes a `RequestLocalizationOptions` object.</span></span> <span data-ttu-id="aa60f-272">Sur chaque requête, la liste de `RequestCultureProvider` dans `RequestLocalizationOptions` est énumérée et le premier fournisseur capable de déterminer correctement la culture de la requête est utilisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-272">On every request the list of `RequestCultureProvider` in the `RequestLocalizationOptions` is enumerated and the first provider that can successfully determine the request culture is used.</span></span> <span data-ttu-id="aa60f-273">Les fournisseurs par défaut proviennent de la classe `RequestLocalizationOptions` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-273">The default providers come from the `RequestLocalizationOptions` class:</span></span>

1. `QueryStringRequestCultureProvider`
2. `CookieRequestCultureProvider`
3. `AcceptLanguageHeaderRequestCultureProvider`

<span data-ttu-id="aa60f-274">La liste par défaut va du plus spécifique au moins spécifique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-274">The default list goes from most specific to least specific.</span></span> <span data-ttu-id="aa60f-275">Plus loin dans l’article, nous verrons comment vous pouvez modifier l’ordre et même ajouter un fournisseur de culture personnalisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-275">Later in the article we'll see how you can change the order and even add a custom culture provider.</span></span> <span data-ttu-id="aa60f-276">Si aucun des fournisseurs ne peut déterminer la culture de la requête, `DefaultRequestCulture` est utilisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-276">If none of the providers can determine the request culture, the `DefaultRequestCulture` is used.</span></span>

### <a name="querystringrequestcultureprovider"></a><span data-ttu-id="aa60f-277">QueryStringRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="aa60f-277">QueryStringRequestCultureProvider</span></span>

<span data-ttu-id="aa60f-278">Certaines applications utilisent une chaîne de requête pour définir la [culture et la culture d’interface utilisateur](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa60f-278">Some apps will use a query string to set the [culture and UI culture](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span></span> <span data-ttu-id="aa60f-279">Pour les applications qui utilisent l’approche du cookie ou de l’en-tête Accept-Language, l’ajout d’une chaîne de requête à l’URL s’avère utile pour déboguer et tester le code.</span><span class="sxs-lookup"><span data-stu-id="aa60f-279">For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code.</span></span> <span data-ttu-id="aa60f-280">Par défaut, `QueryStringRequestCultureProvider` est inscrit en tant que premier fournisseur de localisation dans la liste `RequestCultureProvider`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-280">By default, the `QueryStringRequestCultureProvider` is registered as the first localization provider in the `RequestCultureProvider` list.</span></span> <span data-ttu-id="aa60f-281">Vous passez les paramètres de chaîne de requête `culture` et `ui-culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-281">You pass the query string parameters `culture` and `ui-culture`.</span></span> <span data-ttu-id="aa60f-282">L’exemple suivant affecte à la culture spécifique (langue et région) la valeur espagnol/Mexique :</span><span class="sxs-lookup"><span data-stu-id="aa60f-282">The following example sets the specific culture (language and region) to Spanish/Mexico:</span></span>

   `http://localhost:5000/?culture=es-MX&ui-culture=es-MX`

<span data-ttu-id="aa60f-283">Si vous passez uniquement l’une des deux (`culture` ou `ui-culture`), le fournisseur de chaîne de requête définit les deux valeurs à l’aide de celle que vous avez passée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-283">If you only pass in one of the two (`culture` or `ui-culture`), the query string provider will set both values using the one you passed in.</span></span> <span data-ttu-id="aa60f-284">Par exemple, la seule définition de la culture définit à la fois `Culture` et `UICulture` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-284">For example, setting just the culture will set both the `Culture` and the `UICulture`:</span></span>

   `http://localhost:5000/?culture=es-MX`

### <a name="cookierequestcultureprovider"></a><span data-ttu-id="aa60f-285">CookieRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="aa60f-285">CookieRequestCultureProvider</span></span>

<span data-ttu-id="aa60f-286">Les applications de production fournissent souvent un mécanisme permettant de définir la culture à l’aide du cookie de culture ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="aa60f-286">Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie.</span></span> <span data-ttu-id="aa60f-287">Utilisez la méthode `MakeCookieValue` pour créer un cookie.</span><span class="sxs-lookup"><span data-stu-id="aa60f-287">Use the `MakeCookieValue` method to create a cookie.</span></span>

<span data-ttu-id="aa60f-288">`CookieRequestCultureProvider` `DefaultCookieName` Retourne le nom de cookie par défaut utilisé pour suivre les informations de culture préférées de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-288">The `CookieRequestCultureProvider` `DefaultCookieName` returns the default cookie name used to track the user's preferred culture information.</span></span> <span data-ttu-id="aa60f-289">Le nom du cookie par défaut est `.AspNetCore.Culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-289">The default cookie name is `.AspNetCore.Culture`.</span></span>

<span data-ttu-id="aa60f-290">Le format du cookie est `c=%LANGCODE%|uic=%LANGCODE%`, où `c` correspond à `Culture` et `uic` correspond à `UICulture`, par exemple :</span><span class="sxs-lookup"><span data-stu-id="aa60f-290">The cookie format is `c=%LANGCODE%|uic=%LANGCODE%`, where `c` is `Culture` and `uic` is `UICulture`, for example:</span></span>

    c=en-UK|uic=en-US

<span data-ttu-id="aa60f-291">Si vous spécifiez uniquement les informations de culture ou la culture d’interface utilisateur, la culture spécifiée est utilisée à la fois pour les informations de culture et la culture d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-291">If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</span></span>

### <a name="the-accept-language-http-header"></a><span data-ttu-id="aa60f-292">En-tête HTTP Accept-Language</span><span class="sxs-lookup"><span data-stu-id="aa60f-292">The Accept-Language HTTP header</span></span>

<span data-ttu-id="aa60f-293">L’[en-tête Accept-Language](https://www.w3.org/International/questions/qa-accept-lang-locales) peut être défini dans la plupart des navigateurs et a d’abord été conçu pour spécifier la langue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-293">The [Accept-Language header](https://www.w3.org/International/questions/qa-accept-lang-locales) is settable in most browsers and was originally intended to specify the user's language.</span></span> <span data-ttu-id="aa60f-294">Ce paramètre indique ce que le navigateur doit envoyer ou ce dont il a hérité du système d’exploitation sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="aa60f-294">This setting indicates what the browser has been set to send or has inherited from the underlying operating system.</span></span> <span data-ttu-id="aa60f-295">L’en-tête HTTP Accept-Language d’une requête de navigateur n’est pas un moyen infaillible de détecter la langue préférée de l’utilisateur (consultez [Définition des préférences de langue dans un navigateur](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span><span class="sxs-lookup"><span data-stu-id="aa60f-295">The Accept-Language HTTP header from a browser request isn't an infallible way to detect the user's preferred language (see [Setting language preferences in a browser](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span></span> <span data-ttu-id="aa60f-296">Une application de production doit inclure un moyen permettant à l’utilisateur de personnaliser son choix de culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-296">A production app should include a way for a user to customize their choice of culture.</span></span>

### <a name="set-the-accept-language-http-header-in-ie"></a><span data-ttu-id="aa60f-297">Définir l’en-tête HTTP Accept-Language dans IE</span><span class="sxs-lookup"><span data-stu-id="aa60f-297">Set the Accept-Language HTTP header in IE</span></span>

1. <span data-ttu-id="aa60f-298">À partir de l’icône d’engrenage, appuyez sur **Options Internet**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-298">From the gear icon, tap **Internet Options**.</span></span>

2. <span data-ttu-id="aa60f-299">Appuyez sur **Langues**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-299">Tap **Languages**.</span></span>

    ![Options Internet](localization/_static/lang.png)

3. <span data-ttu-id="aa60f-301">Appuyez sur **Définir les langues**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-301">Tap **Set Language Preferences**.</span></span>

4. <span data-ttu-id="aa60f-302">Appuyez sur **Ajouter une langue**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-302">Tap **Add a language**.</span></span>

5. <span data-ttu-id="aa60f-303">Ajoutez la langue.</span><span class="sxs-lookup"><span data-stu-id="aa60f-303">Add the language.</span></span>

6. <span data-ttu-id="aa60f-304">Tapez sur la langue, puis sur **Monter**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-304">Tap the language, then tap **Move Up**.</span></span>

### <a name="use-a-custom-provider"></a><span data-ttu-id="aa60f-305">Utiliser un fournisseur personnalisé</span><span class="sxs-lookup"><span data-stu-id="aa60f-305">Use a custom provider</span></span>

<span data-ttu-id="aa60f-306">Supposons que vous vouliez permettre à vos clients de stocker leur langue et leur culture dans vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="aa60f-306">Suppose you want to let your customers store their language and culture in your databases.</span></span> <span data-ttu-id="aa60f-307">Vous pouvez écrire un fournisseur pour rechercher ces valeurs pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-307">You could write a provider to look up these values for the user.</span></span> <span data-ttu-id="aa60f-308">Le code suivant illustre l’ajout d’un fournisseur personnalisé :</span><span class="sxs-lookup"><span data-stu-id="aa60f-308">The following code shows how to add a custom provider:</span></span>

```csharp
private const string enUSCulture = "en-US";

services.Configure<RequestLocalizationOptions>(options =>
{
    var supportedCultures = new[]
    {
        new CultureInfo(enUSCulture),
        new CultureInfo("fr")
    };

    options.DefaultRequestCulture = new RequestCulture(culture: enUSCulture, uiCulture: enUSCulture);
    options.SupportedCultures = supportedCultures;
    options.SupportedUICultures = supportedCultures;

    options.AddInitialRequestCultureProvider(new CustomRequestCultureProvider(async context =>
    {
        // My custom request culture logic
        return new ProviderCultureResult("en");
    }));
});
```

<span data-ttu-id="aa60f-309">Utilisez `RequestLocalizationOptions` pour ajouter ou supprimer des fournisseurs de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-309">Use `RequestLocalizationOptions` to add or remove localization providers.</span></span>

### <a name="set-the-culture-programmatically"></a><span data-ttu-id="aa60f-310">Définir la culture par programmation</span><span class="sxs-lookup"><span data-stu-id="aa60f-310">Set the culture programmatically</span></span>

<span data-ttu-id="aa60f-311">Cet exemple de projet **Localization.StarterWeb** sur [GitHub](https://github.com/aspnet/entropy) contient l’interface utilisateur permettant de définir `Culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-311">This sample **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) contains UI to set the `Culture`.</span></span> <span data-ttu-id="aa60f-312">Le fichier *Views/Shared/_SelectLanguagePartial.cshtml* vous permet de sélectionner la culture dans la liste des cultures prises en charge :</span><span class="sxs-lookup"><span data-stu-id="aa60f-312">The *Views/Shared/_SelectLanguagePartial.cshtml* file allows you to select the culture from the list of supported cultures:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_SelectLanguagePartial.cshtml)]

<span data-ttu-id="aa60f-313">Le fichier *Views/Shared/_SelectLanguagePartial.cshtml* est ajouté à la section `footer` du fichier de disposition afin d’être disponible pour tous les affichages :</span><span class="sxs-lookup"><span data-stu-id="aa60f-313">The *Views/Shared/_SelectLanguagePartial.cshtml* file is added to the `footer` section of the layout file so it will be available to all views:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_Layout.cshtml?range=43-56&highlight=10)]

<span data-ttu-id="aa60f-314">La méthode `SetLanguage` définit le cookie de la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-314">The `SetLanguage` method sets the culture cookie.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/HomeController.cs?range=57-67)]

<span data-ttu-id="aa60f-315">Vous ne pouvez pas incorporer *_SelectLanguagePartial.cshtml* dans l’exemple de code de ce projet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-315">You can't plug in the *_SelectLanguagePartial.cshtml* to sample code for this project.</span></span> <span data-ttu-id="aa60f-316">Le projet **Localization. StarterWeb** sur [GitHub](https://github.com/aspnet/entropy) contient du code pour transmettre le `RequestLocalizationOptions` à un en Razor partiel via le conteneur d' [injection de dépendance](dependency-injection.md) .</span><span class="sxs-lookup"><span data-stu-id="aa60f-316">The **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) has code to flow the `RequestLocalizationOptions` to a Razor partial through the [Dependency Injection](dependency-injection.md) container.</span></span>

## <a name="model-binding-route-data-and-query-strings"></a><span data-ttu-id="aa60f-317">Données d’itinéraire de liaison de modèle et chaînes de requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-317">Model binding route data and query strings</span></span>

<span data-ttu-id="aa60f-318">Consultez [comportement de la globalisation des données de routage de liaison de modèle et des chaînes de requête](xref:mvc/models/model-binding#glob).</span><span class="sxs-lookup"><span data-stu-id="aa60f-318">See [Globalization behavior of model binding route data and query strings](xref:mvc/models/model-binding#glob).</span></span>

## <a name="globalization-and-localization-terms"></a><span data-ttu-id="aa60f-319">Terminologie de la globalisation et de la localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-319">Globalization and localization terms</span></span>

<span data-ttu-id="aa60f-320">Le processus de localisation de votre application exige également une compréhension élémentaire des jeux de caractères appropriés couramment utilisés dans le développement de logiciels moderne ainsi qu’une compréhension des problèmes qui y sont associés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-320">The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them.</span></span> <span data-ttu-id="aa60f-321">Bien que tous les ordinateurs stockent le texte sous forme de nombres (codes), les différents systèmes stockent ce même texte en utilisant des nombres différents.</span><span class="sxs-lookup"><span data-stu-id="aa60f-321">Although all computers store text as numbers (codes), different systems store the same text using different numbers.</span></span> <span data-ttu-id="aa60f-322">Le processus de localisation consiste à traduire l’interface utilisateur de l’application pour une culture/des paramètres régionaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-322">The localization process refers to translating the app user interface (UI) for a specific culture/locale.</span></span>

<span data-ttu-id="aa60f-323">L’[adaptabilité](/dotnet/standard/globalization-localization/localizability-review) est un processus intermédiaire permettant de vérifier qu’une application globalisée est prête à être localisée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-323">[Localizability](/dotnet/standard/globalization-localization/localizability-review) is an intermediate process for verifying that a globalized app is ready for localization.</span></span>

<span data-ttu-id="aa60f-324">Le format [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) du nom de la culture est `<languagecode2>-<country/regioncode2>`, où `<languagecode2>` correspond au code de la langue et `<country/regioncode2>` au code de la sous-culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-324">The [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) format for the culture name is `<languagecode2>-<country/regioncode2>`, where `<languagecode2>` is the language code and `<country/regioncode2>` is the subculture code.</span></span> <span data-ttu-id="aa60f-325">Par exemple, `es-CL` pour l’espagnol (Chili), `en-US` pour l’anglais (États-Unis) et `en-AU` pour l’anglais (Australie).</span><span class="sxs-lookup"><span data-stu-id="aa60f-325">For example, `es-CL` for Spanish (Chile), `en-US` for English (United States), and `en-AU` for English (Australia).</span></span> <span data-ttu-id="aa60f-326">Le format [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) est la combinaison d’un code de culture à deux lettres minuscules de norme ISO 639 associé à une langue et d’un code de sous-culture à deux lettres majuscules de norme ISO 3166 associé à un pays ou une région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-326">[RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.</span></span> <span data-ttu-id="aa60f-327">Consultez [Nom de culture de la langue](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span><span class="sxs-lookup"><span data-stu-id="aa60f-327">See [Language Culture Name](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span></span>

<span data-ttu-id="aa60f-328">L’internationalisation est souvent abrégée par « I18N ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-328">Internationalization is often abbreviated to "I18N".</span></span> <span data-ttu-id="aa60f-329">Cette abréviation prend les première et dernière lettres du mot ainsi que le nombre de lettres entre elles, 18 représentant ainsi le nombre de lettres le « I » initial et le « N » final.</span><span class="sxs-lookup"><span data-stu-id="aa60f-329">The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first "I" and the last "N".</span></span> <span data-ttu-id="aa60f-330">Il en va de même pour la globalisation (G11N) et la localisation (L10N).</span><span class="sxs-lookup"><span data-stu-id="aa60f-330">The same applies to Globalization (G11N), and Localization (L10N).</span></span>

<span data-ttu-id="aa60f-331">Termes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-331">Terms:</span></span>

* <span data-ttu-id="aa60f-332">Globalisation (G11N) : Processus permettant de faire prendre en charge différentes langues et régions à une application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-332">Globalization (G11N): The process of making an app support different languages and regions.</span></span>
* <span data-ttu-id="aa60f-333">Localisation (L10N) : Processus permettant de personnaliser une application pour une langue et une région données.</span><span class="sxs-lookup"><span data-stu-id="aa60f-333">Localization (L10N): The process of customizing an app for a given language and region.</span></span>
* <span data-ttu-id="aa60f-334">Internationalisation (I18N) : Décrit à la fois la globalisation et la localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-334">Internationalization (I18N): Describes both globalization and localization.</span></span>
* <span data-ttu-id="aa60f-335">Culture : Correspond à une langue et éventuellement à une région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-335">Culture: It's a language and, optionally, a region.</span></span>
* <span data-ttu-id="aa60f-336">Culture neutre : Culture dont la langue est spécifiée, mais pas la région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-336">Neutral culture: A culture that has a specified language, but not a region.</span></span> <span data-ttu-id="aa60f-337">(Exemples : « en », « es ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-337">(for example "en", "es")</span></span>
* <span data-ttu-id="aa60f-338">Culture spécifique : Culture dont la langue et la région sont spécifiées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-338">Specific culture: A culture that has a specified language and region.</span></span> <span data-ttu-id="aa60f-339">(Exemples : « en-US », « en-GB », « es-CL ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-339">(for example "en-US", "en-GB", "es-CL")</span></span>
* <span data-ttu-id="aa60f-340">Culture parent : Culture neutre qui contient une culture spécifique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-340">Parent culture: The neutral culture that contains a specific culture.</span></span> <span data-ttu-id="aa60f-341">(Exemple : « en » est la culture parent de « en-US » et « en-GB ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-341">(for example, "en" is the parent culture of "en-US" and "en-GB")</span></span>
* <span data-ttu-id="aa60f-342">Paramètres régionaux : Synonyme de culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-342">Locale: A locale is the same as a culture.</span></span>

[!INCLUDE[](~/includes/localization/currency.md)]

[!INCLUDE[](~/includes/localization/unsupported-culture-log-level.md)]

## <a name="additional-resources"></a><span data-ttu-id="aa60f-343">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="aa60f-343">Additional resources</span></span>

* <xref:fundamentals/troubleshoot-aspnet-core-localization>
* <span data-ttu-id="aa60f-344">[Projet Localization.StarterWeb](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) utilisé dans l’article.</span><span class="sxs-lookup"><span data-stu-id="aa60f-344">[Localization.StarterWeb project](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) used in the article.</span></span>
* [<span data-ttu-id="aa60f-345">Internationalisation et localisation d’applications .NET</span><span class="sxs-lookup"><span data-stu-id="aa60f-345">Globalizing and localizing .NET applications</span></span>](/dotnet/standard/globalization-localization/index)
* [<span data-ttu-id="aa60f-346">Ressources dans les fichiers. resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-346">Resources in .resx Files</span></span>](/dotnet/framework/resources/working-with-resx-files-programmatically)
* [<span data-ttu-id="aa60f-347">Kit de ressources pour application multilingue Microsoft</span><span class="sxs-lookup"><span data-stu-id="aa60f-347">Microsoft Multilingual App Toolkit</span></span>](https://marketplace.visualstudio.com/items?itemName=MultilingualAppToolkit.MultilingualAppToolkit-18308)
* [<span data-ttu-id="aa60f-348">Localisation et classes génériques</span><span class="sxs-lookup"><span data-stu-id="aa60f-348">Localization & Generics</span></span>](http://hishambinateya.com/localization-and-generics)

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="aa60f-349">Par [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/) et [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span><span class="sxs-lookup"><span data-stu-id="aa60f-349">By [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/), and [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span></span>

<span data-ttu-id="aa60f-350">Un site Web multilingue permet au site d’atteindre un public plus vaste.</span><span class="sxs-lookup"><span data-stu-id="aa60f-350">A multilingual website allows the site to reach a wider audience.</span></span> <span data-ttu-id="aa60f-351">ASP.NET Core offre des services et des intergiciels (middleware) de traduction dans différentes langues et cultures.</span><span class="sxs-lookup"><span data-stu-id="aa60f-351">ASP.NET Core provides services and middleware for localizing into different languages and cultures.</span></span>

<span data-ttu-id="aa60f-352">L’internationalisation implique la [globalisation](/dotnet/api/system.globalization) et la [localisation](/dotnet/standard/globalization-localization/localization).</span><span class="sxs-lookup"><span data-stu-id="aa60f-352">Internationalization involves [Globalization](/dotnet/api/system.globalization) and [Localization](/dotnet/standard/globalization-localization/localization).</span></span> <span data-ttu-id="aa60f-353">La globalisation est le processus de conception d’applications qui prennent en charge des cultures différentes.</span><span class="sxs-lookup"><span data-stu-id="aa60f-353">Globalization is the process of designing apps that support different cultures.</span></span> <span data-ttu-id="aa60f-354">La globalisation ajoute la prise en charge de l’entrée, de l’affichage et de la sortie d’un ensemble défini de jeux de caractères liés à des zones géographiques spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-354">Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</span></span>

<span data-ttu-id="aa60f-355">La localisation est le processus d’adaptation d’une application globalisée, dont vous avez déjà traitée l’adaptabilité, à une culture/des paramètres régionaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-355">Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.</span></span> <span data-ttu-id="aa60f-356">Pour plus d’informations, consultez **Terminologie de la globalisation et de la localisation** à la fin du présent document.</span><span class="sxs-lookup"><span data-stu-id="aa60f-356">For more information see **Globalization and localization terms** near the end of this document.</span></span>

<span data-ttu-id="aa60f-357">La localisation d’une application implique les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-357">App localization involves the following:</span></span>

1. <span data-ttu-id="aa60f-358">Rendre le contenu de l’application localisable</span><span class="sxs-lookup"><span data-stu-id="aa60f-358">Make the app's content localizable</span></span>
1. <span data-ttu-id="aa60f-359">Fournir des ressources localisées aux langues et cultures prises en charge</span><span class="sxs-lookup"><span data-stu-id="aa60f-359">Provide localized resources for the languages and cultures you support</span></span>
1. <span data-ttu-id="aa60f-360">Implémenter une stratégie de sélection de la langue/culture pour chaque requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-360">Implement a strategy to select the language/culture for each request</span></span>

<span data-ttu-id="aa60f-361">[Afficher ou télécharger l’exemple de code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([procédure de téléchargement](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="aa60f-361">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="make-the-apps-content-localizable"></a><span data-ttu-id="aa60f-362">Rendre le contenu de l’application localisable</span><span class="sxs-lookup"><span data-stu-id="aa60f-362">Make the app's content localizable</span></span>

<span data-ttu-id="aa60f-363"><xref:Microsoft.Extensions.Localization.IStringLocalizer>et <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> ont été conçus pour améliorer la productivité lors du développement d’applications localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-363"><xref:Microsoft.Extensions.Localization.IStringLocalizer> and <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> were architected to improve productivity when developing localized apps.</span></span> <span data-ttu-id="aa60f-364">`IStringLocalizer`utilise <xref:System.Resources.ResourceManager> et <xref:System.Resources.ResourceReader> pour fournir des ressources spécifiques à la culture au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="aa60f-364">`IStringLocalizer` uses the <xref:System.Resources.ResourceManager> and <xref:System.Resources.ResourceReader> to provide culture-specific resources at run time.</span></span> <span data-ttu-id="aa60f-365">L’interface possède un indexeur et un `IEnumerable` pour retourner des chaînes localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-365">The interface has an indexer and an `IEnumerable` for returning localized strings.</span></span> <span data-ttu-id="aa60f-366">`IStringLocalizer`ne nécessite pas le stockage des chaînes de langue par défaut dans un fichier de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-366">`IStringLocalizer` doesn't require storing the default language strings in a resource file.</span></span> <span data-ttu-id="aa60f-367">Vous pouvez développer une application ciblée pour la localisation sans avoir besoin de créer des fichiers de ressources au tout début du développement.</span><span class="sxs-lookup"><span data-stu-id="aa60f-367">You can develop an app targeted for localization and not need to create resource files early in development.</span></span> <span data-ttu-id="aa60f-368">Le code ci-dessous montre comment inclure dans un wrapper la chaîne « About Title » à des fins de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-368">The code below shows how to wrap the string "About Title" for localization.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/AboutController.cs)]

<span data-ttu-id="aa60f-369">Dans le code précédent, l' `IStringLocalizer<T>` implémentation provient de l' [injection de dépendances](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="aa60f-369">In the preceding code, the `IStringLocalizer<T>` implementation comes from [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="aa60f-370">Si la valeur localisée de « About Title » est introuvable, alors la clé de l’indexeur est retournée, autrement dit, la chaîne « About Title ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-370">If the localized value of "About Title" isn't found, then the indexer key is returned, that is, the string "About Title".</span></span> <span data-ttu-id="aa60f-371">Vous pouvez laisser les chaînes littérales de la langue par défaut dans l’application et les inclure dans un wrapper dans le localisateur, afin de pouvoir vous concentrer sur le développement de l’application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-371">You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app.</span></span> <span data-ttu-id="aa60f-372">Vous développez votre application avec votre langue par défaut et vous la préparez à l’étape de localisation sans créer au préalable un fichier de ressources par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-372">You develop your app with your default language and prepare it for the localization step without first creating a default resource file.</span></span> <span data-ttu-id="aa60f-373">Vous pouvez également utiliser l’approche traditionnelle et fournir une clé pour récupérer la chaîne de la langue par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-373">Alternatively, you can use the traditional approach and provide a key to retrieve the default language string.</span></span> <span data-ttu-id="aa60f-374">Pour de nombreux développeurs, le nouveau workflow qui n’inclut pas de fichier *.resx* de langue par défaut et qui consiste à simplement inclure dans un wrapper les littéraux de chaîne permet de réduire la surcharge de la localisation d’une application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-374">For many developers the new workflow of not having a default language *.resx* file and simply wrapping the string literals can reduce the overhead of localizing an app.</span></span> <span data-ttu-id="aa60f-375">D’autres développeurs préfèrent le workflow traditionnel, car il facilite l’utilisation de longs littéraux de chaîne ainsi que la mise à jour des chaînes localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-375">Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</span></span>

<span data-ttu-id="aa60f-376">Utilisez l’implémentation de `IHtmlLocalizer<T>` pour les ressources qui contiennent du HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-376">Use the `IHtmlLocalizer<T>` implementation for resources that contain HTML.</span></span> <span data-ttu-id="aa60f-377">`IHtmlLocalizer` encode en HTML les arguments formatés dans la chaîne de ressource, mais pas la chaîne de ressource elle-même.</span><span class="sxs-lookup"><span data-stu-id="aa60f-377">`IHtmlLocalizer` HTML encodes arguments that are formatted in the resource string, but doesn't HTML encode the resource string itself.</span></span> <span data-ttu-id="aa60f-378">Dans l’exemple mis en surbrillance ci-dessous, seule la valeur du paramètre `name` est encodé en HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-378">In the sample highlighted below, only the value of `name` parameter is HTML encoded.</span></span>

[!code-csharp[](../fundamentals/localization/sample/Localization/Controllers/BookController.cs?highlight=3,5,20&start=1&end=24)]

<span data-ttu-id="aa60f-379">**Remarque :** Vous avez généralement besoin de localiser uniquement le texte et pas le code HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-379">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="aa60f-380">Au niveau le plus bas, vous pouvez sortir `IStringLocalizerFactory` de l’[injection de dépendances](dependency-injection.md) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-380">At the lowest level, you can get `IStringLocalizerFactory` out of [Dependency Injection](dependency-injection.md):</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/TestController.cs?start=9&end=26&highlight=7-13)]

<span data-ttu-id="aa60f-381">Le code ci-dessus illustre chacune des deux méthodes de création.</span><span class="sxs-lookup"><span data-stu-id="aa60f-381">The code above demonstrates each of the two factory create methods.</span></span>

<span data-ttu-id="aa60f-382">Vous pouvez partitionner vos chaînes localisées par contrôleur, par zone ou avoir un seul conteneur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-382">You can partition your localized strings by controller, area, or have just one container.</span></span> <span data-ttu-id="aa60f-383">Dans l’exemple d’application, une classe fictive nommée `SharedResource` est utilisée pour les ressources partagées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-383">In the sample app, a dummy class named `SharedResource` is used for shared resources.</span></span>

[!code-csharp[](localization/sample/Localization/Resources/SharedResource.cs)]

<span data-ttu-id="aa60f-384">Certains développeurs utilisent la classe `Startup` pour contenir des chaînes globales ou partagées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-384">Some developers use the `Startup` class to contain global or shared strings.</span></span> <span data-ttu-id="aa60f-385">Dans l’exemple ci-dessous, les localiseurs `InfoController` et `SharedResource` sont utilisés :</span><span class="sxs-lookup"><span data-stu-id="aa60f-385">In the sample below, the `InfoController` and the `SharedResource` localizers are used:</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/InfoController.cs?range=9-26)]

## <a name="view-localization"></a><span data-ttu-id="aa60f-386">Localisation de l’affichage</span><span class="sxs-lookup"><span data-stu-id="aa60f-386">View localization</span></span>

<span data-ttu-id="aa60f-387">Le service `IViewLocalizer` fournit des chaînes localisées à une [vue](xref:mvc/views/overview).</span><span class="sxs-lookup"><span data-stu-id="aa60f-387">The `IViewLocalizer` service provides localized strings for a [view](xref:mvc/views/overview).</span></span> <span data-ttu-id="aa60f-388">La classe `ViewLocalizer` implémente cette interface et recherche l’emplacement de la ressource à partir du chemin du fichier de la vue.</span><span class="sxs-lookup"><span data-stu-id="aa60f-388">The `ViewLocalizer` class implements this interface and finds the resource location from the view file path.</span></span> <span data-ttu-id="aa60f-389">Le code suivant montre comment utiliser l’implémentation par défaut de `IViewLocalizer` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-389">The following code shows how to use the default implementation of `IViewLocalizer`:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Home/About.cshtml)]

<span data-ttu-id="aa60f-390">L’implémentation par défaut de `IViewLocalizer` recherche le fichier de ressources en fonction du nom de fichier de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-390">The default implementation of `IViewLocalizer` finds the resource file based on the view's file name.</span></span> <span data-ttu-id="aa60f-391">Il n’existe aucune option pour utiliser un fichier de ressources partagées globales.</span><span class="sxs-lookup"><span data-stu-id="aa60f-391">There's no option to use a global shared resource file.</span></span> <span data-ttu-id="aa60f-392">`ViewLocalizer`implémente le localisateur à l’aide `IHtmlLocalizer` de, donc Razor n’encode pas le code HTML de la chaîne localisée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-392">`ViewLocalizer` implements the localizer using `IHtmlLocalizer`, so Razor doesn't HTML encode the localized string.</span></span> <span data-ttu-id="aa60f-393">Vous pouvez paramétrer des chaînes de ressources pour que `IViewLocalizer` encode en HTML les paramètres, mais pas les chaînes de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-393">You can parameterize resource strings and `IViewLocalizer` will HTML encode the parameters, but not the resource string.</span></span> <span data-ttu-id="aa60f-394">Examinez le Razor balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="aa60f-394">Consider the following Razor markup:</span></span>

```cshtml
@Localizer["<i>Hello</i> <b>{0}!</b>", UserManager.GetUserName(User)]
```

<span data-ttu-id="aa60f-395">Un fichier de ressources en français peut contenir ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="aa60f-395">A French resource file could contain the following:</span></span>

| <span data-ttu-id="aa60f-396">Clé</span><span class="sxs-lookup"><span data-stu-id="aa60f-396">Key</span></span> | <span data-ttu-id="aa60f-397">Valeur</span><span class="sxs-lookup"><span data-stu-id="aa60f-397">Value</span></span> |
| ----- | ------ |
| `<i>Hello</i> <b>{0}!</b>` | `<i>Bonjour</i> <b>{0} !</b>` |

<span data-ttu-id="aa60f-398">L’affichage contient le balisage HTML provenant du fichier de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-398">The rendered view would contain the HTML markup from the resource file.</span></span>

<span data-ttu-id="aa60f-399">**Remarque :** Vous avez généralement besoin de localiser uniquement le texte et pas le code HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-399">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="aa60f-400">Pour utiliser un fichier de ressources partagées dans un affichage, injectez `IHtmlLocalizer<T>` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-400">To use a shared resource file in a view, inject `IHtmlLocalizer<T>`:</span></span>

[!code-cshtml[](../fundamentals/localization/sample/Localization/Views/Test/About.cshtml?highlight=5,12)]

## <a name="dataannotations-localization"></a><span data-ttu-id="aa60f-401">Localisation de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="aa60f-401">DataAnnotations localization</span></span>

<span data-ttu-id="aa60f-402">Les messages d’erreur DataAnnotations sont localisés avec `IStringLocalizer<T>`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-402">DataAnnotations error messages are localized with `IStringLocalizer<T>`.</span></span> <span data-ttu-id="aa60f-403">En utilisant l’option `ResourcesPath = "Resources"`, les messages d’erreur inclus dans `RegisterViewModel` peuvent être stockés dans les chemins suivants :</span><span class="sxs-lookup"><span data-stu-id="aa60f-403">Using the option `ResourcesPath = "Resources"`, the error messages in `RegisterViewModel` can be stored in either of the following paths:</span></span>

* <span data-ttu-id="aa60f-404">*Ressources/ViewModels. Account. RegisterViewModel. fr. resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-404">*Resources/ViewModels.Account.RegisterViewModel.fr.resx*</span></span>
* <span data-ttu-id="aa60f-405">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-405">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span></span>

[!code-csharp[](localization/sample/Localization/ViewModels/Account/RegisterViewModel.cs?start=9&end=26)]

<span data-ttu-id="aa60f-406">Dans ASP.NET Core MVC 1.1.0 et version supérieure, les attributs de non-validation sont localisés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-406">In ASP.NET Core MVC 1.1.0 and higher, non-validation attributes are localized.</span></span> <span data-ttu-id="aa60f-407">ASP.NET Core MVC 1.0 ne recherche **pas** de chaînes localisées pour des attributs de non-validation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-407">ASP.NET Core MVC 1.0 does **not** look up localized strings for non-validation attributes.</span></span>

<a name="one-resource-string-multiple-classes"></a>

### <a name="using-one-resource-string-for-multiple-classes"></a><span data-ttu-id="aa60f-408">Utilisation d’une seule chaîne de ressource pour plusieurs classes</span><span class="sxs-lookup"><span data-stu-id="aa60f-408">Using one resource string for multiple classes</span></span>

<span data-ttu-id="aa60f-409">Le code suivant montre comment utiliser une seule chaîne de ressource pour les attributs de validation avec plusieurs classes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-409">The following code shows how to use one resource string for validation attributes with multiple classes:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddDataAnnotationsLocalization(options => {
            options.DataAnnotationLocalizerProvider = (type, factory) =>
                factory.Create(typeof(SharedResource));
        });
}
```

<span data-ttu-id="aa60f-410">Dans le code précédent, `SharedResource` est la classe correspondant au resx où sont stockés vos messages de validation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-410">In the preceding code, `SharedResource` is the class corresponding to the resx where your validation messages are stored.</span></span> <span data-ttu-id="aa60f-411">Cette approche permet à DataAnnotations d’utiliser uniquement `SharedResource`, au lieu de la ressource de chaque classe.</span><span class="sxs-lookup"><span data-stu-id="aa60f-411">With this approach, DataAnnotations will only use `SharedResource`, rather than the resource for each class.</span></span>

## <a name="provide-localized-resources-for-the-languages-and-cultures-you-support"></a><span data-ttu-id="aa60f-412">Fournir des ressources localisées aux langues et cultures prises en charge</span><span class="sxs-lookup"><span data-stu-id="aa60f-412">Provide localized resources for the languages and cultures you support</span></span>

### <a name="supportedcultures-and-supporteduicultures"></a><span data-ttu-id="aa60f-413">SupportedCultures et SupportedUICultures</span><span class="sxs-lookup"><span data-stu-id="aa60f-413">SupportedCultures and SupportedUICultures</span></span>

<span data-ttu-id="aa60f-414">ASP.NET Core vous permet de spécifier deux valeurs de culture, `SupportedCultures` et `SupportedUICultures`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-414">ASP.NET Core allows you to specify two culture values, `SupportedCultures` and `SupportedUICultures`.</span></span> <span data-ttu-id="aa60f-415">L’objet [CultureInfo](/dotnet/api/system.globalization.cultureinfo) de `SupportedCultures` détermine les résultats des fonctions qui dépendent de la culture, comme la mise en forme des dates, de l’heure, des nombres et des devises.</span><span class="sxs-lookup"><span data-stu-id="aa60f-415">The [CultureInfo](/dotnet/api/system.globalization.cultureinfo) object for `SupportedCultures` determines the results of culture-dependent functions, such as date, time, number, and currency formatting.</span></span> <span data-ttu-id="aa60f-416">`SupportedCultures` détermine également l’ordre de tri du texte, les conventions de casse et les comparaisons de chaînes.</span><span class="sxs-lookup"><span data-stu-id="aa60f-416">`SupportedCultures` also determines the sorting order of text, casing conventions, and string comparisons.</span></span> <span data-ttu-id="aa60f-417">Consultez [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) pour plus d’informations sur la façon dont le serveur obtient la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-417">See [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) for more info on how the server gets the Culture.</span></span> <span data-ttu-id="aa60f-418">Le `SupportedUICultures` détermine les chaînes traduites (à partir des fichiers *. resx* ) qui sont recherchées par le [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span><span class="sxs-lookup"><span data-stu-id="aa60f-418">The `SupportedUICultures` determines which translated strings (from *.resx* files) are looked up by the [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span></span> <span data-ttu-id="aa60f-419">`ResourceManager` recherche simplement les chaînes propres à la culture déterminée par `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-419">The `ResourceManager` simply looks up culture-specific strings that's determined by `CurrentUICulture`.</span></span> <span data-ttu-id="aa60f-420">Chaque thread dans .NET a des objets `CurrentCulture` et `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-420">Every thread in .NET has `CurrentCulture` and `CurrentUICulture` objects.</span></span> <span data-ttu-id="aa60f-421">ASP.NET Core inspecte ces valeurs lors du rendu des fonctions qui dépendent de la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-421">ASP.NET Core inspects these values when rendering culture-dependent functions.</span></span> <span data-ttu-id="aa60f-422">Par exemple, si la culture du thread actuel a la valeur « en-US » (anglais, États-Unis), `DateTime.Now.ToLongDateString()` affiche « Thursday, February 18, 2016 », mais si `CurrentCulture` a la valeur « es-ES » (espagnol, Espagne), la sortie est « jueves, 18 de febrero de 2016 ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-422">For example, if the current thread's culture is set to "en-US" (English, United States), `DateTime.Now.ToLongDateString()` displays "Thursday, February 18, 2016", but if `CurrentCulture` is set to "es-ES" (Spanish, Spain) the output will be "jueves, 18 de febrero de 2016".</span></span>

## <a name="resource-files"></a><span data-ttu-id="aa60f-423">Fichiers de ressources</span><span class="sxs-lookup"><span data-stu-id="aa60f-423">Resource files</span></span>

<span data-ttu-id="aa60f-424">Un fichier de ressources est un mécanisme utile pour séparer les chaînes localisables du code.</span><span class="sxs-lookup"><span data-stu-id="aa60f-424">A resource file is a useful mechanism for separating localizable strings from code.</span></span> <span data-ttu-id="aa60f-425">Les chaînes traduites pour la langue non définie par défaut sont isolées dans les fichiers de ressources *. resx* .</span><span class="sxs-lookup"><span data-stu-id="aa60f-425">Translated strings for the non-default language are isolated in *.resx* resource files.</span></span> <span data-ttu-id="aa60f-426">Par exemple, vous pouvez avoir besoin de créer un fichier de ressources nommé *Welcome.es.resx* qui contient des chaînes traduites.</span><span class="sxs-lookup"><span data-stu-id="aa60f-426">For example, you might want to create Spanish resource file named *Welcome.es.resx* containing translated strings.</span></span> <span data-ttu-id="aa60f-427">« es » correspond au code de langue pour l’espagnol.</span><span class="sxs-lookup"><span data-stu-id="aa60f-427">"es" is the language code for Spanish.</span></span> <span data-ttu-id="aa60f-428">Pour créer ce fichier de ressources dans Visual Studio :</span><span class="sxs-lookup"><span data-stu-id="aa60f-428">To create this resource file in Visual Studio:</span></span>

1. <span data-ttu-id="aa60f-429">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le dossier qui contient le fichier de ressources > **Ajouter** > **Nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-429">In **Solution Explorer**, right click on the folder which will contain the resource file > **Add** > **New Item**.</span></span>

    ![Menu contextuel imbriqué : dans l’Explorateur de solutions, un menu contextuel est ouvert pour les ressources.](localization/_static/newi.png)

2. <span data-ttu-id="aa60f-432">Dans la zone **Rechercher dans les modèles installés**, entrez « ressource » et nommez le fichier.</span><span class="sxs-lookup"><span data-stu-id="aa60f-432">In the **Search installed templates** box, enter "resource" and name the file.</span></span>

    ![Boîte de dialogue Ajouter un nouvel élément](localization/_static/res.png)

3. <span data-ttu-id="aa60f-434">Entrez la valeur de la clé (chaîne native) dans la colonne **Nom** et la chaîne traduite dans la colonne **Valeur**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-434">Enter the key value (native string) in the **Name** column and the translated string in the **Value** column.</span></span>

    ![Le fichier Welcome.es.resx (le fichier de ressources Welcome pour l’espagnol) avec le mot Hello dans la colonne Nom et le mot Hola (bonjour en espagnol) dans la colonne Valeur](localization/_static/hola.png)

    <span data-ttu-id="aa60f-436">Visual Studio présente le fichier *Welcome.es.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-436">Visual Studio shows the *Welcome.es.resx* file.</span></span>

    ![L’Explorateur de solutions montrant le fichier de ressources Welcome pour l’espagnol (es)](localization/_static/se.png)

## <a name="resource-file-naming"></a><span data-ttu-id="aa60f-438">Nommage du fichier de ressources</span><span class="sxs-lookup"><span data-stu-id="aa60f-438">Resource file naming</span></span>

<span data-ttu-id="aa60f-439">Les ressources sont nommées selon le nom de type complet de leur classe moins le nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-439">Resources are named for the full type name of their class minus the assembly name.</span></span> <span data-ttu-id="aa60f-440">Par exemple, une ressource en français dans un projet dont l’assembly principal est `LocalizationWebsite.Web.dll` pour la classe `LocalizationWebsite.Web.Startup` serait nommée *Startup.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-440">For example, a French resource in a project whose main assembly is `LocalizationWebsite.Web.dll` for the class `LocalizationWebsite.Web.Startup` would be named *Startup.fr.resx*.</span></span> <span data-ttu-id="aa60f-441">Une ressource pour la classe `LocalizationWebsite.Web.Controllers.HomeController` serait nommée *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-441">A resource for the class `LocalizationWebsite.Web.Controllers.HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-442">Si l’espace de noms de votre classe ciblée n’est pas identique au nom de l’assembly, vous aurez besoin du nom de type complet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-442">If your targeted class's namespace isn't the same as the assembly name you will need the full type name.</span></span> <span data-ttu-id="aa60f-443">Par exemple, dans l’exemple de projet, une ressource pour le type `ExtraNamespace.Tools` serait nommée *ExtraNamespace.Tools.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-443">For example, in the sample project a resource for the type `ExtraNamespace.Tools` would be named *ExtraNamespace.Tools.fr.resx*.</span></span>

<span data-ttu-id="aa60f-444">Dans l’exemple de projet, la méthode `ConfigureServices` affecte à `ResourcesPath` la valeur « Resources », si bien que le chemin relatif du projet pour le fichier de ressources en français du contrôleur Home est *Resources/Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-444">In the sample project, the `ConfigureServices` method sets the `ResourcesPath` to "Resources", so the project relative path for the home controller's French resource file is *Resources/Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-445">Vous pouvez également utiliser des dossiers pour organiser les fichiers de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-445">Alternatively, you can use folders to organize resource files.</span></span> <span data-ttu-id="aa60f-446">Pour le contrôleur Home, le chemin serait *Resources/Controllers/HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-446">For the home controller, the path would be *Resources/Controllers/HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-447">Si vous n’utilisez pas l’option `ResourcesPath`, le fichier *.resx* se trouve dans le répertoire de base du projet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-447">If you don't use the `ResourcesPath` option, the *.resx* file would go in the project base directory.</span></span> <span data-ttu-id="aa60f-448">Le fichier de ressources pour `HomeController` serait nommé *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-448">The resource file for `HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-449">Le choix de l’utilisation de la convention d’affectation de noms avec des points ou un chemin dépend de la façon dont vous souhaitez organiser vos fichiers de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-449">The choice of using the dot or path naming convention depends on how you want to organize your resource files.</span></span>

| <span data-ttu-id="aa60f-450">Nom de la ressource</span><span class="sxs-lookup"><span data-stu-id="aa60f-450">Resource name</span></span> | <span data-ttu-id="aa60f-451">Affectation de noms avec des points ou un chemin</span><span class="sxs-lookup"><span data-stu-id="aa60f-451">Dot or path naming</span></span> |
| ------------   | ------------- |
| <span data-ttu-id="aa60f-452">Resources/Controllers.HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-452">Resources/Controllers.HomeController.fr.resx</span></span> | <span data-ttu-id="aa60f-453">Points</span><span class="sxs-lookup"><span data-stu-id="aa60f-453">Dot</span></span>  |
| <span data-ttu-id="aa60f-454">Resources/Controllers/HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-454">Resources/Controllers/HomeController.fr.resx</span></span>  | <span data-ttu-id="aa60f-455">Chemin d’accès</span><span class="sxs-lookup"><span data-stu-id="aa60f-455">Path</span></span> |
|    |     |

<span data-ttu-id="aa60f-456">Les fichiers de ressources utilisant `@inject IViewLocalizer` dans les Razor vues suivent un modèle similaire.</span><span class="sxs-lookup"><span data-stu-id="aa60f-456">Resource files using `@inject IViewLocalizer` in Razor views follow a similar pattern.</span></span> <span data-ttu-id="aa60f-457">Le fichier de ressources d’une vue peut être nommé selon la convention avec des points ou un chemin.</span><span class="sxs-lookup"><span data-stu-id="aa60f-457">The resource file for a view can be named using either dot naming or path naming.</span></span> Razor<span data-ttu-id="aa60f-458">les fichiers de ressources d’affichage imitent le chemin d’accès de leur fichier de vue associé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-458"> view resource files mimic the path of their associated view file.</span></span> <span data-ttu-id="aa60f-459">Si nous affectons à `ResourcesPath` la valeur « Resources », le fichier de ressources en français associé à l’affichage *Views/Home/About.cshtml* peut porter l’un des noms suivants :</span><span class="sxs-lookup"><span data-stu-id="aa60f-459">Assuming we set the `ResourcesPath` to "Resources", the French resource file associated with the *Views/Home/About.cshtml* view could be either of the following:</span></span>

* <span data-ttu-id="aa60f-460">Resources/Views/Home/About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-460">Resources/Views/Home/About.fr.resx</span></span>

* <span data-ttu-id="aa60f-461">Resources/Views.Home.About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-461">Resources/Views.Home.About.fr.resx</span></span>

<span data-ttu-id="aa60f-462">Si vous n’utilisez pas l’option `ResourcesPath`, le fichier *.resx* d’un affichage se trouve dans le même dossier que l’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-462">If you don't use the `ResourcesPath` option, the *.resx* file for a view would be located in the same folder as the view.</span></span>

### <a name="rootnamespaceattribute"></a><span data-ttu-id="aa60f-463">RootNamespaceAttribute</span><span class="sxs-lookup"><span data-stu-id="aa60f-463">RootNamespaceAttribute</span></span> 

<span data-ttu-id="aa60f-464">L’attribut [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) fournit l’espace de noms racine d’un assembly quand il est différent du nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-464">The [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) attribute provides the root namespace of an assembly when the root namespace of an assembly is different than the assembly name.</span></span> 

> [!WARNING]
> <span data-ttu-id="aa60f-465">Cela peut se produire lorsque le nom d’un projet n’est pas un identificateur .NET valide.</span><span class="sxs-lookup"><span data-stu-id="aa60f-465">This can occur when a project's name is not a valid .NET identifier.</span></span> <span data-ttu-id="aa60f-466">Par exemple, `my-project-name.csproj` utilisera l’espace de noms racine `my_project_name` et le nom de l’assembly `my-project-name` menant à cette erreur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-466">For instance `my-project-name.csproj` will use the root namespace `my_project_name` and the assembly name `my-project-name` leading to this error.</span></span> 

<span data-ttu-id="aa60f-467">Si l’espace de noms racine d’un assembly est différent du nom de l’assembly :</span><span class="sxs-lookup"><span data-stu-id="aa60f-467">If the root namespace of an assembly is different than the assembly name:</span></span>

* <span data-ttu-id="aa60f-468">La localisation ne fonctionne pas par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-468">Localization does not work by default.</span></span>
* <span data-ttu-id="aa60f-469">La localisation échoue en raison du mode de recherche des ressources dans l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-469">Localization fails due to the way resources are searched for within the assembly.</span></span> <span data-ttu-id="aa60f-470">`RootNamespace` est une valeur de build qui n’est pas accessible au processus exécutant.</span><span class="sxs-lookup"><span data-stu-id="aa60f-470">`RootNamespace` is a build-time value which is not available to the executing process.</span></span> 

<span data-ttu-id="aa60f-471">Si `RootNamespace` est différent de `AssemblyName`, incluez ce qui suit dans *AssemblyInfo.cs* (en remplaçant les valeurs des paramètres par les valeurs réelles) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-471">If the `RootNamespace` is different from the `AssemblyName`, include the following in *AssemblyInfo.cs* (with parameter values replaced with the actual values):</span></span>

```csharp
using System.Reflection;
using Microsoft.Extensions.Localization;

[assembly: ResourceLocation("Resource Folder Name")]
[assembly: RootNamespace("App Root Namespace")]
```

<span data-ttu-id="aa60f-472">Le code précédent permet de résoudre correctement les fichiers resx.</span><span class="sxs-lookup"><span data-stu-id="aa60f-472">The preceding code enables the successful resolution of resx files.</span></span>

## <a name="culture-fallback-behavior"></a><span data-ttu-id="aa60f-473">Comportement de secours pour la culture</span><span class="sxs-lookup"><span data-stu-id="aa60f-473">Culture fallback behavior</span></span>

<span data-ttu-id="aa60f-474">Lors de la recherche d’une ressource, la localisation met en œuvre une « alternative de secours pour la culture ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-474">When searching for a resource, localization engages in "culture fallback".</span></span> <span data-ttu-id="aa60f-475">Elle commence par la culture demandée : si elle est introuvable, il revient à la culture parente de cette culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-475">Starting from the requested culture, if not found, it reverts to the parent culture of that culture.</span></span> <span data-ttu-id="aa60f-476">Par ailleurs, la propriété [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) représente la culture parente.</span><span class="sxs-lookup"><span data-stu-id="aa60f-476">As an aside, the [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) property represents the parent culture.</span></span> <span data-ttu-id="aa60f-477">Cela signifie généralement (mais pas toujours) supprimer l’indicateur national du code ISO.</span><span class="sxs-lookup"><span data-stu-id="aa60f-477">This usually (but not always) means removing the national signifier from the ISO.</span></span> <span data-ttu-id="aa60f-478">Par exemple, le dialecte de l’espagnol parlé au Mexique est « es-MX ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-478">For example, the dialect of Spanish spoken in Mexico is "es-MX".</span></span> <span data-ttu-id="aa60f-479">Il contient l’espagnol parent « es », qui n’est spécifique à aucun pays.</span><span class="sxs-lookup"><span data-stu-id="aa60f-479">It has the parent "es"&mdash;Spanish non-specific to any country.</span></span>

<span data-ttu-id="aa60f-480">Imaginez que votre site reçoive une demande pour une ressource « Bienvenue » avec la culture « fr-CA ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-480">Imagine your site receives a request for a "Welcome" resource using culture "fr-CA".</span></span> <span data-ttu-id="aa60f-481">Le système de localisation recherche les ressources suivantes, dans l’ordre, et sélectionne la première correspondance :</span><span class="sxs-lookup"><span data-stu-id="aa60f-481">The localization system looks for the following resources, in order, and selects the first match:</span></span>

* <span data-ttu-id="aa60f-482">*Welcome.fr-CA.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-482">*Welcome.fr-CA.resx*</span></span>
* <span data-ttu-id="aa60f-483">*Welcome.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-483">*Welcome.fr.resx*</span></span>
* <span data-ttu-id="aa60f-484">*Welcome.resx* (si `NeutralResourcesLanguage` est « fr-CA »)</span><span class="sxs-lookup"><span data-stu-id="aa60f-484">*Welcome.resx* (if the `NeutralResourcesLanguage` is "fr-CA")</span></span>

<span data-ttu-id="aa60f-485">Par exemple, si vous supprimez l’indicateur de culture « .fr » alors que la culture définie est le français, le fichier de ressources par défaut est lu et les chaînes sont localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-485">As an example, if you remove the ".fr" culture designator and you have the culture set to French, the default resource file is read and strings are localized.</span></span> <span data-ttu-id="aa60f-486">Le gestionnaire de ressources désigne une ressource par défaut ou de secours pour les cas où rien ne correspond à la culture demandée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-486">The Resource manager designates a default or fallback resource for when nothing meets your requested culture.</span></span> <span data-ttu-id="aa60f-487">Si vous voulez simplement retourner la clé quand une ressource est manquante pour la culture demandée, vous ne devez pas avoir de fichier de ressources par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-487">If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</span></span>

### <a name="generate-resource-files-with-visual-studio"></a><span data-ttu-id="aa60f-488">Générer des fichiers de ressources avec Visual Studio</span><span class="sxs-lookup"><span data-stu-id="aa60f-488">Generate resource files with Visual Studio</span></span>

<span data-ttu-id="aa60f-489">Si vous créez un fichier de ressources dans Visual Studio sans culture dans le nom de fichier (par exemple, *Welcome.resx*), Visual Studio crée une classe C# avec une propriété pour chaque chaîne.</span><span class="sxs-lookup"><span data-stu-id="aa60f-489">If you create a resource file in Visual Studio without a culture in the file name (for example, *Welcome.resx*), Visual Studio will create a C# class with a property for each string.</span></span> <span data-ttu-id="aa60f-490">Ce n’est généralement pas ce que vous souhaitez avec ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="aa60f-490">That's usually not what you want with ASP.NET Core.</span></span> <span data-ttu-id="aa60f-491">Vous n’avez habituellement pas de fichier de ressources *.resx* par défaut (un fichier *.resx* sans nom de culture).</span><span class="sxs-lookup"><span data-stu-id="aa60f-491">You typically don't have a default *.resx* resource file (a *.resx* file without the culture name).</span></span> <span data-ttu-id="aa60f-492">Nous vous suggérons donc de créer le fichier *.resx* avec un nom de culture (par exemple, *Welcome.fr.resx*).</span><span class="sxs-lookup"><span data-stu-id="aa60f-492">We suggest you create the *.resx* file with a culture name (for example *Welcome.fr.resx*).</span></span> <span data-ttu-id="aa60f-493">Lorsque vous créez un fichier *.resx* avec un nom de culture, Visual Studio ne génère pas le fichier de classe.</span><span class="sxs-lookup"><span data-stu-id="aa60f-493">When you create a *.resx* file with a culture name, Visual Studio won't generate the class file.</span></span>

### <a name="add-other-cultures"></a><span data-ttu-id="aa60f-494">Ajouter d’autres cultures</span><span class="sxs-lookup"><span data-stu-id="aa60f-494">Add other cultures</span></span>

<span data-ttu-id="aa60f-495">Chaque combinaison de langue et de culture (autres que la langue par défaut) nécessite un fichier de ressources unique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-495">Each language and culture combination (other than the default language) requires a unique resource file.</span></span> <span data-ttu-id="aa60f-496">Vous créez des fichiers de ressources pour différentes cultures et différents paramètres régionaux en créant des fichiers de ressources dans lesquels les codes de langue ISO font partie du nom de fichier (par exemple, **en-us**, **fr-ca** et \*\* en gb\*\*).</span><span class="sxs-lookup"><span data-stu-id="aa60f-496">You create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, **en-us**, **fr-ca**, and **en-gb**).</span></span> <span data-ttu-id="aa60f-497">Ces codes ISO sont placés entre le nom de fichier et l’extension de fichier *.resx*, comme dans *Welcome.es-MX.resx* (Espagnol/Mexique).</span><span class="sxs-lookup"><span data-stu-id="aa60f-497">These ISO codes are placed between the file name and the *.resx* file extension, as in *Welcome.es-MX.resx* (Spanish/Mexico).</span></span>

## <a name="implement-a-strategy-to-select-the-languageculture-for-each-request"></a><span data-ttu-id="aa60f-498">Implémenter une stratégie de sélection de la langue/culture pour chaque requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-498">Implement a strategy to select the language/culture for each request</span></span>

### <a name="configure-localization"></a><span data-ttu-id="aa60f-499">Configurer la localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-499">Configure localization</span></span>

<span data-ttu-id="aa60f-500">La localisation est configurée dans la méthode `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-500">Localization is configured in the `Startup.ConfigureServices` method:</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet1)]

* <span data-ttu-id="aa60f-501">`AddLocalization` ajoute les services de localisation au conteneur de services.</span><span class="sxs-lookup"><span data-stu-id="aa60f-501">`AddLocalization` Adds the localization services to the services container.</span></span> <span data-ttu-id="aa60f-502">Le code ci-dessus affecte également au chemin des ressources la valeur « Resources ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-502">The code above also sets the resources path to "Resources".</span></span>

* <span data-ttu-id="aa60f-503">`AddViewLocalization` ajoute la prise en charge des fichiers d’affichage localisés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-503">`AddViewLocalization` Adds support for localized view files.</span></span> <span data-ttu-id="aa60f-504">Dans cet exemple d’affichage, la localisation se base sur le suffixe du fichier d’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-504">In this sample view localization is based on the view file suffix.</span></span> <span data-ttu-id="aa60f-505">Par exemple, « fr » dans le fichier *Index.fr.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-505">For example "fr" in the *Index.fr.cshtml* file.</span></span>

* <span data-ttu-id="aa60f-506">`AddDataAnnotationsLocalization` ajoute la prise en charge des messages de validation `DataAnnotations` localisés par le biais d’abstractions `IStringLocalizer`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-506">`AddDataAnnotationsLocalization` Adds support for localized `DataAnnotations` validation messages through `IStringLocalizer` abstractions.</span></span>

### <a name="localization-middleware"></a><span data-ttu-id="aa60f-507">Intergiciel (middleware) de localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-507">Localization middleware</span></span>

<span data-ttu-id="aa60f-508">La culture actuelle sur une requête est définie dans l’[intergiciel (middleware)](xref:fundamentals/middleware/index) de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-508">The current culture on a request is set in the localization [Middleware](xref:fundamentals/middleware/index).</span></span> <span data-ttu-id="aa60f-509">L’intergiciel de localisation est activé dans la méthode `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-509">The localization middleware is enabled in the `Startup.Configure` method.</span></span> <span data-ttu-id="aa60f-510">L’intergiciel de localisation doit être configuré avant tout intergiciel susceptible de vérifier la culture de la requête (par exemple, `app.UseMvcWithDefaultRoute()`).</span><span class="sxs-lookup"><span data-stu-id="aa60f-510">The localization middleware must be configured before any middleware which might check the request culture (for example, `app.UseMvcWithDefaultRoute()`).</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet2)]
[!INCLUDE[about the series](~/includes/code-comments-loc.md)]

<span data-ttu-id="aa60f-511">`UseRequestLocalization` initialise un objet `RequestLocalizationOptions`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-511">`UseRequestLocalization` initializes a `RequestLocalizationOptions` object.</span></span> <span data-ttu-id="aa60f-512">Sur chaque requête, la liste de `RequestCultureProvider` dans `RequestLocalizationOptions` est énumérée et le premier fournisseur capable de déterminer correctement la culture de la requête est utilisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-512">On every request the list of `RequestCultureProvider` in the `RequestLocalizationOptions` is enumerated and the first provider that can successfully determine the request culture is used.</span></span> <span data-ttu-id="aa60f-513">Les fournisseurs par défaut proviennent de la classe `RequestLocalizationOptions` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-513">The default providers come from the `RequestLocalizationOptions` class:</span></span>

1. `QueryStringRequestCultureProvider`
2. `CookieRequestCultureProvider`
3. `AcceptLanguageHeaderRequestCultureProvider`

<span data-ttu-id="aa60f-514">La liste par défaut va du plus spécifique au moins spécifique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-514">The default list goes from most specific to least specific.</span></span> <span data-ttu-id="aa60f-515">Plus loin dans l’article, nous verrons comment vous pouvez modifier l’ordre et même ajouter un fournisseur de culture personnalisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-515">Later in the article we'll see how you can change the order and even add a custom culture provider.</span></span> <span data-ttu-id="aa60f-516">Si aucun des fournisseurs ne peut déterminer la culture de la requête, `DefaultRequestCulture` est utilisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-516">If none of the providers can determine the request culture, the `DefaultRequestCulture` is used.</span></span>

### <a name="querystringrequestcultureprovider"></a><span data-ttu-id="aa60f-517">QueryStringRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="aa60f-517">QueryStringRequestCultureProvider</span></span>

<span data-ttu-id="aa60f-518">Certaines applications utilisent une chaîne de requête pour définir la [culture et la culture d’interface utilisateur](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa60f-518">Some apps will use a query string to set the [culture and UI culture](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span></span> <span data-ttu-id="aa60f-519">Pour les applications qui utilisent l’approche du cookie ou de l’en-tête Accept-Language, l’ajout d’une chaîne de requête à l’URL s’avère utile pour déboguer et tester le code.</span><span class="sxs-lookup"><span data-stu-id="aa60f-519">For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code.</span></span> <span data-ttu-id="aa60f-520">Par défaut, `QueryStringRequestCultureProvider` est inscrit en tant que premier fournisseur de localisation dans la liste `RequestCultureProvider`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-520">By default, the `QueryStringRequestCultureProvider` is registered as the first localization provider in the `RequestCultureProvider` list.</span></span> <span data-ttu-id="aa60f-521">Vous passez les paramètres de chaîne de requête `culture` et `ui-culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-521">You pass the query string parameters `culture` and `ui-culture`.</span></span> <span data-ttu-id="aa60f-522">L’exemple suivant affecte à la culture spécifique (langue et région) la valeur espagnol/Mexique :</span><span class="sxs-lookup"><span data-stu-id="aa60f-522">The following example sets the specific culture (language and region) to Spanish/Mexico:</span></span>

   `http://localhost:5000/?culture=es-MX&ui-culture=es-MX`

<span data-ttu-id="aa60f-523">Si vous passez uniquement l’une des deux (`culture` ou `ui-culture`), le fournisseur de chaîne de requête définit les deux valeurs à l’aide de celle que vous avez passée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-523">If you only pass in one of the two (`culture` or `ui-culture`), the query string provider will set both values using the one you passed in.</span></span> <span data-ttu-id="aa60f-524">Par exemple, la seule définition de la culture définit à la fois `Culture` et `UICulture` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-524">For example, setting just the culture will set both the `Culture` and the `UICulture`:</span></span>

   `http://localhost:5000/?culture=es-MX`

### <a name="cookierequestcultureprovider"></a><span data-ttu-id="aa60f-525">CookieRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="aa60f-525">CookieRequestCultureProvider</span></span>

<span data-ttu-id="aa60f-526">Les applications de production fournissent souvent un mécanisme permettant de définir la culture à l’aide du cookie de culture ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="aa60f-526">Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie.</span></span> <span data-ttu-id="aa60f-527">Utilisez la méthode `MakeCookieValue` pour créer un cookie.</span><span class="sxs-lookup"><span data-stu-id="aa60f-527">Use the `MakeCookieValue` method to create a cookie.</span></span>

<span data-ttu-id="aa60f-528">`CookieRequestCultureProvider` `DefaultCookieName` Retourne le nom de cookie par défaut utilisé pour suivre les informations de culture préférées de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-528">The `CookieRequestCultureProvider` `DefaultCookieName` returns the default cookie name used to track the user's preferred culture information.</span></span> <span data-ttu-id="aa60f-529">Le nom du cookie par défaut est `.AspNetCore.Culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-529">The default cookie name is `.AspNetCore.Culture`.</span></span>

<span data-ttu-id="aa60f-530">Le format du cookie est `c=%LANGCODE%|uic=%LANGCODE%`, où `c` correspond à `Culture` et `uic` correspond à `UICulture`, par exemple :</span><span class="sxs-lookup"><span data-stu-id="aa60f-530">The cookie format is `c=%LANGCODE%|uic=%LANGCODE%`, where `c` is `Culture` and `uic` is `UICulture`, for example:</span></span>

    c=en-UK|uic=en-US

<span data-ttu-id="aa60f-531">Si vous spécifiez uniquement les informations de culture ou la culture d’interface utilisateur, la culture spécifiée est utilisée à la fois pour les informations de culture et la culture d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-531">If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</span></span>

### <a name="the-accept-language-http-header"></a><span data-ttu-id="aa60f-532">En-tête HTTP Accept-Language</span><span class="sxs-lookup"><span data-stu-id="aa60f-532">The Accept-Language HTTP header</span></span>

<span data-ttu-id="aa60f-533">L’[en-tête Accept-Language](https://www.w3.org/International/questions/qa-accept-lang-locales) peut être défini dans la plupart des navigateurs et a d’abord été conçu pour spécifier la langue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-533">The [Accept-Language header](https://www.w3.org/International/questions/qa-accept-lang-locales) is settable in most browsers and was originally intended to specify the user's language.</span></span> <span data-ttu-id="aa60f-534">Ce paramètre indique ce que le navigateur doit envoyer ou ce dont il a hérité du système d’exploitation sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="aa60f-534">This setting indicates what the browser has been set to send or has inherited from the underlying operating system.</span></span> <span data-ttu-id="aa60f-535">L’en-tête HTTP Accept-Language d’une requête de navigateur n’est pas un moyen infaillible de détecter la langue préférée de l’utilisateur (consultez [Définition des préférences de langue dans un navigateur](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span><span class="sxs-lookup"><span data-stu-id="aa60f-535">The Accept-Language HTTP header from a browser request isn't an infallible way to detect the user's preferred language (see [Setting language preferences in a browser](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span></span> <span data-ttu-id="aa60f-536">Une application de production doit inclure un moyen permettant à l’utilisateur de personnaliser son choix de culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-536">A production app should include a way for a user to customize their choice of culture.</span></span>

### <a name="set-the-accept-language-http-header-in-ie"></a><span data-ttu-id="aa60f-537">Définir l’en-tête HTTP Accept-Language dans IE</span><span class="sxs-lookup"><span data-stu-id="aa60f-537">Set the Accept-Language HTTP header in IE</span></span>

1. <span data-ttu-id="aa60f-538">À partir de l’icône d’engrenage, appuyez sur **Options Internet**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-538">From the gear icon, tap **Internet Options**.</span></span>

2. <span data-ttu-id="aa60f-539">Appuyez sur **Langues**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-539">Tap **Languages**.</span></span>

    ![Options Internet](localization/_static/lang.png)

3. <span data-ttu-id="aa60f-541">Appuyez sur **Définir les langues**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-541">Tap **Set Language Preferences**.</span></span>

4. <span data-ttu-id="aa60f-542">Appuyez sur **Ajouter une langue**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-542">Tap **Add a language**.</span></span>

5. <span data-ttu-id="aa60f-543">Ajoutez la langue.</span><span class="sxs-lookup"><span data-stu-id="aa60f-543">Add the language.</span></span>

6. <span data-ttu-id="aa60f-544">Tapez sur la langue, puis sur **Monter**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-544">Tap the language, then tap **Move Up**.</span></span>

### <a name="use-a-custom-provider"></a><span data-ttu-id="aa60f-545">Utiliser un fournisseur personnalisé</span><span class="sxs-lookup"><span data-stu-id="aa60f-545">Use a custom provider</span></span>

<span data-ttu-id="aa60f-546">Supposons que vous vouliez permettre à vos clients de stocker leur langue et leur culture dans vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="aa60f-546">Suppose you want to let your customers store their language and culture in your databases.</span></span> <span data-ttu-id="aa60f-547">Vous pouvez écrire un fournisseur pour rechercher ces valeurs pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-547">You could write a provider to look up these values for the user.</span></span> <span data-ttu-id="aa60f-548">Le code suivant illustre l’ajout d’un fournisseur personnalisé :</span><span class="sxs-lookup"><span data-stu-id="aa60f-548">The following code shows how to add a custom provider:</span></span>

```csharp
private const string enUSCulture = "en-US";

services.Configure<RequestLocalizationOptions>(options =>
{
    var supportedCultures = new[]
    {
        new CultureInfo(enUSCulture),
        new CultureInfo("fr")
    };

    options.DefaultRequestCulture = new RequestCulture(culture: enUSCulture, uiCulture: enUSCulture);
    options.SupportedCultures = supportedCultures;
    options.SupportedUICultures = supportedCultures;

    options.RequestCultureProviders.Insert(0, new CustomRequestCultureProvider(async context =>
    {
        // My custom request culture logic
        return new ProviderCultureResult("en");
    }));
});
```

<span data-ttu-id="aa60f-549">Utilisez `RequestLocalizationOptions` pour ajouter ou supprimer des fournisseurs de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-549">Use `RequestLocalizationOptions` to add or remove localization providers.</span></span>

### <a name="set-the-culture-programmatically"></a><span data-ttu-id="aa60f-550">Définir la culture par programmation</span><span class="sxs-lookup"><span data-stu-id="aa60f-550">Set the culture programmatically</span></span>

<span data-ttu-id="aa60f-551">Cet exemple de projet **Localization.StarterWeb** sur [GitHub](https://github.com/aspnet/entropy) contient l’interface utilisateur permettant de définir `Culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-551">This sample **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) contains UI to set the `Culture`.</span></span> <span data-ttu-id="aa60f-552">Le fichier *Views/Shared/_SelectLanguagePartial.cshtml* vous permet de sélectionner la culture dans la liste des cultures prises en charge :</span><span class="sxs-lookup"><span data-stu-id="aa60f-552">The *Views/Shared/_SelectLanguagePartial.cshtml* file allows you to select the culture from the list of supported cultures:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_SelectLanguagePartial.cshtml)]

<span data-ttu-id="aa60f-553">Le fichier *Views/Shared/_SelectLanguagePartial.cshtml* est ajouté à la section `footer` du fichier de disposition afin d’être disponible pour tous les affichages :</span><span class="sxs-lookup"><span data-stu-id="aa60f-553">The *Views/Shared/_SelectLanguagePartial.cshtml* file is added to the `footer` section of the layout file so it will be available to all views:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_Layout.cshtml?range=43-56&highlight=10)]

<span data-ttu-id="aa60f-554">La méthode `SetLanguage` définit le cookie de la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-554">The `SetLanguage` method sets the culture cookie.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/HomeController.cs?range=57-67)]

<span data-ttu-id="aa60f-555">Vous ne pouvez pas incorporer *_SelectLanguagePartial.cshtml* dans l’exemple de code de ce projet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-555">You can't plug in the *_SelectLanguagePartial.cshtml* to sample code for this project.</span></span> <span data-ttu-id="aa60f-556">Le projet **Localization. StarterWeb** sur [GitHub](https://github.com/aspnet/entropy) contient du code pour transmettre le `RequestLocalizationOptions` à un en Razor partiel via le conteneur d' [injection de dépendance](dependency-injection.md) .</span><span class="sxs-lookup"><span data-stu-id="aa60f-556">The **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) has code to flow the `RequestLocalizationOptions` to a Razor partial through the [Dependency Injection](dependency-injection.md) container.</span></span>

## <a name="model-binding-route-data-and-query-strings"></a><span data-ttu-id="aa60f-557">Données d’itinéraire de liaison de modèle et chaînes de requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-557">Model binding route data and query strings</span></span>

<span data-ttu-id="aa60f-558">Consultez [comportement de la globalisation des données de routage de liaison de modèle et des chaînes de requête](xref:mvc/models/model-binding#glob).</span><span class="sxs-lookup"><span data-stu-id="aa60f-558">See [Globalization behavior of model binding route data and query strings](xref:mvc/models/model-binding#glob).</span></span>

## <a name="globalization-and-localization-terms"></a><span data-ttu-id="aa60f-559">Terminologie de la globalisation et de la localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-559">Globalization and localization terms</span></span>

<span data-ttu-id="aa60f-560">Le processus de localisation de votre application exige également une compréhension élémentaire des jeux de caractères appropriés couramment utilisés dans le développement de logiciels moderne ainsi qu’une compréhension des problèmes qui y sont associés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-560">The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them.</span></span> <span data-ttu-id="aa60f-561">Bien que tous les ordinateurs stockent le texte sous forme de nombres (codes), les différents systèmes stockent ce même texte en utilisant des nombres différents.</span><span class="sxs-lookup"><span data-stu-id="aa60f-561">Although all computers store text as numbers (codes), different systems store the same text using different numbers.</span></span> <span data-ttu-id="aa60f-562">Le processus de localisation consiste à traduire l’interface utilisateur de l’application pour une culture/des paramètres régionaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-562">The localization process refers to translating the app user interface (UI) for a specific culture/locale.</span></span>

<span data-ttu-id="aa60f-563">L’[adaptabilité](/dotnet/standard/globalization-localization/localizability-review) est un processus intermédiaire permettant de vérifier qu’une application globalisée est prête à être localisée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-563">[Localizability](/dotnet/standard/globalization-localization/localizability-review) is an intermediate process for verifying that a globalized app is ready for localization.</span></span>

<span data-ttu-id="aa60f-564">Le format [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) du nom de la culture est `<languagecode2>-<country/regioncode2>`, où `<languagecode2>` correspond au code de la langue et `<country/regioncode2>` au code de la sous-culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-564">The [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) format for the culture name is `<languagecode2>-<country/regioncode2>`, where `<languagecode2>` is the language code and `<country/regioncode2>` is the subculture code.</span></span> <span data-ttu-id="aa60f-565">Par exemple, `es-CL` pour l’espagnol (Chili), `en-US` pour l’anglais (États-Unis) et `en-AU` pour l’anglais (Australie).</span><span class="sxs-lookup"><span data-stu-id="aa60f-565">For example, `es-CL` for Spanish (Chile), `en-US` for English (United States), and `en-AU` for English (Australia).</span></span> <span data-ttu-id="aa60f-566">Le format [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) est la combinaison d’un code de culture à deux lettres minuscules de norme ISO 639 associé à une langue et d’un code de sous-culture à deux lettres majuscules de norme ISO 3166 associé à un pays ou une région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-566">[RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.</span></span> <span data-ttu-id="aa60f-567">Consultez [Nom de culture de la langue](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span><span class="sxs-lookup"><span data-stu-id="aa60f-567">See [Language Culture Name](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span></span>

<span data-ttu-id="aa60f-568">L’internationalisation est souvent abrégée par « I18N ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-568">Internationalization is often abbreviated to "I18N".</span></span> <span data-ttu-id="aa60f-569">Cette abréviation prend les première et dernière lettres du mot ainsi que le nombre de lettres entre elles, 18 représentant ainsi le nombre de lettres le « I » initial et le « N » final.</span><span class="sxs-lookup"><span data-stu-id="aa60f-569">The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first "I" and the last "N".</span></span> <span data-ttu-id="aa60f-570">Il en va de même pour la globalisation (G11N) et la localisation (L10N).</span><span class="sxs-lookup"><span data-stu-id="aa60f-570">The same applies to Globalization (G11N), and Localization (L10N).</span></span>

<span data-ttu-id="aa60f-571">Termes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-571">Terms:</span></span>

* <span data-ttu-id="aa60f-572">Globalisation (G11N) : Processus permettant de faire prendre en charge différentes langues et régions à une application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-572">Globalization (G11N): The process of making an app support different languages and regions.</span></span>
* <span data-ttu-id="aa60f-573">Localisation (L10N) : Processus permettant de personnaliser une application pour une langue et une région données.</span><span class="sxs-lookup"><span data-stu-id="aa60f-573">Localization (L10N): The process of customizing an app for a given language and region.</span></span>
* <span data-ttu-id="aa60f-574">Internationalisation (I18N) : Décrit à la fois la globalisation et la localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-574">Internationalization (I18N): Describes both globalization and localization.</span></span>
* <span data-ttu-id="aa60f-575">Culture : Correspond à une langue et éventuellement à une région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-575">Culture: It's a language and, optionally, a region.</span></span>
* <span data-ttu-id="aa60f-576">Culture neutre : Culture dont la langue est spécifiée, mais pas la région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-576">Neutral culture: A culture that has a specified language, but not a region.</span></span> <span data-ttu-id="aa60f-577">(Exemples : « en », « es ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-577">(for example "en", "es")</span></span>
* <span data-ttu-id="aa60f-578">Culture spécifique : Culture dont la langue et la région sont spécifiées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-578">Specific culture: A culture that has a specified language and region.</span></span> <span data-ttu-id="aa60f-579">(Exemples : « en-US », « en-GB », « es-CL ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-579">(for example "en-US", "en-GB", "es-CL")</span></span>
* <span data-ttu-id="aa60f-580">Culture parent : Culture neutre qui contient une culture spécifique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-580">Parent culture: The neutral culture that contains a specific culture.</span></span> <span data-ttu-id="aa60f-581">(Exemple : « en » est la culture parent de « en-US » et « en-GB ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-581">(for example, "en" is the parent culture of "en-US" and "en-GB")</span></span>
* <span data-ttu-id="aa60f-582">Paramètres régionaux : Synonyme de culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-582">Locale: A locale is the same as a culture.</span></span>

[!INCLUDE[](~/includes/localization/currency.md)]

## <a name="additional-resources"></a><span data-ttu-id="aa60f-583">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="aa60f-583">Additional resources</span></span>

* <xref:fundamentals/troubleshoot-aspnet-core-localization>
* <span data-ttu-id="aa60f-584">[Projet Localization.StarterWeb](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) utilisé dans l’article.</span><span class="sxs-lookup"><span data-stu-id="aa60f-584">[Localization.StarterWeb project](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) used in the article.</span></span>
* [<span data-ttu-id="aa60f-585">Internationalisation et localisation d’applications .NET</span><span class="sxs-lookup"><span data-stu-id="aa60f-585">Globalizing and localizing .NET applications</span></span>](/dotnet/standard/globalization-localization/index)
* [<span data-ttu-id="aa60f-586">Ressources dans les fichiers. resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-586">Resources in .resx Files</span></span>](/dotnet/framework/resources/working-with-resx-files-programmatically)
* [<span data-ttu-id="aa60f-587">Kit de ressources pour application multilingue Microsoft</span><span class="sxs-lookup"><span data-stu-id="aa60f-587">Microsoft Multilingual App Toolkit</span></span>](https://marketplace.visualstudio.com/items?itemName=MultilingualAppToolkit.MultilingualAppToolkit-18308)
* [<span data-ttu-id="aa60f-588">Localisation et classes génériques</span><span class="sxs-lookup"><span data-stu-id="aa60f-588">Localization & Generics</span></span>](http://hishambinateya.com/localization-and-generics)

::: moniker-end

<!-- ASP.NET Core 5.x starts here -->
::: moniker range="> aspnetcore-3.1"

<span data-ttu-id="aa60f-589">Par [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/) et [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span><span class="sxs-lookup"><span data-stu-id="aa60f-589">By [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/), and [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span></span>

<span data-ttu-id="aa60f-590">Un site Web multilingue permet au site d’atteindre un public plus vaste.</span><span class="sxs-lookup"><span data-stu-id="aa60f-590">A multilingual website allows the site to reach a wider audience.</span></span> <span data-ttu-id="aa60f-591">ASP.NET Core offre des services et des intergiciels (middleware) de traduction dans différentes langues et cultures.</span><span class="sxs-lookup"><span data-stu-id="aa60f-591">ASP.NET Core provides services and middleware for localizing into different languages and cultures.</span></span>

<span data-ttu-id="aa60f-592">L’internationalisation implique la [globalisation](/dotnet/api/system.globalization) et la [localisation](/dotnet/standard/globalization-localization/localization).</span><span class="sxs-lookup"><span data-stu-id="aa60f-592">Internationalization involves [Globalization](/dotnet/api/system.globalization) and [Localization](/dotnet/standard/globalization-localization/localization).</span></span> <span data-ttu-id="aa60f-593">La globalisation est le processus de conception d’applications qui prennent en charge des cultures différentes.</span><span class="sxs-lookup"><span data-stu-id="aa60f-593">Globalization is the process of designing apps that support different cultures.</span></span> <span data-ttu-id="aa60f-594">La globalisation ajoute la prise en charge de l’entrée, de l’affichage et de la sortie d’un ensemble défini de jeux de caractères liés à des zones géographiques spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-594">Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</span></span>

<span data-ttu-id="aa60f-595">La localisation est le processus d’adaptation d’une application globalisée, dont vous avez déjà traitée l’adaptabilité, à une culture/des paramètres régionaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-595">Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.</span></span> <span data-ttu-id="aa60f-596">Pour plus d’informations, consultez **Terminologie de la globalisation et de la localisation** à la fin du présent document.</span><span class="sxs-lookup"><span data-stu-id="aa60f-596">For more information see **Globalization and localization terms** near the end of this document.</span></span>

<span data-ttu-id="aa60f-597">La localisation d’une application implique les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-597">App localization involves the following:</span></span>

1. <span data-ttu-id="aa60f-598">Rendre le contenu de l’application localisable</span><span class="sxs-lookup"><span data-stu-id="aa60f-598">Make the app's content localizable</span></span>
1. <span data-ttu-id="aa60f-599">Fournir des ressources localisées aux langues et cultures prises en charge</span><span class="sxs-lookup"><span data-stu-id="aa60f-599">Provide localized resources for the languages and cultures you support</span></span>
1. <span data-ttu-id="aa60f-600">Implémenter une stratégie de sélection de la langue/culture pour chaque requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-600">Implement a strategy to select the language/culture for each request</span></span>

<span data-ttu-id="aa60f-601">[Afficher ou télécharger l’exemple de code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([procédure de téléchargement](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="aa60f-601">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="make-the-apps-content-localizable"></a><span data-ttu-id="aa60f-602">Rendre le contenu de l’application localisable</span><span class="sxs-lookup"><span data-stu-id="aa60f-602">Make the app's content localizable</span></span>

<span data-ttu-id="aa60f-603"><xref:Microsoft.Extensions.Localization.IStringLocalizer>et <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> ont été conçus pour améliorer la productivité lors du développement d’applications localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-603"><xref:Microsoft.Extensions.Localization.IStringLocalizer> and <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> were architected to improve productivity when developing localized apps.</span></span> <span data-ttu-id="aa60f-604">`IStringLocalizer`utilise <xref:System.Resources.ResourceManager> et <xref:System.Resources.ResourceReader> pour fournir des ressources spécifiques à la culture au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="aa60f-604">`IStringLocalizer` uses the <xref:System.Resources.ResourceManager> and <xref:System.Resources.ResourceReader> to provide culture-specific resources at run time.</span></span> <span data-ttu-id="aa60f-605">L’interface possède un indexeur et un `IEnumerable` pour retourner des chaînes localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-605">The interface has an indexer and an `IEnumerable` for returning localized strings.</span></span> <span data-ttu-id="aa60f-606">`IStringLocalizer`ne nécessite pas le stockage des chaînes de langue par défaut dans un fichier de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-606">`IStringLocalizer` doesn't require storing the default language strings in a resource file.</span></span> <span data-ttu-id="aa60f-607">Vous pouvez développer une application ciblée pour la localisation sans avoir besoin de créer des fichiers de ressources au tout début du développement.</span><span class="sxs-lookup"><span data-stu-id="aa60f-607">You can develop an app targeted for localization and not need to create resource files early in development.</span></span> <span data-ttu-id="aa60f-608">Le code ci-dessous montre comment inclure dans un wrapper la chaîne « About Title » à des fins de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-608">The code below shows how to wrap the string "About Title" for localization.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/AboutController.cs)]

<span data-ttu-id="aa60f-609">Dans le code précédent, l' `IStringLocalizer<T>` implémentation provient de l' [injection de dépendances](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="aa60f-609">In the preceding code, the `IStringLocalizer<T>` implementation comes from [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="aa60f-610">Si la valeur localisée de « About Title » est introuvable, alors la clé de l’indexeur est retournée, autrement dit, la chaîne « About Title ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-610">If the localized value of "About Title" isn't found, then the indexer key is returned, that is, the string "About Title".</span></span> <span data-ttu-id="aa60f-611">Vous pouvez laisser les chaînes littérales de la langue par défaut dans l’application et les inclure dans un wrapper dans le localisateur, afin de pouvoir vous concentrer sur le développement de l’application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-611">You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app.</span></span> <span data-ttu-id="aa60f-612">Vous développez votre application avec votre langue par défaut et vous la préparez à l’étape de localisation sans créer au préalable un fichier de ressources par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-612">You develop your app with your default language and prepare it for the localization step without first creating a default resource file.</span></span> <span data-ttu-id="aa60f-613">Vous pouvez également utiliser l’approche traditionnelle et fournir une clé pour récupérer la chaîne de la langue par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-613">Alternatively, you can use the traditional approach and provide a key to retrieve the default language string.</span></span> <span data-ttu-id="aa60f-614">Pour de nombreux développeurs, le nouveau workflow qui n’inclut pas de fichier *.resx* de langue par défaut et qui consiste à simplement inclure dans un wrapper les littéraux de chaîne permet de réduire la surcharge de la localisation d’une application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-614">For many developers the new workflow of not having a default language *.resx* file and simply wrapping the string literals can reduce the overhead of localizing an app.</span></span> <span data-ttu-id="aa60f-615">D’autres développeurs préfèrent le workflow traditionnel, car il facilite l’utilisation de longs littéraux de chaîne ainsi que la mise à jour des chaînes localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-615">Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</span></span>

<span data-ttu-id="aa60f-616">Utilisez l’implémentation de `IHtmlLocalizer<T>` pour les ressources qui contiennent du HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-616">Use the `IHtmlLocalizer<T>` implementation for resources that contain HTML.</span></span> <span data-ttu-id="aa60f-617">`IHtmlLocalizer` encode en HTML les arguments formatés dans la chaîne de ressource, mais pas la chaîne de ressource elle-même.</span><span class="sxs-lookup"><span data-stu-id="aa60f-617">`IHtmlLocalizer` HTML encodes arguments that are formatted in the resource string, but doesn't HTML encode the resource string itself.</span></span> <span data-ttu-id="aa60f-618">Dans l’exemple mis en surbrillance ci-dessous, seule la valeur du paramètre `name` est encodé en HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-618">In the sample highlighted below, only the value of `name` parameter is HTML encoded.</span></span>

[!code-csharp[](../fundamentals/localization/sample/Localization/Controllers/BookController.cs?highlight=3,5,20&start=1&end=24)]

<span data-ttu-id="aa60f-619">**Remarque :** Vous avez généralement besoin de localiser uniquement le texte et pas le code HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-619">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="aa60f-620">Au niveau le plus bas, vous pouvez sortir `IStringLocalizerFactory` de l’[injection de dépendances](dependency-injection.md) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-620">At the lowest level, you can get `IStringLocalizerFactory` out of [Dependency Injection](dependency-injection.md):</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/TestController.cs?start=9&end=26&highlight=7-13)]

<span data-ttu-id="aa60f-621">Le code ci-dessus illustre chacune des deux méthodes de création.</span><span class="sxs-lookup"><span data-stu-id="aa60f-621">The code above demonstrates each of the two factory create methods.</span></span>

<span data-ttu-id="aa60f-622">Vous pouvez partitionner vos chaînes localisées par contrôleur, par zone ou avoir un seul conteneur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-622">You can partition your localized strings by controller, area, or have just one container.</span></span> <span data-ttu-id="aa60f-623">Dans l’exemple d’application, une classe fictive nommée `SharedResource` est utilisée pour les ressources partagées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-623">In the sample app, a dummy class named `SharedResource` is used for shared resources.</span></span>

[!code-csharp[](localization/sample/Localization/Resources/SharedResource.cs)]

<span data-ttu-id="aa60f-624">Certains développeurs utilisent la classe `Startup` pour contenir des chaînes globales ou partagées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-624">Some developers use the `Startup` class to contain global or shared strings.</span></span> <span data-ttu-id="aa60f-625">Dans l’exemple ci-dessous, les localiseurs `InfoController` et `SharedResource` sont utilisés :</span><span class="sxs-lookup"><span data-stu-id="aa60f-625">In the sample below, the `InfoController` and the `SharedResource` localizers are used:</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/InfoController.cs?range=9-26)]

## <a name="view-localization"></a><span data-ttu-id="aa60f-626">Localisation de l’affichage</span><span class="sxs-lookup"><span data-stu-id="aa60f-626">View localization</span></span>

<span data-ttu-id="aa60f-627">Le service `IViewLocalizer` fournit des chaînes localisées à une [vue](xref:mvc/views/overview).</span><span class="sxs-lookup"><span data-stu-id="aa60f-627">The `IViewLocalizer` service provides localized strings for a [view](xref:mvc/views/overview).</span></span> <span data-ttu-id="aa60f-628">La classe `ViewLocalizer` implémente cette interface et recherche l’emplacement de la ressource à partir du chemin du fichier de la vue.</span><span class="sxs-lookup"><span data-stu-id="aa60f-628">The `ViewLocalizer` class implements this interface and finds the resource location from the view file path.</span></span> <span data-ttu-id="aa60f-629">Le code suivant montre comment utiliser l’implémentation par défaut de `IViewLocalizer` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-629">The following code shows how to use the default implementation of `IViewLocalizer`:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Home/About.cshtml)]

<span data-ttu-id="aa60f-630">L’implémentation par défaut de `IViewLocalizer` recherche le fichier de ressources en fonction du nom de fichier de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-630">The default implementation of `IViewLocalizer` finds the resource file based on the view's file name.</span></span> <span data-ttu-id="aa60f-631">Il n’existe aucune option pour utiliser un fichier de ressources partagées globales.</span><span class="sxs-lookup"><span data-stu-id="aa60f-631">There's no option to use a global shared resource file.</span></span> <span data-ttu-id="aa60f-632">`ViewLocalizer`implémente le localisateur à l’aide `IHtmlLocalizer` de, donc Razor n’encode pas le code HTML de la chaîne localisée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-632">`ViewLocalizer` implements the localizer using `IHtmlLocalizer`, so Razor doesn't HTML encode the localized string.</span></span> <span data-ttu-id="aa60f-633">Vous pouvez paramétrer des chaînes de ressources pour que `IViewLocalizer` encode en HTML les paramètres, mais pas les chaînes de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-633">You can parameterize resource strings and `IViewLocalizer` will HTML encode the parameters, but not the resource string.</span></span> <span data-ttu-id="aa60f-634">Examinez le Razor balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="aa60f-634">Consider the following Razor markup:</span></span>

```cshtml
@Localizer["<i>Hello</i> <b>{0}!</b>", UserManager.GetUserName(User)]
```

<span data-ttu-id="aa60f-635">Un fichier de ressources en français peut contenir ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="aa60f-635">A French resource file could contain the following:</span></span>

| <span data-ttu-id="aa60f-636">Clé</span><span class="sxs-lookup"><span data-stu-id="aa60f-636">Key</span></span> | <span data-ttu-id="aa60f-637">Valeur</span><span class="sxs-lookup"><span data-stu-id="aa60f-637">Value</span></span> |
| ----- | ------ |
| `<i>Hello</i> <b>{0}!</b>` | `<i>Bonjour</i> <b>{0} !</b>` |

<span data-ttu-id="aa60f-638">L’affichage contient le balisage HTML provenant du fichier de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-638">The rendered view would contain the HTML markup from the resource file.</span></span>

<span data-ttu-id="aa60f-639">**Remarque :** Vous avez généralement besoin de localiser uniquement le texte et pas le code HTML.</span><span class="sxs-lookup"><span data-stu-id="aa60f-639">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="aa60f-640">Pour utiliser un fichier de ressources partagées dans un affichage, injectez `IHtmlLocalizer<T>` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-640">To use a shared resource file in a view, inject `IHtmlLocalizer<T>`:</span></span>

[!code-cshtml[](../fundamentals/localization/sample/Localization/Views/Test/About.cshtml?highlight=5,12)]

## <a name="dataannotations-localization"></a><span data-ttu-id="aa60f-641">Localisation de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="aa60f-641">DataAnnotations localization</span></span>

<span data-ttu-id="aa60f-642">Les messages d’erreur DataAnnotations sont localisés avec `IStringLocalizer<T>`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-642">DataAnnotations error messages are localized with `IStringLocalizer<T>`.</span></span> <span data-ttu-id="aa60f-643">En utilisant l’option `ResourcesPath = "Resources"`, les messages d’erreur inclus dans `RegisterViewModel` peuvent être stockés dans les chemins suivants :</span><span class="sxs-lookup"><span data-stu-id="aa60f-643">Using the option `ResourcesPath = "Resources"`, the error messages in `RegisterViewModel` can be stored in either of the following paths:</span></span>

* <span data-ttu-id="aa60f-644">*Ressources/ViewModels. Account. RegisterViewModel. fr. resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-644">*Resources/ViewModels.Account.RegisterViewModel.fr.resx*</span></span>
* <span data-ttu-id="aa60f-645">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-645">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span></span>

[!code-csharp[](localization/sample/Localization/ViewModels/Account/RegisterViewModel.cs?start=9&end=26)]

<span data-ttu-id="aa60f-646">Dans ASP.NET Core MVC 1.1.0 et version supérieure, les attributs de non-validation sont localisés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-646">In ASP.NET Core MVC 1.1.0 and higher, non-validation attributes are localized.</span></span> <span data-ttu-id="aa60f-647">ASP.NET Core MVC 1.0 ne recherche **pas** de chaînes localisées pour des attributs de non-validation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-647">ASP.NET Core MVC 1.0 does **not** look up localized strings for non-validation attributes.</span></span>

<a name="one-resource-string-multiple-classes"></a>

### <a name="using-one-resource-string-for-multiple-classes"></a><span data-ttu-id="aa60f-648">Utilisation d’une seule chaîne de ressource pour plusieurs classes</span><span class="sxs-lookup"><span data-stu-id="aa60f-648">Using one resource string for multiple classes</span></span>

<span data-ttu-id="aa60f-649">Le code suivant montre comment utiliser une seule chaîne de ressource pour les attributs de validation avec plusieurs classes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-649">The following code shows how to use one resource string for validation attributes with multiple classes:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddDataAnnotationsLocalization(options => {
            options.DataAnnotationLocalizerProvider = (type, factory) =>
                factory.Create(typeof(SharedResource));
        });
}
```

<span data-ttu-id="aa60f-650">Dans le code précédent, `SharedResource` est la classe correspondant au resx où sont stockés vos messages de validation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-650">In the preceding code, `SharedResource` is the class corresponding to the resx where your validation messages are stored.</span></span> <span data-ttu-id="aa60f-651">Cette approche permet à DataAnnotations d’utiliser uniquement `SharedResource`, au lieu de la ressource de chaque classe.</span><span class="sxs-lookup"><span data-stu-id="aa60f-651">With this approach, DataAnnotations will only use `SharedResource`, rather than the resource for each class.</span></span>

## <a name="provide-localized-resources-for-the-languages-and-cultures-you-support"></a><span data-ttu-id="aa60f-652">Fournir des ressources localisées aux langues et cultures prises en charge</span><span class="sxs-lookup"><span data-stu-id="aa60f-652">Provide localized resources for the languages and cultures you support</span></span>

### <a name="supportedcultures-and-supporteduicultures"></a><span data-ttu-id="aa60f-653">SupportedCultures et SupportedUICultures</span><span class="sxs-lookup"><span data-stu-id="aa60f-653">SupportedCultures and SupportedUICultures</span></span>

<span data-ttu-id="aa60f-654">ASP.NET Core vous permet de spécifier deux valeurs de culture, `SupportedCultures` et `SupportedUICultures`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-654">ASP.NET Core allows you to specify two culture values, `SupportedCultures` and `SupportedUICultures`.</span></span> <span data-ttu-id="aa60f-655">L’objet [CultureInfo](/dotnet/api/system.globalization.cultureinfo) de `SupportedCultures` détermine les résultats des fonctions qui dépendent de la culture, comme la mise en forme des dates, de l’heure, des nombres et des devises.</span><span class="sxs-lookup"><span data-stu-id="aa60f-655">The [CultureInfo](/dotnet/api/system.globalization.cultureinfo) object for `SupportedCultures` determines the results of culture-dependent functions, such as date, time, number, and currency formatting.</span></span> <span data-ttu-id="aa60f-656">`SupportedCultures` détermine également l’ordre de tri du texte, les conventions de casse et les comparaisons de chaînes.</span><span class="sxs-lookup"><span data-stu-id="aa60f-656">`SupportedCultures` also determines the sorting order of text, casing conventions, and string comparisons.</span></span> <span data-ttu-id="aa60f-657">Consultez [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) pour plus d’informations sur la façon dont le serveur obtient la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-657">See [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) for more info on how the server gets the Culture.</span></span> <span data-ttu-id="aa60f-658">Le `SupportedUICultures` détermine les chaînes traduites (à partir des fichiers *. resx* ) qui sont recherchées par le [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span><span class="sxs-lookup"><span data-stu-id="aa60f-658">The `SupportedUICultures` determines which translated strings (from *.resx* files) are looked up by the [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span></span> <span data-ttu-id="aa60f-659">`ResourceManager` recherche simplement les chaînes propres à la culture déterminée par `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-659">The `ResourceManager` simply looks up culture-specific strings that's determined by `CurrentUICulture`.</span></span> <span data-ttu-id="aa60f-660">Chaque thread dans .NET a des objets `CurrentCulture` et `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-660">Every thread in .NET has `CurrentCulture` and `CurrentUICulture` objects.</span></span> <span data-ttu-id="aa60f-661">ASP.NET Core inspecte ces valeurs lors du rendu des fonctions qui dépendent de la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-661">ASP.NET Core inspects these values when rendering culture-dependent functions.</span></span> <span data-ttu-id="aa60f-662">Par exemple, si la culture du thread actuel a la valeur « en-US » (anglais, États-Unis), `DateTime.Now.ToLongDateString()` affiche « Thursday, February 18, 2016 », mais si `CurrentCulture` a la valeur « es-ES » (espagnol, Espagne), la sortie est « jueves, 18 de febrero de 2016 ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-662">For example, if the current thread's culture is set to "en-US" (English, United States), `DateTime.Now.ToLongDateString()` displays "Thursday, February 18, 2016", but if `CurrentCulture` is set to "es-ES" (Spanish, Spain) the output will be "jueves, 18 de febrero de 2016".</span></span>

## <a name="resource-files"></a><span data-ttu-id="aa60f-663">Fichiers de ressources</span><span class="sxs-lookup"><span data-stu-id="aa60f-663">Resource files</span></span>

<span data-ttu-id="aa60f-664">Un fichier de ressources est un mécanisme utile pour séparer les chaînes localisables du code.</span><span class="sxs-lookup"><span data-stu-id="aa60f-664">A resource file is a useful mechanism for separating localizable strings from code.</span></span> <span data-ttu-id="aa60f-665">Les chaînes traduites pour la langue non définie par défaut sont isolées dans les fichiers de ressources *. resx* .</span><span class="sxs-lookup"><span data-stu-id="aa60f-665">Translated strings for the non-default language are isolated in *.resx* resource files.</span></span> <span data-ttu-id="aa60f-666">Par exemple, vous pouvez avoir besoin de créer un fichier de ressources nommé *Welcome.es.resx* qui contient des chaînes traduites.</span><span class="sxs-lookup"><span data-stu-id="aa60f-666">For example, you might want to create Spanish resource file named *Welcome.es.resx* containing translated strings.</span></span> <span data-ttu-id="aa60f-667">« es » correspond au code de langue pour l’espagnol.</span><span class="sxs-lookup"><span data-stu-id="aa60f-667">"es" is the language code for Spanish.</span></span> <span data-ttu-id="aa60f-668">Pour créer ce fichier de ressources dans Visual Studio :</span><span class="sxs-lookup"><span data-stu-id="aa60f-668">To create this resource file in Visual Studio:</span></span>

1. <span data-ttu-id="aa60f-669">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le dossier qui contient le fichier de ressources > **Ajouter** > **Nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-669">In **Solution Explorer**, right click on the folder which will contain the resource file > **Add** > **New Item**.</span></span>

    ![Menu contextuel imbriqué : dans l’Explorateur de solutions, un menu contextuel est ouvert pour les ressources.](localization/_static/newi.png)

2. <span data-ttu-id="aa60f-672">Dans la zone **Rechercher dans les modèles installés**, entrez « ressource » et nommez le fichier.</span><span class="sxs-lookup"><span data-stu-id="aa60f-672">In the **Search installed templates** box, enter "resource" and name the file.</span></span>

    ![Boîte de dialogue Ajouter un nouvel élément](localization/_static/res.png)

3. <span data-ttu-id="aa60f-674">Entrez la valeur de la clé (chaîne native) dans la colonne **Nom** et la chaîne traduite dans la colonne **Valeur**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-674">Enter the key value (native string) in the **Name** column and the translated string in the **Value** column.</span></span>

    ![Le fichier Welcome.es.resx (le fichier de ressources Welcome pour l’espagnol) avec le mot Hello dans la colonne Nom et le mot Hola (bonjour en espagnol) dans la colonne Valeur](localization/_static/hola.png)

    <span data-ttu-id="aa60f-676">Visual Studio présente le fichier *Welcome.es.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-676">Visual Studio shows the *Welcome.es.resx* file.</span></span>

    ![L’Explorateur de solutions montrant le fichier de ressources Welcome pour l’espagnol (es)](localization/_static/se.png)

## <a name="resource-file-naming"></a><span data-ttu-id="aa60f-678">Nommage du fichier de ressources</span><span class="sxs-lookup"><span data-stu-id="aa60f-678">Resource file naming</span></span>

<span data-ttu-id="aa60f-679">Les ressources sont nommées selon le nom de type complet de leur classe moins le nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-679">Resources are named for the full type name of their class minus the assembly name.</span></span> <span data-ttu-id="aa60f-680">Par exemple, une ressource en français dans un projet dont l’assembly principal est `LocalizationWebsite.Web.dll` pour la classe `LocalizationWebsite.Web.Startup` serait nommée *Startup.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-680">For example, a French resource in a project whose main assembly is `LocalizationWebsite.Web.dll` for the class `LocalizationWebsite.Web.Startup` would be named *Startup.fr.resx*.</span></span> <span data-ttu-id="aa60f-681">Une ressource pour la classe `LocalizationWebsite.Web.Controllers.HomeController` serait nommée *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-681">A resource for the class `LocalizationWebsite.Web.Controllers.HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-682">Si l’espace de noms de votre classe ciblée n’est pas identique au nom de l’assembly, vous aurez besoin du nom de type complet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-682">If your targeted class's namespace isn't the same as the assembly name you will need the full type name.</span></span> <span data-ttu-id="aa60f-683">Par exemple, dans l’exemple de projet, une ressource pour le type `ExtraNamespace.Tools` serait nommée *ExtraNamespace.Tools.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-683">For example, in the sample project a resource for the type `ExtraNamespace.Tools` would be named *ExtraNamespace.Tools.fr.resx*.</span></span>

<span data-ttu-id="aa60f-684">Dans l’exemple de projet, la méthode `ConfigureServices` affecte à `ResourcesPath` la valeur « Resources », si bien que le chemin relatif du projet pour le fichier de ressources en français du contrôleur Home est *Resources/Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-684">In the sample project, the `ConfigureServices` method sets the `ResourcesPath` to "Resources", so the project relative path for the home controller's French resource file is *Resources/Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-685">Vous pouvez également utiliser des dossiers pour organiser les fichiers de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-685">Alternatively, you can use folders to organize resource files.</span></span> <span data-ttu-id="aa60f-686">Pour le contrôleur Home, le chemin serait *Resources/Controllers/HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-686">For the home controller, the path would be *Resources/Controllers/HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-687">Si vous n’utilisez pas l’option `ResourcesPath`, le fichier *.resx* se trouve dans le répertoire de base du projet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-687">If you don't use the `ResourcesPath` option, the *.resx* file would go in the project base directory.</span></span> <span data-ttu-id="aa60f-688">Le fichier de ressources pour `HomeController` serait nommé *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-688">The resource file for `HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="aa60f-689">Le choix de l’utilisation de la convention d’affectation de noms avec des points ou un chemin dépend de la façon dont vous souhaitez organiser vos fichiers de ressources.</span><span class="sxs-lookup"><span data-stu-id="aa60f-689">The choice of using the dot or path naming convention depends on how you want to organize your resource files.</span></span>

| <span data-ttu-id="aa60f-690">Nom de la ressource</span><span class="sxs-lookup"><span data-stu-id="aa60f-690">Resource name</span></span> | <span data-ttu-id="aa60f-691">Affectation de noms avec des points ou un chemin</span><span class="sxs-lookup"><span data-stu-id="aa60f-691">Dot or path naming</span></span> |
| ------------   | ------------- |
| <span data-ttu-id="aa60f-692">Resources/Controllers.HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-692">Resources/Controllers.HomeController.fr.resx</span></span> | <span data-ttu-id="aa60f-693">Points</span><span class="sxs-lookup"><span data-stu-id="aa60f-693">Dot</span></span>  |
| <span data-ttu-id="aa60f-694">Resources/Controllers/HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-694">Resources/Controllers/HomeController.fr.resx</span></span>  | <span data-ttu-id="aa60f-695">Chemin d’accès</span><span class="sxs-lookup"><span data-stu-id="aa60f-695">Path</span></span> |
|    |     |

<span data-ttu-id="aa60f-696">Les fichiers de ressources utilisant `@inject IViewLocalizer` dans les Razor vues suivent un modèle similaire.</span><span class="sxs-lookup"><span data-stu-id="aa60f-696">Resource files using `@inject IViewLocalizer` in Razor views follow a similar pattern.</span></span> <span data-ttu-id="aa60f-697">Le fichier de ressources d’une vue peut être nommé selon la convention avec des points ou un chemin.</span><span class="sxs-lookup"><span data-stu-id="aa60f-697">The resource file for a view can be named using either dot naming or path naming.</span></span> Razor<span data-ttu-id="aa60f-698">les fichiers de ressources d’affichage imitent le chemin d’accès de leur fichier de vue associé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-698"> view resource files mimic the path of their associated view file.</span></span> <span data-ttu-id="aa60f-699">Si nous affectons à `ResourcesPath` la valeur « Resources », le fichier de ressources en français associé à l’affichage *Views/Home/About.cshtml* peut porter l’un des noms suivants :</span><span class="sxs-lookup"><span data-stu-id="aa60f-699">Assuming we set the `ResourcesPath` to "Resources", the French resource file associated with the *Views/Home/About.cshtml* view could be either of the following:</span></span>

* <span data-ttu-id="aa60f-700">Resources/Views/Home/About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-700">Resources/Views/Home/About.fr.resx</span></span>

* <span data-ttu-id="aa60f-701">Resources/Views.Home.About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-701">Resources/Views.Home.About.fr.resx</span></span>

<span data-ttu-id="aa60f-702">Si vous n’utilisez pas l’option `ResourcesPath`, le fichier *.resx* d’un affichage se trouve dans le même dossier que l’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-702">If you don't use the `ResourcesPath` option, the *.resx* file for a view would be located in the same folder as the view.</span></span>

### <a name="rootnamespaceattribute"></a><span data-ttu-id="aa60f-703">RootNamespaceAttribute</span><span class="sxs-lookup"><span data-stu-id="aa60f-703">RootNamespaceAttribute</span></span> 

<span data-ttu-id="aa60f-704">L’attribut [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) fournit l’espace de noms racine d’un assembly quand il est différent du nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-704">The [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) attribute provides the root namespace of an assembly when the root namespace of an assembly is different than the assembly name.</span></span> 

> [!WARNING]
> <span data-ttu-id="aa60f-705">Cela peut se produire lorsque le nom d’un projet n’est pas un identificateur .NET valide.</span><span class="sxs-lookup"><span data-stu-id="aa60f-705">This can occur when a project's name is not a valid .NET identifier.</span></span> <span data-ttu-id="aa60f-706">Par exemple, `my-project-name.csproj` utilisera l’espace de noms racine `my_project_name` et le nom de l’assembly `my-project-name` menant à cette erreur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-706">For instance `my-project-name.csproj` will use the root namespace `my_project_name` and the assembly name `my-project-name` leading to this error.</span></span> 

<span data-ttu-id="aa60f-707">Si l’espace de noms racine d’un assembly est différent du nom de l’assembly :</span><span class="sxs-lookup"><span data-stu-id="aa60f-707">If the root namespace of an assembly is different than the assembly name:</span></span>

* <span data-ttu-id="aa60f-708">La localisation ne fonctionne pas par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-708">Localization does not work by default.</span></span>
* <span data-ttu-id="aa60f-709">La localisation échoue en raison du mode de recherche des ressources dans l’assembly.</span><span class="sxs-lookup"><span data-stu-id="aa60f-709">Localization fails due to the way resources are searched for within the assembly.</span></span> <span data-ttu-id="aa60f-710">`RootNamespace` est une valeur de build qui n’est pas accessible au processus exécutant.</span><span class="sxs-lookup"><span data-stu-id="aa60f-710">`RootNamespace` is a build-time value which is not available to the executing process.</span></span> 

<span data-ttu-id="aa60f-711">Si `RootNamespace` est différent de `AssemblyName`, incluez ce qui suit dans *AssemblyInfo.cs* (en remplaçant les valeurs des paramètres par les valeurs réelles) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-711">If the `RootNamespace` is different from the `AssemblyName`, include the following in *AssemblyInfo.cs* (with parameter values replaced with the actual values):</span></span>

```csharp
using System.Reflection;
using Microsoft.Extensions.Localization;

[assembly: ResourceLocation("Resource Folder Name")]
[assembly: RootNamespace("App Root Namespace")]
```

<span data-ttu-id="aa60f-712">Le code précédent permet de résoudre correctement les fichiers resx.</span><span class="sxs-lookup"><span data-stu-id="aa60f-712">The preceding code enables the successful resolution of resx files.</span></span>

## <a name="culture-fallback-behavior"></a><span data-ttu-id="aa60f-713">Comportement de secours pour la culture</span><span class="sxs-lookup"><span data-stu-id="aa60f-713">Culture fallback behavior</span></span>

<span data-ttu-id="aa60f-714">Lors de la recherche d’une ressource, la localisation met en œuvre une « alternative de secours pour la culture ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-714">When searching for a resource, localization engages in "culture fallback".</span></span> <span data-ttu-id="aa60f-715">Elle commence par la culture demandée : si elle est introuvable, il revient à la culture parente de cette culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-715">Starting from the requested culture, if not found, it reverts to the parent culture of that culture.</span></span> <span data-ttu-id="aa60f-716">Par ailleurs, la propriété [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) représente la culture parente.</span><span class="sxs-lookup"><span data-stu-id="aa60f-716">As an aside, the [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) property represents the parent culture.</span></span> <span data-ttu-id="aa60f-717">Cela signifie généralement (mais pas toujours) supprimer l’indicateur national du code ISO.</span><span class="sxs-lookup"><span data-stu-id="aa60f-717">This usually (but not always) means removing the national signifier from the ISO.</span></span> <span data-ttu-id="aa60f-718">Par exemple, le dialecte de l’espagnol parlé au Mexique est « es-MX ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-718">For example, the dialect of Spanish spoken in Mexico is "es-MX".</span></span> <span data-ttu-id="aa60f-719">Il contient l’espagnol parent « es », qui n’est spécifique à aucun pays.</span><span class="sxs-lookup"><span data-stu-id="aa60f-719">It has the parent "es"&mdash;Spanish non-specific to any country.</span></span>

<span data-ttu-id="aa60f-720">Imaginez que votre site reçoive une demande pour une ressource « Bienvenue » avec la culture « fr-CA ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-720">Imagine your site receives a request for a "Welcome" resource using culture "fr-CA".</span></span> <span data-ttu-id="aa60f-721">Le système de localisation recherche les ressources suivantes, dans l’ordre, et sélectionne la première correspondance :</span><span class="sxs-lookup"><span data-stu-id="aa60f-721">The localization system looks for the following resources, in order, and selects the first match:</span></span>

* <span data-ttu-id="aa60f-722">*Welcome.fr-CA.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-722">*Welcome.fr-CA.resx*</span></span>
* <span data-ttu-id="aa60f-723">*Welcome.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="aa60f-723">*Welcome.fr.resx*</span></span>
* <span data-ttu-id="aa60f-724">*Welcome.resx* (si `NeutralResourcesLanguage` est « fr-CA »)</span><span class="sxs-lookup"><span data-stu-id="aa60f-724">*Welcome.resx* (if the `NeutralResourcesLanguage` is "fr-CA")</span></span>

<span data-ttu-id="aa60f-725">Par exemple, si vous supprimez l’indicateur de culture « .fr » alors que la culture définie est le français, le fichier de ressources par défaut est lu et les chaînes sont localisées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-725">As an example, if you remove the ".fr" culture designator and you have the culture set to French, the default resource file is read and strings are localized.</span></span> <span data-ttu-id="aa60f-726">Le gestionnaire de ressources désigne une ressource par défaut ou de secours pour les cas où rien ne correspond à la culture demandée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-726">The Resource manager designates a default or fallback resource for when nothing meets your requested culture.</span></span> <span data-ttu-id="aa60f-727">Si vous voulez simplement retourner la clé quand une ressource est manquante pour la culture demandée, vous ne devez pas avoir de fichier de ressources par défaut.</span><span class="sxs-lookup"><span data-stu-id="aa60f-727">If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</span></span>

### <a name="generate-resource-files-with-visual-studio"></a><span data-ttu-id="aa60f-728">Générer des fichiers de ressources avec Visual Studio</span><span class="sxs-lookup"><span data-stu-id="aa60f-728">Generate resource files with Visual Studio</span></span>

<span data-ttu-id="aa60f-729">Si vous créez un fichier de ressources dans Visual Studio sans culture dans le nom de fichier (par exemple, *Welcome.resx*), Visual Studio crée une classe C# avec une propriété pour chaque chaîne.</span><span class="sxs-lookup"><span data-stu-id="aa60f-729">If you create a resource file in Visual Studio without a culture in the file name (for example, *Welcome.resx*), Visual Studio will create a C# class with a property for each string.</span></span> <span data-ttu-id="aa60f-730">Ce n’est généralement pas ce que vous souhaitez avec ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="aa60f-730">That's usually not what you want with ASP.NET Core.</span></span> <span data-ttu-id="aa60f-731">Vous n’avez habituellement pas de fichier de ressources *.resx* par défaut (un fichier *.resx* sans nom de culture).</span><span class="sxs-lookup"><span data-stu-id="aa60f-731">You typically don't have a default *.resx* resource file (a *.resx* file without the culture name).</span></span> <span data-ttu-id="aa60f-732">Nous vous suggérons donc de créer le fichier *.resx* avec un nom de culture (par exemple, *Welcome.fr.resx*).</span><span class="sxs-lookup"><span data-stu-id="aa60f-732">We suggest you create the *.resx* file with a culture name (for example *Welcome.fr.resx*).</span></span> <span data-ttu-id="aa60f-733">Lorsque vous créez un fichier *.resx* avec un nom de culture, Visual Studio ne génère pas le fichier de classe.</span><span class="sxs-lookup"><span data-stu-id="aa60f-733">When you create a *.resx* file with a culture name, Visual Studio won't generate the class file.</span></span>

### <a name="add-other-cultures"></a><span data-ttu-id="aa60f-734">Ajouter d’autres cultures</span><span class="sxs-lookup"><span data-stu-id="aa60f-734">Add other cultures</span></span>

<span data-ttu-id="aa60f-735">Chaque combinaison de langue et de culture (autres que la langue par défaut) nécessite un fichier de ressources unique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-735">Each language and culture combination (other than the default language) requires a unique resource file.</span></span> <span data-ttu-id="aa60f-736">Vous créez des fichiers de ressources pour différentes cultures et différents paramètres régionaux en créant des fichiers de ressources dans lesquels les codes de langue ISO font partie du nom de fichier (par exemple, **en-us**, **fr-ca** et \*\* en gb\*\*).</span><span class="sxs-lookup"><span data-stu-id="aa60f-736">You create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, **en-us**, **fr-ca**, and **en-gb**).</span></span> <span data-ttu-id="aa60f-737">Ces codes ISO sont placés entre le nom de fichier et l’extension de fichier *.resx*, comme dans *Welcome.es-MX.resx* (Espagnol/Mexique).</span><span class="sxs-lookup"><span data-stu-id="aa60f-737">These ISO codes are placed between the file name and the *.resx* file extension, as in *Welcome.es-MX.resx* (Spanish/Mexico).</span></span>

## <a name="implement-a-strategy-to-select-the-languageculture-for-each-request"></a><span data-ttu-id="aa60f-738">Implémenter une stratégie de sélection de la langue/culture pour chaque requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-738">Implement a strategy to select the language/culture for each request</span></span>

### <a name="configure-localization"></a><span data-ttu-id="aa60f-739">Configurer la localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-739">Configure localization</span></span>

<span data-ttu-id="aa60f-740">La localisation est configurée dans la méthode `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-740">Localization is configured in the `Startup.ConfigureServices` method:</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet1)]

* <span data-ttu-id="aa60f-741">`AddLocalization` ajoute les services de localisation au conteneur de services.</span><span class="sxs-lookup"><span data-stu-id="aa60f-741">`AddLocalization` Adds the localization services to the services container.</span></span> <span data-ttu-id="aa60f-742">Le code ci-dessus affecte également au chemin des ressources la valeur « Resources ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-742">The code above also sets the resources path to "Resources".</span></span>

* <span data-ttu-id="aa60f-743">`AddViewLocalization` ajoute la prise en charge des fichiers d’affichage localisés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-743">`AddViewLocalization` Adds support for localized view files.</span></span> <span data-ttu-id="aa60f-744">Dans cet exemple d’affichage, la localisation se base sur le suffixe du fichier d’affichage.</span><span class="sxs-lookup"><span data-stu-id="aa60f-744">In this sample view localization is based on the view file suffix.</span></span> <span data-ttu-id="aa60f-745">Par exemple, « fr » dans le fichier *Index.fr.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="aa60f-745">For example "fr" in the *Index.fr.cshtml* file.</span></span>

* <span data-ttu-id="aa60f-746">`AddDataAnnotationsLocalization` ajoute la prise en charge des messages de validation `DataAnnotations` localisés par le biais d’abstractions `IStringLocalizer`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-746">`AddDataAnnotationsLocalization` Adds support for localized `DataAnnotations` validation messages through `IStringLocalizer` abstractions.</span></span>

### <a name="localization-middleware"></a><span data-ttu-id="aa60f-747">Intergiciel (middleware) de localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-747">Localization middleware</span></span>

<span data-ttu-id="aa60f-748">La culture actuelle sur une requête est définie dans l’[intergiciel (middleware)](xref:fundamentals/middleware/index) de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-748">The current culture on a request is set in the localization [Middleware](xref:fundamentals/middleware/index).</span></span> <span data-ttu-id="aa60f-749">L’intergiciel de localisation est activé dans la méthode `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-749">The localization middleware is enabled in the `Startup.Configure` method.</span></span> <span data-ttu-id="aa60f-750">L’intergiciel de localisation doit être configuré avant tout intergiciel susceptible de vérifier la culture de la requête (par exemple, `app.UseMvcWithDefaultRoute()`).</span><span class="sxs-lookup"><span data-stu-id="aa60f-750">The localization middleware must be configured before any middleware which might check the request culture (for example, `app.UseMvcWithDefaultRoute()`).</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet2)]
[!INCLUDE[about the series](~/includes/code-comments-loc.md)]

<span data-ttu-id="aa60f-751">`UseRequestLocalization` initialise un objet `RequestLocalizationOptions`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-751">`UseRequestLocalization` initializes a `RequestLocalizationOptions` object.</span></span> <span data-ttu-id="aa60f-752">Sur chaque requête, la liste de `RequestCultureProvider` dans `RequestLocalizationOptions` est énumérée et le premier fournisseur capable de déterminer correctement la culture de la requête est utilisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-752">On every request the list of `RequestCultureProvider` in the `RequestLocalizationOptions` is enumerated and the first provider that can successfully determine the request culture is used.</span></span> <span data-ttu-id="aa60f-753">Les fournisseurs par défaut proviennent de la classe `RequestLocalizationOptions` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-753">The default providers come from the `RequestLocalizationOptions` class:</span></span>

1. `QueryStringRequestCultureProvider`
2. `CookieRequestCultureProvider`
3. `AcceptLanguageHeaderRequestCultureProvider`

<span data-ttu-id="aa60f-754">La liste par défaut va du plus spécifique au moins spécifique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-754">The default list goes from most specific to least specific.</span></span> <span data-ttu-id="aa60f-755">Plus loin dans l’article, nous verrons comment vous pouvez modifier l’ordre et même ajouter un fournisseur de culture personnalisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-755">Later in the article we'll see how you can change the order and even add a custom culture provider.</span></span> <span data-ttu-id="aa60f-756">Si aucun des fournisseurs ne peut déterminer la culture de la requête, `DefaultRequestCulture` est utilisé.</span><span class="sxs-lookup"><span data-stu-id="aa60f-756">If none of the providers can determine the request culture, the `DefaultRequestCulture` is used.</span></span>

### <a name="querystringrequestcultureprovider"></a><span data-ttu-id="aa60f-757">QueryStringRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="aa60f-757">QueryStringRequestCultureProvider</span></span>

<span data-ttu-id="aa60f-758">Certaines applications utilisent une chaîne de requête pour définir la [culture et la culture d’interface utilisateur](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa60f-758">Some apps will use a query string to set the [culture and UI culture](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span></span> <span data-ttu-id="aa60f-759">Pour les applications qui utilisent l’approche du cookie ou de l’en-tête Accept-Language, l’ajout d’une chaîne de requête à l’URL s’avère utile pour déboguer et tester le code.</span><span class="sxs-lookup"><span data-stu-id="aa60f-759">For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code.</span></span> <span data-ttu-id="aa60f-760">Par défaut, `QueryStringRequestCultureProvider` est inscrit en tant que premier fournisseur de localisation dans la liste `RequestCultureProvider`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-760">By default, the `QueryStringRequestCultureProvider` is registered as the first localization provider in the `RequestCultureProvider` list.</span></span> <span data-ttu-id="aa60f-761">Vous passez les paramètres de chaîne de requête `culture` et `ui-culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-761">You pass the query string parameters `culture` and `ui-culture`.</span></span> <span data-ttu-id="aa60f-762">L’exemple suivant affecte à la culture spécifique (langue et région) la valeur espagnol/Mexique :</span><span class="sxs-lookup"><span data-stu-id="aa60f-762">The following example sets the specific culture (language and region) to Spanish/Mexico:</span></span>

   `http://localhost:5000/?culture=es-MX&ui-culture=es-MX`

<span data-ttu-id="aa60f-763">Si vous passez uniquement l’une des deux (`culture` ou `ui-culture`), le fournisseur de chaîne de requête définit les deux valeurs à l’aide de celle que vous avez passée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-763">If you only pass in one of the two (`culture` or `ui-culture`), the query string provider will set both values using the one you passed in.</span></span> <span data-ttu-id="aa60f-764">Par exemple, la seule définition de la culture définit à la fois `Culture` et `UICulture` :</span><span class="sxs-lookup"><span data-stu-id="aa60f-764">For example, setting just the culture will set both the `Culture` and the `UICulture`:</span></span>

   `http://localhost:5000/?culture=es-MX`

### <a name="cookierequestcultureprovider"></a><span data-ttu-id="aa60f-765">CookieRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="aa60f-765">CookieRequestCultureProvider</span></span>

<span data-ttu-id="aa60f-766">Les applications de production fournissent souvent un mécanisme permettant de définir la culture à l’aide du cookie de culture ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="aa60f-766">Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie.</span></span> <span data-ttu-id="aa60f-767">Utilisez la méthode `MakeCookieValue` pour créer un cookie.</span><span class="sxs-lookup"><span data-stu-id="aa60f-767">Use the `MakeCookieValue` method to create a cookie.</span></span>

<span data-ttu-id="aa60f-768">`CookieRequestCultureProvider` `DefaultCookieName` Retourne le nom de cookie par défaut utilisé pour suivre les informations de culture préférées de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-768">The `CookieRequestCultureProvider` `DefaultCookieName` returns the default cookie name used to track the user's preferred culture information.</span></span> <span data-ttu-id="aa60f-769">Le nom du cookie par défaut est `.AspNetCore.Culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-769">The default cookie name is `.AspNetCore.Culture`.</span></span>

<span data-ttu-id="aa60f-770">Le format du cookie est `c=%LANGCODE%|uic=%LANGCODE%`, où `c` correspond à `Culture` et `uic` correspond à `UICulture`, par exemple :</span><span class="sxs-lookup"><span data-stu-id="aa60f-770">The cookie format is `c=%LANGCODE%|uic=%LANGCODE%`, where `c` is `Culture` and `uic` is `UICulture`, for example:</span></span>

    c=en-UK|uic=en-US

<span data-ttu-id="aa60f-771">Si vous spécifiez uniquement les informations de culture ou la culture d’interface utilisateur, la culture spécifiée est utilisée à la fois pour les informations de culture et la culture d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-771">If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</span></span>

### <a name="the-accept-language-http-header"></a><span data-ttu-id="aa60f-772">En-tête HTTP Accept-Language</span><span class="sxs-lookup"><span data-stu-id="aa60f-772">The Accept-Language HTTP header</span></span>

<span data-ttu-id="aa60f-773">L’[en-tête Accept-Language](https://www.w3.org/International/questions/qa-accept-lang-locales) peut être défini dans la plupart des navigateurs et a d’abord été conçu pour spécifier la langue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-773">The [Accept-Language header](https://www.w3.org/International/questions/qa-accept-lang-locales) is settable in most browsers and was originally intended to specify the user's language.</span></span> <span data-ttu-id="aa60f-774">Ce paramètre indique ce que le navigateur doit envoyer ou ce dont il a hérité du système d’exploitation sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="aa60f-774">This setting indicates what the browser has been set to send or has inherited from the underlying operating system.</span></span> <span data-ttu-id="aa60f-775">L’en-tête HTTP Accept-Language d’une requête de navigateur n’est pas un moyen infaillible de détecter la langue préférée de l’utilisateur (consultez [Définition des préférences de langue dans un navigateur](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span><span class="sxs-lookup"><span data-stu-id="aa60f-775">The Accept-Language HTTP header from a browser request isn't an infallible way to detect the user's preferred language (see [Setting language preferences in a browser](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span></span> <span data-ttu-id="aa60f-776">Une application de production doit inclure un moyen permettant à l’utilisateur de personnaliser son choix de culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-776">A production app should include a way for a user to customize their choice of culture.</span></span>

### <a name="set-the-accept-language-http-header-in-ie"></a><span data-ttu-id="aa60f-777">Définir l’en-tête HTTP Accept-Language dans IE</span><span class="sxs-lookup"><span data-stu-id="aa60f-777">Set the Accept-Language HTTP header in IE</span></span>

1. <span data-ttu-id="aa60f-778">À partir de l’icône d’engrenage, appuyez sur **Options Internet**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-778">From the gear icon, tap **Internet Options**.</span></span>

2. <span data-ttu-id="aa60f-779">Appuyez sur **Langues**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-779">Tap **Languages**.</span></span>

    ![Options Internet](localization/_static/lang.png)

3. <span data-ttu-id="aa60f-781">Appuyez sur **Définir les langues**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-781">Tap **Set Language Preferences**.</span></span>

4. <span data-ttu-id="aa60f-782">Appuyez sur **Ajouter une langue**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-782">Tap **Add a language**.</span></span>

5. <span data-ttu-id="aa60f-783">Ajoutez la langue.</span><span class="sxs-lookup"><span data-stu-id="aa60f-783">Add the language.</span></span>

6. <span data-ttu-id="aa60f-784">Tapez sur la langue, puis sur **Monter**.</span><span class="sxs-lookup"><span data-stu-id="aa60f-784">Tap the language, then tap **Move Up**.</span></span>

### <a name="the-content-language-http-header"></a><span data-ttu-id="aa60f-785">En-tête HTTP Content-Language</span><span class="sxs-lookup"><span data-stu-id="aa60f-785">The Content-Language HTTP header</span></span>

<span data-ttu-id="aa60f-786">En-tête d’entité [Content-Language](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Language) :</span><span class="sxs-lookup"><span data-stu-id="aa60f-786">The [Content-Language](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Language) entity header:</span></span>

 - <span data-ttu-id="aa60f-787">Est utilisé pour décrire la ou les langues destinées au public.</span><span class="sxs-lookup"><span data-stu-id="aa60f-787">Is used to describe the language(s) intended for the audience.</span></span>
 - <span data-ttu-id="aa60f-788">Permet à un utilisateur de faire la distinction en fonction de la langue préférée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-788">Allows a user to differentiate according to the users' own preferred language.</span></span>

<span data-ttu-id="aa60f-789">Les en-têtes d’entité sont utilisés dans les requêtes et les réponses HTTP.</span><span class="sxs-lookup"><span data-stu-id="aa60f-789">Entity headers are used in both HTTP requests and responses.</span></span>

<span data-ttu-id="aa60f-790">Vous `Content-Language` pouvez ajouter l’en-tête en définissant la propriété `ApplyCurrentCultureToResponseHeaders` .</span><span class="sxs-lookup"><span data-stu-id="aa60f-790">The `Content-Language` header can be added by setting the property `ApplyCurrentCultureToResponseHeaders`.</span></span>

<span data-ttu-id="aa60f-791">Ajout de l' `Content-Language` en-tête :</span><span class="sxs-lookup"><span data-stu-id="aa60f-791">Adding the `Content-Language` header:</span></span>

 - <span data-ttu-id="aa60f-792">Permet à RequestLocalizationMiddleware de définir l' `Content-Language` en-tête avec `CurrentUICulture` .</span><span class="sxs-lookup"><span data-stu-id="aa60f-792">Allows the RequestLocalizationMiddleware to set the `Content-Language` header with the `CurrentUICulture`.</span></span>
 - <span data-ttu-id="aa60f-793">Élimine la nécessité de définir explicitement l’en-tête de réponse `Content-Language` .</span><span class="sxs-lookup"><span data-stu-id="aa60f-793">Eliminates the need to set the response header `Content-Language` explicitly.</span></span>

```csharp
app.UseRequestLocalization(new RequestLocalizationOptions
{
    ApplyCurrentCultureToResponseHeaders = true
});
```

### <a name="use-a-custom-provider"></a><span data-ttu-id="aa60f-794">Utiliser un fournisseur personnalisé</span><span class="sxs-lookup"><span data-stu-id="aa60f-794">Use a custom provider</span></span>

<span data-ttu-id="aa60f-795">Supposons que vous vouliez permettre à vos clients de stocker leur langue et leur culture dans vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="aa60f-795">Suppose you want to let your customers store their language and culture in your databases.</span></span> <span data-ttu-id="aa60f-796">Vous pouvez écrire un fournisseur pour rechercher ces valeurs pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="aa60f-796">You could write a provider to look up these values for the user.</span></span> <span data-ttu-id="aa60f-797">Le code suivant illustre l’ajout d’un fournisseur personnalisé :</span><span class="sxs-lookup"><span data-stu-id="aa60f-797">The following code shows how to add a custom provider:</span></span>

```csharp
private const string enUSCulture = "en-US";

services.Configure<RequestLocalizationOptions>(options =>
{
    var supportedCultures = new[]
    {
        new CultureInfo(enUSCulture),
        new CultureInfo("fr")
    };

    options.DefaultRequestCulture = new RequestCulture(culture: enUSCulture, uiCulture: enUSCulture);
    options.SupportedCultures = supportedCultures;
    options.SupportedUICultures = supportedCultures;

    options.AddInitialRequestCultureProvider(new CustomRequestCultureProvider(async context =>
    {
        // My custom request culture logic
        return new ProviderCultureResult("en");
    }));
});
```

<span data-ttu-id="aa60f-798">Utilisez `RequestLocalizationOptions` pour ajouter ou supprimer des fournisseurs de localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-798">Use `RequestLocalizationOptions` to add or remove localization providers.</span></span>

### <a name="set-the-culture-programmatically"></a><span data-ttu-id="aa60f-799">Définir la culture par programmation</span><span class="sxs-lookup"><span data-stu-id="aa60f-799">Set the culture programmatically</span></span>

<span data-ttu-id="aa60f-800">Cet exemple de projet **Localization.StarterWeb** sur [GitHub](https://github.com/aspnet/entropy) contient l’interface utilisateur permettant de définir `Culture`.</span><span class="sxs-lookup"><span data-stu-id="aa60f-800">This sample **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) contains UI to set the `Culture`.</span></span> <span data-ttu-id="aa60f-801">Le fichier *Views/Shared/_SelectLanguagePartial.cshtml* vous permet de sélectionner la culture dans la liste des cultures prises en charge :</span><span class="sxs-lookup"><span data-stu-id="aa60f-801">The *Views/Shared/_SelectLanguagePartial.cshtml* file allows you to select the culture from the list of supported cultures:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_SelectLanguagePartial.cshtml)]

<span data-ttu-id="aa60f-802">Le fichier *Views/Shared/_SelectLanguagePartial.cshtml* est ajouté à la section `footer` du fichier de disposition afin d’être disponible pour tous les affichages :</span><span class="sxs-lookup"><span data-stu-id="aa60f-802">The *Views/Shared/_SelectLanguagePartial.cshtml* file is added to the `footer` section of the layout file so it will be available to all views:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_Layout.cshtml?range=43-56&highlight=10)]

<span data-ttu-id="aa60f-803">La méthode `SetLanguage` définit le cookie de la culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-803">The `SetLanguage` method sets the culture cookie.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/HomeController.cs?range=57-67)]

<span data-ttu-id="aa60f-804">Vous ne pouvez pas incorporer *_SelectLanguagePartial.cshtml* dans l’exemple de code de ce projet.</span><span class="sxs-lookup"><span data-stu-id="aa60f-804">You can't plug in the *_SelectLanguagePartial.cshtml* to sample code for this project.</span></span> <span data-ttu-id="aa60f-805">Le projet **Localization. StarterWeb** sur [GitHub](https://github.com/aspnet/entropy) contient du code pour transmettre le `RequestLocalizationOptions` à un en Razor partiel via le conteneur d' [injection de dépendance](dependency-injection.md) .</span><span class="sxs-lookup"><span data-stu-id="aa60f-805">The **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) has code to flow the `RequestLocalizationOptions` to a Razor partial through the [Dependency Injection](dependency-injection.md) container.</span></span>

## <a name="model-binding-route-data-and-query-strings"></a><span data-ttu-id="aa60f-806">Données d’itinéraire de liaison de modèle et chaînes de requête</span><span class="sxs-lookup"><span data-stu-id="aa60f-806">Model binding route data and query strings</span></span>

<span data-ttu-id="aa60f-807">Consultez [comportement de la globalisation des données de routage de liaison de modèle et des chaînes de requête](xref:mvc/models/model-binding#glob).</span><span class="sxs-lookup"><span data-stu-id="aa60f-807">See [Globalization behavior of model binding route data and query strings](xref:mvc/models/model-binding#glob).</span></span>

## <a name="globalization-and-localization-terms"></a><span data-ttu-id="aa60f-808">Terminologie de la globalisation et de la localisation</span><span class="sxs-lookup"><span data-stu-id="aa60f-808">Globalization and localization terms</span></span>

<span data-ttu-id="aa60f-809">Le processus de localisation de votre application exige également une compréhension élémentaire des jeux de caractères appropriés couramment utilisés dans le développement de logiciels moderne ainsi qu’une compréhension des problèmes qui y sont associés.</span><span class="sxs-lookup"><span data-stu-id="aa60f-809">The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them.</span></span> <span data-ttu-id="aa60f-810">Bien que tous les ordinateurs stockent le texte sous forme de nombres (codes), les différents systèmes stockent ce même texte en utilisant des nombres différents.</span><span class="sxs-lookup"><span data-stu-id="aa60f-810">Although all computers store text as numbers (codes), different systems store the same text using different numbers.</span></span> <span data-ttu-id="aa60f-811">Le processus de localisation consiste à traduire l’interface utilisateur de l’application pour une culture/des paramètres régionaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="aa60f-811">The localization process refers to translating the app user interface (UI) for a specific culture/locale.</span></span>

<span data-ttu-id="aa60f-812">L’[adaptabilité](/dotnet/standard/globalization-localization/localizability-review) est un processus intermédiaire permettant de vérifier qu’une application globalisée est prête à être localisée.</span><span class="sxs-lookup"><span data-stu-id="aa60f-812">[Localizability](/dotnet/standard/globalization-localization/localizability-review) is an intermediate process for verifying that a globalized app is ready for localization.</span></span>

<span data-ttu-id="aa60f-813">Le format [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) du nom de la culture est `<languagecode2>-<country/regioncode2>`, où `<languagecode2>` correspond au code de la langue et `<country/regioncode2>` au code de la sous-culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-813">The [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) format for the culture name is `<languagecode2>-<country/regioncode2>`, where `<languagecode2>` is the language code and `<country/regioncode2>` is the subculture code.</span></span> <span data-ttu-id="aa60f-814">Par exemple, `es-CL` pour l’espagnol (Chili), `en-US` pour l’anglais (États-Unis) et `en-AU` pour l’anglais (Australie).</span><span class="sxs-lookup"><span data-stu-id="aa60f-814">For example, `es-CL` for Spanish (Chile), `en-US` for English (United States), and `en-AU` for English (Australia).</span></span> <span data-ttu-id="aa60f-815">Le format [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) est la combinaison d’un code de culture à deux lettres minuscules de norme ISO 639 associé à une langue et d’un code de sous-culture à deux lettres majuscules de norme ISO 3166 associé à un pays ou une région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-815">[RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.</span></span> <span data-ttu-id="aa60f-816">Consultez [Nom de culture de la langue](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span><span class="sxs-lookup"><span data-stu-id="aa60f-816">See [Language Culture Name](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span></span>

<span data-ttu-id="aa60f-817">L’internationalisation est souvent abrégée par « I18N ».</span><span class="sxs-lookup"><span data-stu-id="aa60f-817">Internationalization is often abbreviated to "I18N".</span></span> <span data-ttu-id="aa60f-818">Cette abréviation prend les première et dernière lettres du mot ainsi que le nombre de lettres entre elles, 18 représentant ainsi le nombre de lettres le « I » initial et le « N » final.</span><span class="sxs-lookup"><span data-stu-id="aa60f-818">The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first "I" and the last "N".</span></span> <span data-ttu-id="aa60f-819">Il en va de même pour la globalisation (G11N) et la localisation (L10N).</span><span class="sxs-lookup"><span data-stu-id="aa60f-819">The same applies to Globalization (G11N), and Localization (L10N).</span></span>

<span data-ttu-id="aa60f-820">Termes :</span><span class="sxs-lookup"><span data-stu-id="aa60f-820">Terms:</span></span>

* <span data-ttu-id="aa60f-821">Globalisation (G11N) : Processus permettant de faire prendre en charge différentes langues et régions à une application.</span><span class="sxs-lookup"><span data-stu-id="aa60f-821">Globalization (G11N): The process of making an app support different languages and regions.</span></span>
* <span data-ttu-id="aa60f-822">Localisation (L10N) : Processus permettant de personnaliser une application pour une langue et une région données.</span><span class="sxs-lookup"><span data-stu-id="aa60f-822">Localization (L10N): The process of customizing an app for a given language and region.</span></span>
* <span data-ttu-id="aa60f-823">Internationalisation (I18N) : Décrit à la fois la globalisation et la localisation.</span><span class="sxs-lookup"><span data-stu-id="aa60f-823">Internationalization (I18N): Describes both globalization and localization.</span></span>
* <span data-ttu-id="aa60f-824">Culture : Correspond à une langue et éventuellement à une région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-824">Culture: It's a language and, optionally, a region.</span></span>
* <span data-ttu-id="aa60f-825">Culture neutre : Culture dont la langue est spécifiée, mais pas la région.</span><span class="sxs-lookup"><span data-stu-id="aa60f-825">Neutral culture: A culture that has a specified language, but not a region.</span></span> <span data-ttu-id="aa60f-826">(Exemples : « en », « es ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-826">(for example "en", "es")</span></span>
* <span data-ttu-id="aa60f-827">Culture spécifique : Culture dont la langue et la région sont spécifiées.</span><span class="sxs-lookup"><span data-stu-id="aa60f-827">Specific culture: A culture that has a specified language and region.</span></span> <span data-ttu-id="aa60f-828">(Exemples : « en-US », « en-GB », « es-CL ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-828">(for example "en-US", "en-GB", "es-CL")</span></span>
* <span data-ttu-id="aa60f-829">Culture parent : Culture neutre qui contient une culture spécifique.</span><span class="sxs-lookup"><span data-stu-id="aa60f-829">Parent culture: The neutral culture that contains a specific culture.</span></span> <span data-ttu-id="aa60f-830">(Exemple : « en » est la culture parent de « en-US » et « en-GB ».)</span><span class="sxs-lookup"><span data-stu-id="aa60f-830">(for example, "en" is the parent culture of "en-US" and "en-GB")</span></span>
* <span data-ttu-id="aa60f-831">Paramètres régionaux : Synonyme de culture.</span><span class="sxs-lookup"><span data-stu-id="aa60f-831">Locale: A locale is the same as a culture.</span></span>

[!INCLUDE[](~/includes/localization/currency.md)]

[!INCLUDE[](~/includes/localization/unsupported-culture-log-level.md)]

## <a name="additional-resources"></a><span data-ttu-id="aa60f-832">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="aa60f-832">Additional resources</span></span>

* <xref:fundamentals/troubleshoot-aspnet-core-localization>
* <span data-ttu-id="aa60f-833">[Projet Localization.StarterWeb](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) utilisé dans l’article.</span><span class="sxs-lookup"><span data-stu-id="aa60f-833">[Localization.StarterWeb project](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) used in the article.</span></span>
* [<span data-ttu-id="aa60f-834">Internationalisation et localisation d’applications .NET</span><span class="sxs-lookup"><span data-stu-id="aa60f-834">Globalizing and localizing .NET applications</span></span>](/dotnet/standard/globalization-localization/index)
* [<span data-ttu-id="aa60f-835">Ressources dans les fichiers. resx</span><span class="sxs-lookup"><span data-stu-id="aa60f-835">Resources in .resx Files</span></span>](/dotnet/framework/resources/working-with-resx-files-programmatically)
* [<span data-ttu-id="aa60f-836">Kit de ressources pour application multilingue Microsoft</span><span class="sxs-lookup"><span data-stu-id="aa60f-836">Microsoft Multilingual App Toolkit</span></span>](https://marketplace.visualstudio.com/items?itemName=MultilingualAppToolkit.MultilingualAppToolkit-18308)
* [<span data-ttu-id="aa60f-837">Localisation et classes génériques</span><span class="sxs-lookup"><span data-stu-id="aa60f-837">Localization & Generics</span></span>](http://hishambinateya.com/localization-and-generics)

::: moniker-end
